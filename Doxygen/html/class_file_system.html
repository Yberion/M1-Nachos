<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: FileSystem Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_file_system.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_file_system-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">FileSystem Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines the Nachos file system.  
 <a href="class_file_system.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="filesys_8hpp_source.html">filesys.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a12d63294322b37e934edd03ff614b95a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_system.html#a12d63294322b37e934edd03ff614b95a">FileSystem</a> (bool format)</td></tr>
<tr class="separator:a12d63294322b37e934edd03ff614b95a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e366f036e9d9cd884fa689963aacc49"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_system.html#a9e366f036e9d9cd884fa689963aacc49">~FileSystem</a> ()</td></tr>
<tr class="memdesc:a9e366f036e9d9cd884fa689963aacc49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor of file system. Called when Nachos is shut-down.  <a href="class_file_system.html#a9e366f036e9d9cd884fa689963aacc49">More...</a><br /></td></tr>
<tr class="separator:a9e366f036e9d9cd884fa689963aacc49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac789d58815881d7f193d86085b0f54aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_system.html#ac789d58815881d7f193d86085b0f54aa">Create</a> (char *name, int initialSize)</td></tr>
<tr class="memdesc:ac789d58815881d7f193d86085b0f54aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a file (UNIX creat)  <a href="class_file_system.html#ac789d58815881d7f193d86085b0f54aa">More...</a><br /></td></tr>
<tr class="separator:ac789d58815881d7f193d86085b0f54aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a606ea080a2a0fe5e3be3c3f5b8f4e7bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_open_file.html">OpenFile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_system.html#a606ea080a2a0fe5e3be3c3f5b8f4e7bc">Open</a> (char *name)</td></tr>
<tr class="memdesc:a606ea080a2a0fe5e3be3c3f5b8f4e7bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a file (UNIX open)  <a href="class_file_system.html#a606ea080a2a0fe5e3be3c3f5b8f4e7bc">More...</a><br /></td></tr>
<tr class="separator:a606ea080a2a0fe5e3be3c3f5b8f4e7bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52e69a068c68c6c84f02c80fd4c5389e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_system.html#a52e69a068c68c6c84f02c80fd4c5389e">Remove</a> (char *name)</td></tr>
<tr class="memdesc:a52e69a068c68c6c84f02c80fd4c5389e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a file (UNIX unlink)  <a href="class_file_system.html#a52e69a068c68c6c84f02c80fd4c5389e">More...</a><br /></td></tr>
<tr class="separator:a52e69a068c68c6c84f02c80fd4c5389e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf76918c6f0d24bc72aaa84625adfddf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_system.html#aaf76918c6f0d24bc72aaa84625adfddf">List</a> ()</td></tr>
<tr class="memdesc:aaf76918c6f0d24bc72aaa84625adfddf"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_list.html" title="Definition of a generic single-linked &quot;list&quot;.">List</a> all the files in the file system.  <a href="class_file_system.html#aaf76918c6f0d24bc72aaa84625adfddf">More...</a><br /></td></tr>
<tr class="separator:aaf76918c6f0d24bc72aaa84625adfddf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebaf06661b1879a62afefa5abe99f21e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_system.html#aebaf06661b1879a62afefa5abe99f21e">Print</a> ()</td></tr>
<tr class="memdesc:aebaf06661b1879a62afefa5abe99f21e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_list.html" title="Definition of a generic single-linked &quot;list&quot;.">List</a> all the files and their contents.  <a href="class_file_system.html#aebaf06661b1879a62afefa5abe99f21e">More...</a><br /></td></tr>
<tr class="separator:aebaf06661b1879a62afefa5abe99f21e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a798400dbcaaef6d6dde5e63fcc500a60"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_open_file.html">OpenFile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_system.html#a798400dbcaaef6d6dde5e63fcc500a60">GetFreeMapFile</a> ()</td></tr>
<tr class="memdesc:a798400dbcaaef6d6dde5e63fcc500a60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the free map table.  <a href="class_file_system.html#a798400dbcaaef6d6dde5e63fcc500a60">More...</a><br /></td></tr>
<tr class="separator:a798400dbcaaef6d6dde5e63fcc500a60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a118ce47f3ef95d3e930572c20836d327"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_open_file.html">OpenFile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_system.html#a118ce47f3ef95d3e930572c20836d327">GetDirFile</a> ()</td></tr>
<tr class="memdesc:a118ce47f3ef95d3e930572c20836d327"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the root directory.  <a href="class_file_system.html#a118ce47f3ef95d3e930572c20836d327">More...</a><br /></td></tr>
<tr class="separator:a118ce47f3ef95d3e930572c20836d327"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b4f11a12aed939e691edd6d591a8fcf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_system.html#a9b4f11a12aed939e691edd6d591a8fcf">Mkdir</a> (char *)</td></tr>
<tr class="memdesc:a9b4f11a12aed939e691edd6d591a8fcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new directory.  <a href="class_file_system.html#a9b4f11a12aed939e691edd6d591a8fcf">More...</a><br /></td></tr>
<tr class="separator:a9b4f11a12aed939e691edd6d591a8fcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5cbf7822080d1c9bb606b5d74dd4ee5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_system.html#ae5cbf7822080d1c9bb606b5d74dd4ee5">Rmdir</a> (char *)</td></tr>
<tr class="memdesc:ae5cbf7822080d1c9bb606b5d74dd4ee5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a directory.  <a href="class_file_system.html#ae5cbf7822080d1c9bb606b5d74dd4ee5">More...</a><br /></td></tr>
<tr class="separator:ae5cbf7822080d1c9bb606b5d74dd4ee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines the Nachos file system. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a12d63294322b37e934edd03ff614b95a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12d63294322b37e934edd03ff614b95a">&#9670;&nbsp;</a></span>FileSystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FileSystem::FileSystem </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the file system. Must be called <em>after</em> "synchDisk" has been initialized.</p>
<p>Initialize the file system. If format = true, the disk has nothing on it, and we need to initialize the disk to contain an empty directory, and a bitmap of free sectors (with almost but not all of the sectors marked as free). <br  />
</p>
<p>If format = false, we just have to open the files representing the bitmap and the directory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">format</td><td>should we initialize the disk? </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_file_system_a12d63294322b37e934edd03ff614b95a_cgraph.png" border="0" usemap="#class_file_system_a12d63294322b37e934edd03ff614b95a_cgraph" alt=""/></div>
<map name="class_file_system_a12d63294322b37e934edd03ff614b95a_cgraph" id="class_file_system_a12d63294322b37e934edd03ff614b95a_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,168,57"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="232,5,300,32"/>
<area shape="rect" href="class_bit_map.html#ae3eb006c755440ae830bf220457dbbc7" title=" " alt="" coords="216,56,316,83"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="364,5,480,32"/>
</map>
</div>

</div>
</div>
<a id="a9e366f036e9d9cd884fa689963aacc49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e366f036e9d9cd884fa689963aacc49">&#9670;&nbsp;</a></span>~FileSystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FileSystem::~FileSystem </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor of file system. Called when Nachos is shut-down. </p>
<p>Destructor of the file system, called when Nachos is stopped </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac789d58815881d7f193d86085b0f54aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac789d58815881d7f193d86085b0f54aa">&#9670;&nbsp;</a></span>Create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FileSystem::Create </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>initialSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a file (UNIX creat) </p>
<p>Create a file in the Nachos file system (similar to UNIX create). Since we can't increase the size of files dynamically, we have to give Create the initial size of the file.</p>
<p>The steps to create a file are: Make sure the file doesn't already exist Allocate a sector for the file header Allocate space on disk for the data blocks for the file Add the name to the directory Store the new file header on disk Flush the changes to the bitmap and the directory back to disk</p>
<p>Create fails if: file is already in directory no free space for file header no free entry for file in directory no free space for data blocks for the file</p>
<p>Note that this implementation assumes there is no concurrent access to the file system!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>is the name of file to be created (NOT MODIFIED) </td></tr>
    <tr><td class="paramname">initialSize</td><td>is the size of file to be created </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NO_ERROR if everything goes ok, otherwise, return an error code as define in <a class="el" href="msgerror_8hpp.html" title="Defines the data structure to store error messages during a syscall process.">msgerror.hpp</a> </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_file_system_ac789d58815881d7f193d86085b0f54aa_cgraph.png" border="0" usemap="#class_file_system_ac789d58815881d7f193d86085b0f54aa_cgraph" alt=""/></div>
<map name="class_file_system_ac789d58815881d7f193d86085b0f54aa_cgraph" id="class_file_system_ac789d58815881d7f193d86085b0f54aa_cgraph">
<area shape="rect" title="Create a file (UNIX creat)" alt="" coords="5,81,140,108"/>
<area shape="rect" href="class_lock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="189,5,292,32"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="759,107,827,133"/>
<area shape="rect" href="filesys_8cpp.html#a6aea4042690035ff4b4b4531ccca4dc1" title=" " alt="" coords="209,107,272,133"/>
<area shape="rect" href="class_lock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="188,157,293,184"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="917,107,1033,133"/>
<area shape="rect" href="class_directory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title=" " alt="" coords="346,157,491,184"/>
<area shape="rect" href="class_file_system.html#a118ce47f3ef95d3e930572c20836d327" title="Get the root directory." alt="" coords="341,208,496,235"/>
<area shape="rect" href="class_open_file.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="544,157,669,184"/>
<area shape="rect" href="class_file_header.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="717,157,869,184"/>
</map>
</div>

</div>
</div>
<a id="a118ce47f3ef95d3e930572c20836d327"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a118ce47f3ef95d3e930572c20836d327">&#9670;&nbsp;</a></span>GetDirFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_open_file.html">OpenFile</a> * FileSystem::GetDirFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the root directory. </p>
<p>return the base directory file (used by the open file table). </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_file_system_a118ce47f3ef95d3e930572c20836d327_icgraph.png" border="0" usemap="#class_file_system_a118ce47f3ef95d3e930572c20836d327_icgraph" alt=""/></div>
<map name="class_file_system_a118ce47f3ef95d3e930572c20836d327_icgraph" id="class_file_system_a118ce47f3ef95d3e930572c20836d327_icgraph">
<area shape="rect" title="Get the root directory." alt="" coords="421,157,576,184"/>
<area shape="rect" href="filesys_8hpp.html#a562c4a58dde9f8b0a25dc482e23d9dc4" title=" " alt="" coords="311,157,373,184"/>
<area shape="rect" href="class_file_system.html#ac789d58815881d7f193d86085b0f54aa" title="Create a file (UNIX creat)" alt="" coords="116,5,251,32"/>
<area shape="rect" href="class_file_system.html#a9b4f11a12aed939e691edd6d591a8fcf" title="Create a new directory." alt="" coords="119,56,247,83"/>
<area shape="rect" href="class_file_system.html#a606ea080a2a0fe5e3be3c3f5b8f4e7bc" title="Open a file (UNIX open)" alt="" coords="120,107,247,133"/>
<area shape="rect" href="class_open_file_table.html#ab0519dd960600e61b98d524281aaa882" title=" " alt="" coords="111,157,255,184"/>
<area shape="rect" href="class_file_system.html#a52e69a068c68c6c84f02c80fd4c5389e" title="Delete a file (UNIX unlink)" alt="" coords="112,208,255,235"/>
<area shape="rect" href="class_open_file_table.html#a004541913ef8deb24d571c20d2020175" title="remove the file from the file system" alt="" coords="104,259,263,285"/>
<area shape="rect" href="class_file_system.html#ae5cbf7822080d1c9bb606b5d74dd4ee5" title="Delete a directory." alt="" coords="118,309,249,336"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,208,56,235"/>
</map>
</div>

</div>
</div>
<a id="a798400dbcaaef6d6dde5e63fcc500a60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a798400dbcaaef6d6dde5e63fcc500a60">&#9670;&nbsp;</a></span>GetFreeMapFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_open_file.html">OpenFile</a> * FileSystem::GetFreeMapFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the free map table. </p>
<p>return the free map file (used by the open file table). </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_file_system_a798400dbcaaef6d6dde5e63fcc500a60_icgraph.png" border="0" usemap="#class_file_system_a798400dbcaaef6d6dde5e63fcc500a60_icgraph" alt=""/></div>
<map name="class_file_system_a798400dbcaaef6d6dde5e63fcc500a60_icgraph" id="class_file_system_a798400dbcaaef6d6dde5e63fcc500a60_icgraph">
<area shape="rect" title="Get the free map table." alt="" coords="571,107,760,133"/>
<area shape="rect" href="class_open_file.html#ad4b5d26a169a7c22e6f27c1693adb1aa" title=" " alt="" coords="396,56,523,83"/>
<area shape="rect" href="class_open_file_table_entry.html#a3db43ff60517c9949bb89a499c7304a8" title=" " alt="" coords="5,99,157,141"/>
<area shape="rect" href="class_open_file.html#a2de8d2d805fef3510bfd2fdf46f683fa" title=" " alt="" coords="220,5,333,32"/>
<area shape="rect" href="class_bit_map.html#a19052d41ba5a654c7e478582dffba20d" title=" " alt="" coords="211,56,343,83"/>
<area shape="rect" href="class_directory.html#abf5550df42587bbc604c71441a4d12fc" title=" " alt="" coords="205,107,348,133"/>
</map>
</div>

</div>
</div>
<a id="aaf76918c6f0d24bc72aaa84625adfddf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf76918c6f0d24bc72aaa84625adfddf">&#9670;&nbsp;</a></span>List()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FileSystem::List </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="class_list.html" title="Definition of a generic single-linked &quot;list&quot;.">List</a> all the files in the file system. </p>
<p><a class="el" href="class_list.html" title="Definition of a generic single-linked &quot;list&quot;.">List</a> all the files in the file system directory. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_file_system_aaf76918c6f0d24bc72aaa84625adfddf_cgraph.png" border="0" usemap="#class_file_system_aaf76918c6f0d24bc72aaa84625adfddf_cgraph" alt=""/></div>
<map name="class_file_system_aaf76918c6f0d24bc72aaa84625adfddf_cgraph" id="class_file_system_aaf76918c6f0d24bc72aaa84625adfddf_cgraph">
<area shape="rect" title="List all the files in the file system." alt="" coords="5,93,123,120"/>
<area shape="rect" href="class_bit_map.html#ad6d12eefec9b64e903d072c83f7c29a2" title=" " alt="" coords="171,5,305,32"/>
<area shape="rect" href="class_directory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title=" " alt="" coords="353,56,499,83"/>
<area shape="rect" href="class_directory.html#a2525a4455b80a1ee2648319ab257037c" title=" " alt="" coords="187,131,289,157"/>
<area shape="rect" href="class_bit_map.html#af73514736aff03229d58557d0423daca" title=" " alt="" coords="174,181,302,208"/>
<area shape="rect" href="class_open_file.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="547,31,672,57"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="762,5,830,32"/>
<area shape="rect" href="class_file_header.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="720,56,872,83"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="920,5,1036,32"/>
<area shape="rect" href="class_open_file.html#aaa8600eb2b54645780d5a6208ad85762" title="return true if the file is a directory" alt="" coords="372,131,480,157"/>
<area shape="rect" href="class_file_header.html#ae43a97c41cef7b52a01c5d1da28ed3fa" title=" " alt="" coords="550,131,669,157"/>
<area shape="rect" href="class_bit_map.html#af5a945ba7b79e92a5a1bb0db24ecf26a" title=" " alt="" coords="378,181,474,208"/>
</map>
</div>

</div>
</div>
<a id="a9b4f11a12aed939e691edd6d591a8fcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b4f11a12aed939e691edd6d591a8fcf">&#9670;&nbsp;</a></span>Mkdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FileSystem::Mkdir </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dirname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new directory. </p>
<p>Create a directory in the Nachos file system (similar to UNIX create). A directory is a file containing a table of directory entries.</p>
<p>The steps to create a dirctory are: Make sure the name is valid and does not exist Create a file containing the directory entries <br  />
 mkdir fails if: dir already exists no free space for file header no free entry for dir in directory no free space for data blocks for the file</p>
<p>Note that this implementation assumes there is no concurrent access to the file system!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>is the name of directory to be created (NOT MODIFIED) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NO_ERROR if everything goes ok, an error code otherwise (see <a class="el" href="msgerror_8hpp.html" title="Defines the data structure to store error messages during a syscall process.">msgerror.hpp</a>) </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_file_system_a9b4f11a12aed939e691edd6d591a8fcf_cgraph.png" border="0" usemap="#class_file_system_a9b4f11a12aed939e691edd6d591a8fcf_cgraph" alt=""/></div>
<map name="class_file_system_a9b4f11a12aed939e691edd6d591a8fcf_cgraph" id="class_file_system_a9b4f11a12aed939e691edd6d591a8fcf_cgraph">
<area shape="rect" title="Create a new directory." alt="" coords="5,5,133,32"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="710,31,778,57"/>
<area shape="rect" href="filesys_8cpp.html#a6aea4042690035ff4b4b4531ccca4dc1" title=" " alt="" coords="181,56,244,83"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="868,31,984,57"/>
<area shape="rect" href="class_directory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title=" " alt="" coords="297,81,442,108"/>
<area shape="rect" href="class_file_system.html#a118ce47f3ef95d3e930572c20836d327" title="Get the root directory." alt="" coords="292,132,447,159"/>
<area shape="rect" href="class_open_file.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="495,81,620,108"/>
<area shape="rect" href="class_file_header.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="668,81,820,108"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_file_system_a9b4f11a12aed939e691edd6d591a8fcf_icgraph.png" border="0" usemap="#class_file_system_a9b4f11a12aed939e691edd6d591a8fcf_icgraph" alt=""/></div>
<map name="class_file_system_a9b4f11a12aed939e691edd6d591a8fcf_icgraph" id="class_file_system_a9b4f11a12aed939e691edd6d591a8fcf_icgraph">
<area shape="rect" title="Create a new directory." alt="" coords="104,5,232,32"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="a606ea080a2a0fe5e3be3c3f5b8f4e7bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a606ea080a2a0fe5e3be3c3f5b8f4e7bc">&#9670;&nbsp;</a></span>Open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_open_file.html">OpenFile</a> * FileSystem::Open </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a file (UNIX open) </p>
<p>Open a file for reading and writing. <br  />
 To open a file: Find the location of the file's header, using the directory Bring the header into memory</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the text name of the file to be opened (NOT MODIFIED) </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_file_system_a606ea080a2a0fe5e3be3c3f5b8f4e7bc_cgraph.png" border="0" usemap="#class_file_system_a606ea080a2a0fe5e3be3c3f5b8f4e7bc_cgraph" alt=""/></div>
<map name="class_file_system_a606ea080a2a0fe5e3be3c3f5b8f4e7bc_cgraph" id="class_file_system_a606ea080a2a0fe5e3be3c3f5b8f4e7bc_cgraph">
<area shape="rect" title="Open a file (UNIX open)" alt="" coords="5,133,132,160"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="782,57,850,84"/>
<area shape="rect" href="class_directory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title=" " alt="" coords="369,159,514,185"/>
<area shape="rect" href="class_directory.html#aa0072462a745ab1bc84e36a810ce7cc5" title=" " alt="" coords="195,108,301,135"/>
<area shape="rect" href="filesys_8cpp.html#a6aea4042690035ff4b4b4531ccca4dc1" title=" " alt="" coords="217,57,279,84"/>
<area shape="rect" href="class_open_file.html#aaa8600eb2b54645780d5a6208ad85762" title="return true if the file is a directory" alt="" coords="194,209,302,236"/>
<area shape="rect" href="class_open_file.html#a55f2403097b272cec23712007d4a11b5" title="Set the file&#39;s name." alt="" coords="180,260,316,287"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="940,57,1056,84"/>
<area shape="rect" href="class_open_file.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="567,133,692,160"/>
<area shape="rect" href="class_file_header.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="740,133,892,160"/>
<area shape="rect" href="class_file_system.html#a118ce47f3ef95d3e930572c20836d327" title="Get the root directory." alt="" coords="364,108,519,135"/>
<area shape="rect" href="class_file_header.html#ae43a97c41cef7b52a01c5d1da28ed3fa" title=" " alt="" coords="382,209,501,236"/>
</map>
</div>

</div>
</div>
<a id="aebaf06661b1879a62afefa5abe99f21e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebaf06661b1879a62afefa5abe99f21e">&#9670;&nbsp;</a></span>Print()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FileSystem::Print </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="class_list.html" title="Definition of a generic single-linked &quot;list&quot;.">List</a> all the files and their contents. </p>
<p>Print everything about the file system: the contents of the bitmap the contents of the directory for each file in the directory, the contents of the file header the data in the file </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_file_system_aebaf06661b1879a62afefa5abe99f21e_cgraph.png" border="0" usemap="#class_file_system_aebaf06661b1879a62afefa5abe99f21e_cgraph" alt=""/></div>
<map name="class_file_system_aebaf06661b1879a62afefa5abe99f21e_cgraph" id="class_file_system_aebaf06661b1879a62afefa5abe99f21e_cgraph">
<area shape="rect" title="List all the files and their contents." alt="" coords="5,107,128,133"/>
<area shape="rect" href="class_file_header.html#aa85564cee98fc9592df08cc5e4a2efc6" title="Initialize file header from disk." alt="" coords="176,81,331,108"/>
<area shape="rect" href="class_file_header.html#a57b661cda2c4d51ee06cc29e7ea0a0c0" title="Print the contents of the file." alt="" coords="194,132,313,159"/>
<area shape="rect" href="class_driver_disk.html#a2e93ba9a36bba4e8b3eeb43f877b2395" title=" " alt="" coords="379,107,535,133"/>
<area shape="rect" href="class_lock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="599,5,701,32"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="809,56,877,83"/>
<area shape="rect" href="class_semaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="597,107,703,133"/>
<area shape="rect" href="class_disk.html#a8b51a82d4f2fd009335d0c591ae11042" title=" " alt="" coords="583,157,717,184"/>
<area shape="rect" href="class_lock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="597,208,703,235"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="968,81,1084,108"/>
<area shape="rect" href="class_disk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="765,157,920,184"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="814,208,871,235"/>
<area shape="rect" href="sysdep_8cpp.html#a6140dcc97ab52a9406e6d3f5749fa43c" title="Read characters from an open file. Abort if read fails." alt="" coords="817,259,869,285"/>
</map>
</div>

</div>
</div>
<a id="a52e69a068c68c6c84f02c80fd4c5389e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52e69a068c68c6c84f02c80fd4c5389e">&#9670;&nbsp;</a></span>Remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FileSystem::Remove </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a file (UNIX unlink) </p>
<p>Delete a file from the file system. This requires: Remove it from the directory Delete the space for its header Delete the space for its data blocks Write changes to directory, bitmap back to disk</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the text name of the file to be removed (NOT MODIFIED) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NO_ERROR if the file was deleted, else an error code as defined in <a class="el" href="msgerror_8hpp.html" title="Defines the data structure to store error messages during a syscall process.">msgerror.hpp</a> </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_file_system_a52e69a068c68c6c84f02c80fd4c5389e_cgraph.png" border="0" usemap="#class_file_system_a52e69a068c68c6c84f02c80fd4c5389e_cgraph" alt=""/></div>
<map name="class_file_system_a52e69a068c68c6c84f02c80fd4c5389e_cgraph" id="class_file_system_a52e69a068c68c6c84f02c80fd4c5389e_cgraph">
<area shape="rect" title="Delete a file (UNIX unlink)" alt="" coords="5,56,148,83"/>
<area shape="rect" href="filesys_8cpp.html#a6aea4042690035ff4b4b4531ccca4dc1" title=" " alt="" coords="196,56,259,83"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="725,5,793,32"/>
<area shape="rect" href="class_directory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title=" " alt="" coords="311,56,457,83"/>
<area shape="rect" href="class_file_system.html#a118ce47f3ef95d3e930572c20836d327" title="Get the root directory." alt="" coords="307,107,461,133"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="883,5,999,32"/>
<area shape="rect" href="class_open_file.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="509,56,635,83"/>
<area shape="rect" href="class_file_header.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="683,56,835,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_file_system_a52e69a068c68c6c84f02c80fd4c5389e_icgraph.png" border="0" usemap="#class_file_system_a52e69a068c68c6c84f02c80fd4c5389e_icgraph" alt=""/></div>
<map name="class_file_system_a52e69a068c68c6c84f02c80fd4c5389e_icgraph" id="class_file_system_a52e69a068c68c6c84f02c80fd4c5389e_icgraph">
<area shape="rect" title="Delete a file (UNIX unlink)" alt="" coords="104,5,247,32"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="ae5cbf7822080d1c9bb606b5d74dd4ee5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5cbf7822080d1c9bb606b5d74dd4ee5">&#9670;&nbsp;</a></span>Rmdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FileSystem::Rmdir </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dirname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a directory. </p>
<p>Delete a directory from the file system. This requires: check the name is valid check the directory is empty <br  />
 Remove it from its directory Delete the space for its header Delete the space for its data blocks Write changes to directory, bitmap back to disk</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">namedir</td><td>the text name of the directory to be removed (NOT MODIFIED) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NO_ERROR if the directory was deleted, else an error code (see <a class="el" href="msgerror_8hpp.html" title="Defines the data structure to store error messages during a syscall process.">msgerror.hpp</a>) </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_file_system_ae5cbf7822080d1c9bb606b5d74dd4ee5_cgraph.png" border="0" usemap="#class_file_system_ae5cbf7822080d1c9bb606b5d74dd4ee5_cgraph" alt=""/></div>
<map name="class_file_system_ae5cbf7822080d1c9bb606b5d74dd4ee5_cgraph" id="class_file_system_ae5cbf7822080d1c9bb606b5d74dd4ee5_cgraph">
<area shape="rect" title="Delete a directory." alt="" coords="5,5,136,32"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="713,31,781,57"/>
<area shape="rect" href="filesys_8cpp.html#a6aea4042690035ff4b4b4531ccca4dc1" title=" " alt="" coords="184,56,247,83"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="871,31,987,57"/>
<area shape="rect" href="class_directory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title=" " alt="" coords="299,81,445,108"/>
<area shape="rect" href="class_file_system.html#a118ce47f3ef95d3e930572c20836d327" title="Get the root directory." alt="" coords="295,132,449,159"/>
<area shape="rect" href="class_open_file.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="497,81,623,108"/>
<area shape="rect" href="class_file_header.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="671,81,823,108"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_file_system_ae5cbf7822080d1c9bb606b5d74dd4ee5_icgraph.png" border="0" usemap="#class_file_system_ae5cbf7822080d1c9bb606b5d74dd4ee5_icgraph" alt=""/></div>
<map name="class_file_system_ae5cbf7822080d1c9bb606b5d74dd4ee5_icgraph" id="class_file_system_ae5cbf7822080d1c9bb606b5d74dd4ee5_icgraph">
<area shape="rect" title="Delete a directory." alt="" coords="104,5,235,32"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>filesys/<a class="el" href="filesys_8hpp_source.html">filesys.hpp</a></li>
<li>filesys/<a class="el" href="filesys_8cpp.html">filesys.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_file_system.html">FileSystem</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
