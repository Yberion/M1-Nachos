<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: AddrSpace Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classAddrSpace.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classAddrSpace-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AddrSpace Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines the data structures to keep track of memory resources of executing user programs (address spaces).  
 <a href="classAddrSpace.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="addrspace_8hpp_source.html">addrspace.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for AddrSpace:</div>
<div class="dyncontent">
<div class="center"><img src="classAddrSpace__coll__graph.png" border="0" usemap="#AddrSpace_coll__map" alt="Collaboration graph"/></div>
<map name="AddrSpace_coll__map" id="AddrSpace_coll__map">
<area shape="rect" title="Defines the data structures to keep track of memory resources of executing user programs (address spa..." alt="" coords="273,1159,439,1353"/>
<area shape="rect" href="classProcess.html" title="Defines the data structures to keep track of the execution environment of a user program." alt="" coords="190,1519,295,1640"/>
<area shape="rect" href="classTranslationTable.html" title="Defines the data structures used for address translation." alt="" coords="392,769,541,993"/>
<area shape="rect" href="classPageTableEntry.html" title="Defines an entry in a simple translation table." alt="" coords="399,468,534,663"/>
<area shape="rect" href="classProcessStat.html" title="Defines statistics that concern a particular process." alt="" coords="5,1056,184,1456"/>
<area shape="rect" href="classOpenFile.html" title="Defines the data structure maintained when a file is opened." alt="" coords="227,424,352,707"/>
<area shape="rect" href="structs__mapped__file.html" title="Information describing a memory&#45;mapped file." alt="" coords="259,835,367,927"/>
<area shape="rect" href="classFileHeader.html" title="Defines a file header in the Nachos file system." alt="" coords="216,5,363,361"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acd3d2a68587b04ed5740e87895613821"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddrSpace.html#acd3d2a68587b04ed5740e87895613821">AddrSpace</a> (<a class="el" href="classOpenFile.html">OpenFile</a> *exec_file, <a class="el" href="classProcess.html">Process</a> *p, int *err)</td></tr>
<tr class="separator:acd3d2a68587b04ed5740e87895613821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add4a9431912394188b08c03346632737"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddrSpace.html#add4a9431912394188b08c03346632737">~AddrSpace</a> ()</td></tr>
<tr class="separator:add4a9431912394188b08c03346632737"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad9c7caf4271badbf81367093e75f61e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddrSpace.html#aad9c7caf4271badbf81367093e75f61e">StackAllocate</a> ()</td></tr>
<tr class="separator:aad9c7caf4271badbf81367093e75f61e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa63198854284a9da3f41b1757b314aa1"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddrSpace.html#aa63198854284a9da3f41b1757b314aa1">getCodeStartAddress</a> ()</td></tr>
<tr class="separator:aa63198854284a9da3f41b1757b314aa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e079c82bbefc86285cf9aab75648e5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddrSpace.html#ad5e079c82bbefc86285cf9aab75648e5">Mmap</a> (<a class="el" href="classOpenFile.html">OpenFile</a> *f, int size)</td></tr>
<tr class="separator:ad5e079c82bbefc86285cf9aab75648e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60a781e4938ad8ec1854842708a3a438"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOpenFile.html">OpenFile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddrSpace.html#a60a781e4938ad8ec1854842708a3a438">findMappedFile</a> (int32_t addr)</td></tr>
<tr class="separator:a60a781e4938ad8ec1854842708a3a438"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a0bd5650b339c21069abf1be627bbba61"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTranslationTable.html">TranslationTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddrSpace.html#a0bd5650b339c21069abf1be627bbba61">translationTable</a></td></tr>
<tr class="separator:a0bd5650b339c21069abf1be627bbba61"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a1df35fd70f75f7bdd13f94e711572355"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddrSpace.html#a1df35fd70f75f7bdd13f94e711572355">Alloc</a> (int numPages)</td></tr>
<tr class="separator:a1df35fd70f75f7bdd13f94e711572355"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a91c8def3af859e752bf4939b3a0ddc02"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddrSpace.html#a91c8def3af859e752bf4939b3a0ddc02">CodeStartAddress</a></td></tr>
<tr class="memdesc:a91c8def3af859e752bf4939b3a0ddc02"><td class="mdescLeft">&#160;</td><td class="mdescRight">(Heavyweight) process using this address space  <a href="classAddrSpace.html#a91c8def3af859e752bf4939b3a0ddc02">More...</a><br /></td></tr>
<tr class="separator:a91c8def3af859e752bf4939b3a0ddc02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17f8d1be01fea3a2f714c4ee9cb65816"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classProcess.html">Process</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddrSpace.html#a17f8d1be01fea3a2f714c4ee9cb65816">process</a></td></tr>
<tr class="memdesc:a17f8d1be01fea3a2f714c4ee9cb65816"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classList.html" title="Definition of a generic single-linked &quot;list&quot;.">List</a> of memory-mapped files.  <a href="classAddrSpace.html#a17f8d1be01fea3a2f714c4ee9cb65816">More...</a><br /></td></tr>
<tr class="separator:a17f8d1be01fea3a2f714c4ee9cb65816"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cc6be4f6bc1db60e6b3560c525c0461"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddrSpace.html#a8cc6be4f6bc1db60e6b3560c525c0461">nb_mapped_files</a></td></tr>
<tr class="separator:a8cc6be4f6bc1db60e6b3560c525c0461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eef6e4e265004d36d6ae5eefa4a0670"><td class="memItemLeft" align="right" valign="top"><a class="el" href="addrspace_8hpp.html#a728b85a45455e8b71d439f0ceb3fb5ec">t_mapped_files</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddrSpace.html#a9eef6e4e265004d36d6ae5eefa4a0670">mapped_files</a></td></tr>
<tr class="separator:a9eef6e4e265004d36d6ae5eefa4a0670"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac443a36498533e6df298a88082f9ff7f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddrSpace.html#ac443a36498533e6df298a88082f9ff7f">freePageId</a></td></tr>
<tr class="separator:ac443a36498533e6df298a88082f9ff7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines the data structures to keep track of memory resources of executing user programs (address spaces). </p>
<p>The constructor of this class takes as parameter an ELF executable file and loads it in the RAM of the (simulated) MIPS processor. This part will be modified in the virtual memory assignment to implement demand paging (on-demand loading of code/data). </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acd3d2a68587b04ed5740e87895613821"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd3d2a68587b04ed5740e87895613821">&#9670;&nbsp;</a></span>AddrSpace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AddrSpace::AddrSpace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOpenFile.html">OpenFile</a> *&#160;</td>
          <td class="paramname"><em>exec_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classProcess.html">Process</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create an address space to run a user program. Load the program from a file "exec_file", and set everything up so that we can start executing user instructions.</p>
<p>Executables are in ELF (Executable and Linkable Format) (see <a class="el" href="elf32_8hpp.html" title="Data structures pertaining to the ELF32 1.1 file format specification.">elf32.hpp</a>) and can be generated using a standard MIPS cross-compiler (here gcc).</p>
<p>For now, the code and data are entirely loaded into memory and the stacks are preallocated (NB: memory here stands for the memory of the simulated MIPS machine). Code/Data loading will be changed in the virtual memory assignment.</p>
<p>Don't look at this code right now. You may get lost. You will have plenty of time to do so in the virtual memory assignment</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exec_file</td><td>is the file containing the object code to load into memory, or NULL when the address space should be empty </td></tr>
    <tr><td class="paramname">process</td><td>process to be executed </td></tr>
    <tr><td class="paramname">err</td><td>error code 0 if OK, -1 otherwise </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classAddrSpace_acd3d2a68587b04ed5740e87895613821_cgraph.png" border="0" usemap="#classAddrSpace_acd3d2a68587b04ed5740e87895613821_cgraph" alt=""/></div>
<map name="classAddrSpace_acd3d2a68587b04ed5740e87895613821_cgraph" id="classAddrSpace_acd3d2a68587b04ed5740e87895613821_cgraph">
<area shape="rect" title=" " alt="" coords="5,687,164,714"/>
<area shape="rect" href="classAddrSpace.html#a1df35fd70f75f7bdd13f94e711572355" title=" " alt="" coords="262,71,385,98"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="1211,426,1279,453"/>
<area shape="rect" href="addrspace_8cpp.html#ae3d9f3a345138e4240d1a7a488431c6e" title=" " alt="" coords="261,527,385,554"/>
<area shape="rect" href="classTranslationTable.html#ad91a9115c2cc30cc1986d7cfc71ae569" title=" " alt="" coords="234,578,413,605"/>
<area shape="rect" href="classTranslationTable.html#aa18f7433cf2f65c45b896e0207b28b89" title=" " alt="" coords="223,629,423,655"/>
<area shape="rect" href="classTranslationTable.html#a6e531b563d32a00aa352721d43056a2d" title=" " alt="" coords="239,680,407,721"/>
<area shape="rect" href="classPhysicalMemManager.html#af06e533da57302ee434aee7a6e3b93a3" title="Print the contents of a page." alt="" coords="701,992,852,1033"/>
<area shape="rect" href="classOpenFile.html#a99da585bad8c8e1916ca3eeaf78539b7" title="return the file&#39;s name" alt="" coords="255,746,392,773"/>
<area shape="rect" href="classTranslationTable.html#a4f29cbac75ad518a17d8f70e873dffef" title=" " alt="" coords="212,797,435,823"/>
<area shape="rect" href="classInterrupt.html#a0bf066222bb39da494919f08098217a5" title="The ready queue is empty, roll simulated time forward until the next interrupt." alt="" coords="273,477,373,503"/>
<area shape="rect" href="classOpenFile.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="261,223,386,250"/>
<area shape="rect" href="classTranslationTable.html#a4bd0f480f9891e55ea894d1b0c9f0ab3" title=" " alt="" coords="226,847,421,874"/>
<area shape="rect" href="classTranslationTable.html#a8c58e5f9294f8ee3bd7906c045bf0225" title=" " alt="" coords="244,899,403,940"/>
<area shape="rect" href="classTranslationTable.html#a8f131c3568f859a49270683c1c4327fc" title=" " alt="" coords="244,964,403,1005"/>
<area shape="rect" href="classTranslationTable.html#ad7c54008d147b143686f9c57aa74ad73" title=" " alt="" coords="244,1029,403,1071"/>
<area shape="rect" href="classTranslationTable.html#a71b2267bab5ba93d95c26af519a873c2" title=" " alt="" coords="212,1095,435,1122"/>
<area shape="rect" href="addrspace_8cpp.html#a88610204956a7adab5918fcc249c6a6b" title=" " alt="" coords="242,1146,405,1173"/>
<area shape="rect" href="classTranslationTable.html#a55c89008e61112f61a5d2cec29e678dc" title=" " alt="" coords="485,5,651,47"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="1399,502,1515,529"/>
<area shape="rect" href="addrspace_8cpp.html#a5c2c8897bfe3727c069e2548941153fa" title=" " alt="" coords="509,578,627,605"/>
<area shape="rect" href="classThread.html#ade294fd013100034bebd745d8ffb1f94" title="Returns the process owner." alt="" coords="920,949,1095,975"/>
<area shape="rect" href="classProcessStat.html#acbaa82f6a60394aca2db1e7e179a2a71" title=" " alt="" coords="900,999,1115,1026"/>
<area shape="rect" href="classList.html#ad07725e21c5868fadf1f4a5a81c1fd3a" title=" " alt="" coords="958,1101,1057,1127"/>
<area shape="rect" href="classList.html#a297a131df05eba81e89f5f7d0039cb30" title=" " alt="" coords="959,1050,1056,1077"/>
<area shape="rect" href="classStatistics.html#a8994065e3484986acd4db5eb2cb8e993" title="prints collected statistics, including process statistics" alt="" coords="1163,999,1328,1026"/>
<area shape="rect" href="system_8cpp.html#ae89a123aad1c66a76c398b7af216aae4" title="Nachos is done." alt="" coords="533,477,603,503"/>
<area shape="rect" href="sysdep_8cpp.html#a8b9ef9330856c5a5a02f2d3ef0497e04" title="Quit without dropping core." alt="" coords="545,527,591,554"/>
<area shape="rect" href="classStatistics.html#ade67669fb1436e69a215a780b1ade63e" title=" " alt="" coords="721,1151,833,1178"/>
<area shape="rect" href="classList.html#a3d4805c0e563fd485273fc90a4b69e94" title=" " alt="" coords="960,1151,1055,1178"/>
<area shape="rect" href="classProcessStat.html#a8c64c1951933e8f75b20a913226bf437" title=" " alt="" coords="943,1202,1072,1229"/>
<area shape="rect" href="classList.html#a87dc423c0664829bad9f39e79ccb1165" title=" " alt="" coords="940,1253,1075,1279"/>
<area shape="rect" href="classFileHeader.html#adacbe1c1af441d0b1e978c65a05d60f2" title="Convert a byte offset into the file to the disk sector containing the byte." alt="" coords="483,173,653,199"/>
<area shape="rect" href="classFileHeader.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="492,223,644,250"/>
<area shape="rect" href="classDriverDisk.html#a2e93ba9a36bba4e8b3eeb43f877b2395" title="Read a disk sector, returning only once the data is actually read." alt="" coords="490,274,646,301"/>
<area shape="rect" href="classLock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="725,173,828,199"/>
<area shape="rect" href="classSemaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="724,223,829,250"/>
<area shape="rect" href="classDisk.html#a8b51a82d4f2fd009335d0c591ae11042" title=" " alt="" coords="709,658,844,685"/>
<area shape="rect" href="classLock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="724,274,829,301"/>
<area shape="rect" href="classDisk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="930,847,1085,874"/>
<area shape="rect" href="disk_8cpp.html#a03b355bcf0d41c1fdeb1c69fb067fc1a" title="dummy procedure because we can&#39;t take a pointer of a member function" alt="" coords="968,629,1047,655"/>
<area shape="rect" href="classProcessStat.html#a8114ba343d15b3a29be80eff5a094f79" title=" " alt="" coords="919,680,1095,721"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="979,746,1036,773"/>
<area shape="rect" href="disk_8cpp.html#a3f97a10c00c77d969f5ec6423403b6cc" title="Dump the data in a disk read/write request, for debugging only." alt="" coords="964,797,1051,823"/>
<area shape="rect" href="sysdep_8cpp.html#a6140dcc97ab52a9406e6d3f5749fa43c" title="Read characters from an open file. Abort if read fails." alt="" coords="981,426,1033,453"/>
<area shape="rect" href="classInterrupt.html#ac403a14a9e41fa2b6dbd5c6056b87389" title="Print interrupt state." alt="" coords="942,527,1073,554"/>
<area shape="rect" href="classDisk.html#aa87426eeedc8cf390fa4b293ecd34b42" title=" " alt="" coords="946,898,1069,925"/>
<area shape="rect" href="classStatistics.html#a77aec82b7adb8d795c850db96c82f5d8" title=" " alt="" coords="1376,847,1539,874"/>
<area shape="rect" href="classDisk.html#abf14ace693df2b08e1187045305e81a5" title="time to get to the new track" alt="" coords="1187,771,1303,798"/>
<area shape="rect" href="classDisk.html#abecdf19e160925b1bc9b4542c90de2ac" title=" " alt="" coords="1181,873,1309,899"/>
</map>
</div>

</div>
</div>
<a id="add4a9431912394188b08c03346632737"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add4a9431912394188b08c03346632737">&#9670;&nbsp;</a></span>~AddrSpace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AddrSpace::~AddrSpace </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deallocates an address space and in particular frees all memory it uses (RAM and swap area). </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classAddrSpace_add4a9431912394188b08c03346632737_cgraph.png" border="0" usemap="#classAddrSpace_add4a9431912394188b08c03346632737_cgraph" alt=""/></div>
<map name="classAddrSpace_add4a9431912394188b08c03346632737_cgraph" id="classAddrSpace_add4a9431912394188b08c03346632737_cgraph">
<area shape="rect" title=" " alt="" coords="5,144,172,171"/>
<area shape="rect" href="classTranslationTable.html#a2fcfe9b5d9c81991b664970d3a052ed5" title=" " alt="" coords="236,5,431,32"/>
<area shape="rect" href="classTranslationTable.html#a2f89216744cb7e446d7f17d517e8fefa" title=" " alt="" coords="238,56,429,83"/>
<area shape="rect" href="classTranslationTable.html#a1314ab5a89657842d5fcb56b3ed8730f" title=" " alt="" coords="254,107,413,149"/>
<area shape="rect" href="classTranslationTable.html#a4f29cbac75ad518a17d8f70e873dffef" title=" " alt="" coords="222,173,445,200"/>
<area shape="rect" href="classSwapManager.html#a8b6cfc56bc9db70e379f9ec3826df6d7" title=" " alt="" coords="223,224,444,251"/>
<area shape="rect" href="classPhysicalMemManager.html#a7eee399c2c1a0866cd575dc6c6b96687" title="Finds a new page and adds a new page mapping." alt="" coords="220,301,447,342"/>
<area shape="rect" href="classBitMap.html#aee4445b4d2079c96f5c87896717569d2" title="Set the &quot;nth&quot; bit." alt="" coords="528,148,629,175"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="545,199,613,225"/>
<area shape="rect" href="classThread.html#a83fedc586ce3718a4a2322f497dcfe2d" title="Returns the thread name." alt="" coords="517,249,641,276"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="711,199,827,225"/>
<area shape="rect" href="classTranslationTable.html#aeda0828ed57fa6e50aedc6343d1bb169" title=" " alt="" coords="495,301,663,342"/>
<area shape="rect" href="classList.html#a8cf5a283a4782ac19fcf00e6ac6a594f" title=" " alt="" coords="529,367,628,393"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1df35fd70f75f7bdd13f94e711572355"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1df35fd70f75f7bdd13f94e711572355">&#9670;&nbsp;</a></span>Alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int AddrSpace::Alloc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numPages</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Allocate numPages virtual pages in the current address space</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numPages</td><td>the number of contiguous virtual pages to allocate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the virtual page number of the beginning of the allocated area, or -1 when not enough virtual space is available </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classAddrSpace_a1df35fd70f75f7bdd13f94e711572355_cgraph.png" border="0" usemap="#classAddrSpace_a1df35fd70f75f7bdd13f94e711572355_cgraph" alt=""/></div>
<map name="classAddrSpace_a1df35fd70f75f7bdd13f94e711572355_cgraph" id="classAddrSpace_a1df35fd70f75f7bdd13f94e711572355_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,128,61"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="225,5,293,32"/>
<area shape="rect" href="classTranslationTable.html#a55c89008e61112f61a5d2cec29e678dc" title=" " alt="" coords="176,57,343,98"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="391,5,507,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classAddrSpace_a1df35fd70f75f7bdd13f94e711572355_icgraph.png" border="0" usemap="#classAddrSpace_a1df35fd70f75f7bdd13f94e711572355_icgraph" alt=""/></div>
<map name="classAddrSpace_a1df35fd70f75f7bdd13f94e711572355_icgraph" id="classAddrSpace_a1df35fd70f75f7bdd13f94e711572355_icgraph">
<area shape="rect" title=" " alt="" coords="228,31,351,57"/>
<area shape="rect" href="classAddrSpace.html#acd3d2a68587b04ed5740e87895613821" title=" " alt="" coords="13,5,172,32"/>
<area shape="rect" href="classAddrSpace.html#aad9c7caf4271badbf81367093e75f61e" title=" " alt="" coords="5,56,180,83"/>
</map>
</div>

</div>
</div>
<a id="a60a781e4938ad8ec1854842708a3a438"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60a781e4938ad8ec1854842708a3a438">&#9670;&nbsp;</a></span>findMappedFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOpenFile.html">OpenFile</a> * AddrSpace::findMappedFile </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Search if the address is in a memory-mapped file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>virtual address to be searched for </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>address of file descriptor if found, NULL otherwise </dd></dl>

</div>
</div>
<a id="aa63198854284a9da3f41b1757b314aa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa63198854284a9da3f41b1757b314aa1">&#9670;&nbsp;</a></span>getCodeStartAddress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t AddrSpace::getCodeStartAddress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the address of the first instruction to execute in the process found in the ELF file </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classAddrSpace_aa63198854284a9da3f41b1757b314aa1_icgraph.png" border="0" usemap="#classAddrSpace_aa63198854284a9da3f41b1757b314aa1_icgraph" alt=""/></div>
<map name="classAddrSpace_aa63198854284a9da3f41b1757b314aa1_icgraph" id="classAddrSpace_aa63198854284a9da3f41b1757b314aa1_icgraph">
<area shape="rect" title=" " alt="" coords="1519,201,1737,228"/>
<area shape="rect" href="machine_8hpp.html#af31c84fcf9811fc72614abc2be3b5a44" title="Entry point into Nachos to handle user system calls and exceptions." alt="" coords="1347,176,1471,203"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="1383,227,1434,253"/>
<area shape="rect" href="classMachine.html#a0d6f63790c0568437b100171f61fd77f" title="Do a pending delayed load (modifying a reg)" alt="" coords="1128,75,1299,101"/>
<area shape="rect" href="classMachine.html#ad70a015685c6e4bf705e4939551774aa" title=" " alt="" coords="585,24,748,51"/>
<area shape="rect" href="classMMU.html#a28a50bd03688bc05aa15f93e4abf61a7" title=" " alt="" coords="797,151,917,177"/>
<area shape="rect" href="classMMU.html#aa2ddea5dcd1648aba21ac1a75c79dc25" title=" " alt="" coords="965,75,1080,101"/>
<area shape="rect" href="classMMU.html#a60227cf48e6778a4c66d8a13fd2f1539" title=" " alt="" coords="796,24,917,51"/>
<area shape="rect" href="classMachine.html#a83444e06eb7a7c163a1b9c87a7062d43" title="Destructor. De&#45;allocate the data structures." alt="" coords="435,24,537,51"/>
<area shape="rect" href="thread_8cpp.html#a014c1a99794f74ed079b0dde1f7efe8d" title=" " alt="" coords="240,24,387,51"/>
<area shape="rect" href="classThread.html#ad6d5edb1a6d2a9effbb442883fc5b866" title="Sets&#45;up the thread simulator context : fills it with the appropriate." alt="" coords="5,24,192,51"/>
<area shape="rect" href="exception_8cpp.html#a2f3d05f12e27c15623b3d6a0e3813677" title=" " alt="" coords="607,189,727,216"/>
<area shape="rect" href="exception_8cpp.html#a467d8e83c5db03566d20ee929c7d7c1f" title=" " alt="" coords="609,240,724,267"/>
</map>
</div>

</div>
</div>
<a id="ad5e079c82bbefc86285cf9aab75648e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5e079c82bbefc86285cf9aab75648e5">&#9670;&nbsp;</a></span>Mmap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AddrSpace::Mmap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOpenFile.html">OpenFile</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Map an open file in memory</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>pointer to open file descriptor </td></tr>
    <tr><td class="paramname">size</td><td>size to be mapped (rounded up to next page boundary)</td></tr>
  </table>
  </dd>
</dl>
<p>Map an open file in memory</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>pointer to open file descriptor </td></tr>
    <tr><td class="paramname">size</td><td>size to be mapped in bytes (rounded up to next page boundary) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the virtual address at which the file is mapped </dd></dl>

</div>
</div>
<a id="aad9c7caf4271badbf81367093e75f61e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad9c7caf4271badbf81367093e75f61e">&#9670;&nbsp;</a></span>StackAllocate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AddrSpace::StackAllocate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates a new stack of size cfg-&gt;UserStackSize </p><pre class="fragment">Allocation is done by calling Alloc, a very simple
allocation procedure of virtual memory areas.

\return stack pointer (at the end of the allocated stack)
</pre><p>Allocates a new stack of size g_cfg-&gt;UserStackSize </p><pre class="fragment">Allocation is done by calling Alloc, a very simple
allocation procedure of virtual memory areas.

\return stack pointer (at the end of the allocated stack)
</pre> <div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classAddrSpace_aad9c7caf4271badbf81367093e75f61e_cgraph.png" border="0" usemap="#classAddrSpace_aad9c7caf4271badbf81367093e75f61e_cgraph" alt=""/></div>
<map name="classAddrSpace_aad9c7caf4271badbf81367093e75f61e_cgraph" id="classAddrSpace_aad9c7caf4271badbf81367093e75f61e_cgraph">
<area shape="rect" title=" " alt="" coords="5,311,180,338"/>
<area shape="rect" href="classAddrSpace.html#a1df35fd70f75f7bdd13f94e711572355" title=" " alt="" coords="278,67,401,94"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="572,17,640,43"/>
<area shape="rect" href="classTranslationTable.html#ad91a9115c2cc30cc1986d7cfc71ae569" title=" " alt="" coords="250,118,429,145"/>
<area shape="rect" href="classTranslationTable.html#aa18f7433cf2f65c45b896e0207b28b89" title=" " alt="" coords="239,169,439,195"/>
<area shape="rect" href="classPhysicalMemManager.html#af06e533da57302ee434aee7a6e3b93a3" title="Print the contents of a page." alt="" coords="264,220,415,261"/>
<area shape="rect" href="classTranslationTable.html#a4f29cbac75ad518a17d8f70e873dffef" title=" " alt="" coords="228,286,451,313"/>
<area shape="rect" href="classInterrupt.html#a0bf066222bb39da494919f08098217a5" title="The ready queue is empty, roll simulated time forward until the next interrupt." alt="" coords="289,337,389,363"/>
<area shape="rect" href="classTranslationTable.html#a4bd0f480f9891e55ea894d1b0c9f0ab3" title=" " alt="" coords="242,387,437,414"/>
<area shape="rect" href="classTranslationTable.html#a8c58e5f9294f8ee3bd7906c045bf0225" title=" " alt="" coords="260,439,419,480"/>
<area shape="rect" href="classTranslationTable.html#a8f131c3568f859a49270683c1c4327fc" title=" " alt="" coords="260,504,419,545"/>
<area shape="rect" href="classTranslationTable.html#ad7c54008d147b143686f9c57aa74ad73" title=" " alt="" coords="260,569,419,611"/>
<area shape="rect" href="classTranslationTable.html#a71b2267bab5ba93d95c26af519a873c2" title=" " alt="" coords="228,635,451,662"/>
<area shape="rect" href="classTranslationTable.html#a55c89008e61112f61a5d2cec29e678dc" title=" " alt="" coords="523,68,689,109"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="786,17,902,43"/>
<area shape="rect" href="classThread.html#ade294fd013100034bebd745d8ffb1f94" title="Returns the process owner." alt="" coords="519,134,693,161"/>
<area shape="rect" href="classProcessStat.html#acbaa82f6a60394aca2db1e7e179a2a71" title=" " alt="" coords="499,185,713,211"/>
<area shape="rect" href="classList.html#ad07725e21c5868fadf1f4a5a81c1fd3a" title=" " alt="" coords="993,235,1091,262"/>
<area shape="rect" href="classList.html#a297a131df05eba81e89f5f7d0039cb30" title=" " alt="" coords="557,286,655,313"/>
<area shape="rect" href="classStatistics.html#a8994065e3484986acd4db5eb2cb8e993" title="prints collected statistics, including process statistics" alt="" coords="761,185,927,211"/>
<area shape="rect" href="system_8cpp.html#ae89a123aad1c66a76c398b7af216aae4" title="Nachos is done." alt="" coords="571,337,641,363"/>
<area shape="rect" href="sysdep_8cpp.html#a8b9ef9330856c5a5a02f2d3ef0497e04" title="Quit without dropping core." alt="" coords="583,387,629,414"/>
<area shape="rect" href="classStatistics.html#ade67669fb1436e69a215a780b1ade63e" title=" " alt="" coords="788,337,900,363"/>
<area shape="rect" href="classList.html#a3d4805c0e563fd485273fc90a4b69e94" title=" " alt="" coords="995,286,1089,313"/>
<area shape="rect" href="classProcessStat.html#a8c64c1951933e8f75b20a913226bf437" title=" " alt="" coords="977,337,1107,363"/>
<area shape="rect" href="classList.html#a87dc423c0664829bad9f39e79ccb1165" title=" " alt="" coords="975,387,1109,414"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a91c8def3af859e752bf4939b3a0ddc02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91c8def3af859e752bf4939b3a0ddc02">&#9670;&nbsp;</a></span>CodeStartAddress</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t AddrSpace::CodeStartAddress</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>(Heavyweight) process using this address space </p>

</div>
</div>
<a id="ac443a36498533e6df298a88082f9ff7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac443a36498533e6df298a88082f9ff7f">&#9670;&nbsp;</a></span>freePageId</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int AddrSpace::freePageId</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9eef6e4e265004d36d6ae5eefa4a0670"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eef6e4e265004d36d6ae5eefa4a0670">&#9670;&nbsp;</a></span>mapped_files</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="addrspace_8hpp.html#a728b85a45455e8b71d439f0ceb3fb5ec">t_mapped_files</a> AddrSpace::mapped_files</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of the next virtual page to be allocated. Virtual addresses allocated in a very simple manner : an allocation will simply increment this address by the size of the allocated object (there are no complex malloc/free functions implemented yet) </p>

</div>
</div>
<a id="a8cc6be4f6bc1db60e6b3560c525c0461"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cc6be4f6bc1db60e6b3560c525c0461">&#9670;&nbsp;</a></span>nb_mapped_files</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int AddrSpace::nb_mapped_files</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a17f8d1be01fea3a2f714c4ee9cb65816"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17f8d1be01fea3a2f714c4ee9cb65816">&#9670;&nbsp;</a></span>process</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classProcess.html">Process</a>* AddrSpace::process</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classList.html" title="Definition of a generic single-linked &quot;list&quot;.">List</a> of memory-mapped files. </p>

</div>
</div>
<a id="a0bd5650b339c21069abf1be627bbba61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bd5650b339c21069abf1be627bbba61">&#9670;&nbsp;</a></span>translationTable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTranslationTable.html">TranslationTable</a>* AddrSpace::translationTable</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Translation table. This table will be discovered in the virtual memory assignement, and is used to know where virtual pages are allocated in RAM. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>kernel/<a class="el" href="addrspace_8hpp_source.html">addrspace.hpp</a></li>
<li>kernel/<a class="el" href="addrspace_8cpp.html">addrspace.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classAddrSpace.html">AddrSpace</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
