<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: Lock Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classLock.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classLock-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Lock Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines the "lock" synchronization tool.  
 <a href="classLock.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="synch_8hpp_source.html">synch.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for Lock:</div>
<div class="dyncontent">
<div class="center"><img src="classLock__coll__graph.png" border="0" usemap="#Lock_coll__map" alt="Collaboration graph"/></div>
<map name="Lock_coll__map" id="Lock_coll__map">
<area shape="rect" title="Defines the &quot;lock&quot; synchronization tool." alt="" coords="251,1489,425,1669"/>
<area shape="rect" href="classThread.html" title="Data structures for managing threads" alt="" coords="135,1173,293,1427"/>
<area shape="rect" href="structsimulatorContextT.html" title="Defines the context of the Nachos simulator." alt="" coords="5,945,132,1052"/>
<area shape="rect" href="classProcess.html" title="Defines the data structures to keep track of the execution environment of a user program." alt="" coords="377,938,483,1059"/>
<area shape="rect" href="classAddrSpace.html" title="Defines the data structures to keep track of memory resources of executing user programs (address spa..." alt="" coords="501,1203,668,1397"/>
<area shape="rect" href="classProcessStat.html" title="Defines statistics that concern a particular process." alt="" coords="334,424,513,824"/>
<area shape="rect" href="classOpenFile.html" title="Defines the data structure maintained when a file is opened." alt="" coords="537,483,662,765"/>
<area shape="rect" href="structs__mapped__file.html" title="Information describing a memory&#45;mapped file." alt="" coords="545,953,653,1045"/>
<area shape="rect" href="classFileHeader.html" title="Defines a file header in the Nachos file system." alt="" coords="526,5,673,361"/>
<area shape="rect" href="classTranslationTable.html" title="Defines the data structures used for address translation." alt="" coords="679,887,829,1111"/>
<area shape="rect" href="classPageTableEntry.html" title="Defines an entry in a simple translation table." alt="" coords="687,527,821,721"/>
<area shape="rect" href="structthreadContextT.html" title="Defines the thread context (MIPS virtual machine)" alt="" coords="157,945,271,1052"/>
<area shape="rect" href="classList.html" title="Definition of a generic single&#45;linked &quot;list&quot;." alt="" coords="317,1173,444,1427"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a144d62163a7475b9909892d4d9aa9199"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLock.html#a144d62163a7475b9909892d4d9aa9199">Lock</a> (char *debugName)</td></tr>
<tr class="memdesc:a144d62163a7475b9909892d4d9aa9199"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classLock.html" title="Defines the &quot;lock&quot; synchronization tool.">Lock</a> creation.  <a href="classLock.html#a144d62163a7475b9909892d4d9aa9199">More...</a><br /></td></tr>
<tr class="separator:a144d62163a7475b9909892d4d9aa9199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ab6d9485c8665bb3643710432882971"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLock.html#a7ab6d9485c8665bb3643710432882971">~Lock</a> ()</td></tr>
<tr class="memdesc:a7ab6d9485c8665bb3643710432882971"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a lock.  <a href="classLock.html#a7ab6d9485c8665bb3643710432882971">More...</a><br /></td></tr>
<tr class="separator:a7ab6d9485c8665bb3643710432882971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99cfb639fe3cf24033eebdcc19be42f3"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLock.html#a99cfb639fe3cf24033eebdcc19be42f3">getName</a> ()</td></tr>
<tr class="memdesc:a99cfb639fe3cf24033eebdcc19be42f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">For debugging.  <a href="classLock.html#a99cfb639fe3cf24033eebdcc19be42f3">More...</a><br /></td></tr>
<tr class="separator:a99cfb639fe3cf24033eebdcc19be42f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c4699fd1ab73f3927b10edc01c54db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLock.html#ad4c4699fd1ab73f3927b10edc01c54db">Acquire</a> ()</td></tr>
<tr class="memdesc:ad4c4699fd1ab73f3927b10edc01c54db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire a lock (atomic operation)  <a href="classLock.html#ad4c4699fd1ab73f3927b10edc01c54db">More...</a><br /></td></tr>
<tr class="separator:ad4c4699fd1ab73f3927b10edc01c54db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ca005b84272e56c2bf447056ee9217c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLock.html#a5ca005b84272e56c2bf447056ee9217c">Release</a> ()</td></tr>
<tr class="memdesc:a5ca005b84272e56c2bf447056ee9217c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release a lock (atomic operation)  <a href="classLock.html#a5ca005b84272e56c2bf447056ee9217c">More...</a><br /></td></tr>
<tr class="separator:a5ca005b84272e56c2bf447056ee9217c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35b68baf5f5a3165a4e6fe50845a46a2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLock.html#a35b68baf5f5a3165a4e6fe50845a46a2">isHeldByCurrentThread</a> ()</td></tr>
<tr class="separator:a35b68baf5f5a3165a4e6fe50845a46a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a5327a137986efc6e5fb065d54a112e6b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="system_8hpp.html#a842c5e2e69277690b064bf363c017980">ObjectType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLock.html#a5327a137986efc6e5fb065d54a112e6b">type</a></td></tr>
<tr class="memdesc:a5327a137986efc6e5fb065d54a112e6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Object type, for validity checks during system calls (must be the first public field)  <a href="classLock.html#a5327a137986efc6e5fb065d54a112e6b">More...</a><br /></td></tr>
<tr class="separator:a5327a137986efc6e5fb065d54a112e6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aac2ad412d7f5f3ee27496a152eb7f4c6"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLock.html#aac2ad412d7f5f3ee27496a152eb7f4c6">name</a></td></tr>
<tr class="memdesc:aac2ad412d7f5f3ee27496a152eb7f4c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">for debugging  <a href="classLock.html#aac2ad412d7f5f3ee27496a152eb7f4c6">More...</a><br /></td></tr>
<tr class="separator:aac2ad412d7f5f3ee27496a152eb7f4c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8840c0462a64e95b23f7d983d4bcf289"><td class="memItemLeft" align="right" valign="top"><a class="el" href="list_8hpp.html#aa84599d07605fa9c90fc73ac57c58635">Listint</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLock.html#a8840c0462a64e95b23f7d983d4bcf289">sleepqueue</a></td></tr>
<tr class="memdesc:a8840c0462a64e95b23f7d983d4bcf289"><td class="mdescLeft">&#160;</td><td class="mdescRight">threads waiting to acquire the lock  <a href="classLock.html#a8840c0462a64e95b23f7d983d4bcf289">More...</a><br /></td></tr>
<tr class="separator:a8840c0462a64e95b23f7d983d4bcf289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a77227a99cb533c0944054916f4a021"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLock.html#a3a77227a99cb533c0944054916f4a021">free</a></td></tr>
<tr class="memdesc:a3a77227a99cb533c0944054916f4a021"><td class="mdescLeft">&#160;</td><td class="mdescRight">to know if the lock is free  <a href="classLock.html#a3a77227a99cb533c0944054916f4a021">More...</a><br /></td></tr>
<tr class="separator:a3a77227a99cb533c0944054916f4a021"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c4a7da8e7d3974b7d84b310e7b2ef63"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classThread.html">Thread</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLock.html#a4c4a7da8e7d3974b7d84b310e7b2ef63">owner</a></td></tr>
<tr class="memdesc:a4c4a7da8e7d3974b7d84b310e7b2ef63"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classThread.html" title="Data structures for managing threads">Thread</a> who has acquired the lock.  <a href="classLock.html#a4c4a7da8e7d3974b7d84b310e7b2ef63">More...</a><br /></td></tr>
<tr class="separator:a4c4a7da8e7d3974b7d84b310e7b2ef63"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines the "lock" synchronization tool. </p>
<p>A lock can be BUSY or FREE. There are only two operations allowed on a lock:</p>
<p>Acquire &ndash; wait until the lock is FREE, then set it to BUSY</p>
<p>Release &ndash; wake up a thread waiting in Acquire if necessary, or else set the lock to FREE</p>
<p>In addition, by convention, only the thread that acquired the lock may release it. As with semaphores, you can't read the lock value (because the value might change immediately after you read it). </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a144d62163a7475b9909892d4d9aa9199"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a144d62163a7475b9909892d4d9aa9199">&#9670;&nbsp;</a></span>Lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Lock::Lock </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>debugName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classLock.html" title="Defines the &quot;lock&quot; synchronization tool.">Lock</a> creation. </p>
<p>Initialize a <a class="el" href="classLock.html" title="Defines the &quot;lock&quot; synchronization tool.">Lock</a>, so that it can be used for synchronization. The lock is initialy free </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">debugName</td><td>is an arbitrary name, useful for debugging. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7ab6d9485c8665bb3643710432882971"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ab6d9485c8665bb3643710432882971">&#9670;&nbsp;</a></span>~Lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Lock::~Lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a lock. </p>
<p>De-allocate lock, when no longer needed. Assumes that no thread is waiting on the lock. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classLock_a7ab6d9485c8665bb3643710432882971_cgraph.png" border="0" usemap="#classLock_a7ab6d9485c8665bb3643710432882971_cgraph" alt=""/></div>
<map name="classLock_a7ab6d9485c8665bb3643710432882971_cgraph" id="classLock_a7ab6d9485c8665bb3643710432882971_cgraph">
<area shape="rect" title="Delete a lock." alt="" coords="5,5,100,32"/>
<area shape="rect" href="classList.html#ad07725e21c5868fadf1f4a5a81c1fd3a" title=" " alt="" coords="148,5,247,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad4c4699fd1ab73f3927b10edc01c54db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4c4699fd1ab73f3927b10edc01c54db">&#9670;&nbsp;</a></span>Acquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Lock::Acquire </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acquire a lock (atomic operation) </p>
<p>Wait until the lock become free. Checking the state of the lock (free or busy) and modify it must be done atomically, so we need to disable interrupts before checking the value of free.</p>
<p>Note that <a class="el" href="classThread.html#a187a4c1e62087511b69068220840244a" title="Put the thread to sleep and relinquish the processor.">Thread::Sleep</a> assumes that interrupts are disabled when it is called. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classLock_ad4c4699fd1ab73f3927b10edc01c54db_icgraph.png" border="0" usemap="#classLock_ad4c4699fd1ab73f3927b10edc01c54db_icgraph" alt=""/></div>
<map name="classLock_ad4c4699fd1ab73f3927b10edc01c54db_icgraph" id="classLock_ad4c4699fd1ab73f3927b10edc01c54db_icgraph">
<area shape="rect" title="Acquire a lock (atomic operation)" alt="" coords="2803,1524,2905,1551"/>
<area shape="rect" href="classFileSystem.html#ac789d58815881d7f193d86085b0f54aa" title="Create a file (UNIX creat)" alt="" coords="1525,1203,1659,1229"/>
<area shape="rect" href="classOpenFileTable.html#ad42a3aba7c0ffc5d08c4a6be61a22fc1" title=" " alt="" coords="2591,1651,2754,1677"/>
<area shape="rect" href="classDriverConsole.html#a6e9663f1c449c24edfb77264375b03fc" title="Read characters from the console." alt="" coords="2591,1600,2755,1627"/>
<area shape="rect" href="classDriverConsole.html#a7cd25307953296dea6a255c0877155cb" title="Write a buffer on the console." alt="" coords="1511,1304,1673,1331"/>
<area shape="rect" href="classDriverDisk.html#a2e93ba9a36bba4e8b3eeb43f877b2395" title="Read a disk sector, returning only once the data is actually read." alt="" coords="2595,537,2751,564"/>
<area shape="rect" href="classDriverDisk.html#a74426214379e50aa0d8a7b19084887ee" title="write a disk sector, returning only once the data is actually written." alt="" coords="2367,1315,2524,1341"/>
<area shape="rect" href="main_8cpp.html#a8e00c17571a60a78f108e1b56b300e1f" title=" " alt="" coords="1347,967,1399,993"/>
<area shape="rect" href="machine_8hpp.html#af31c84fcf9811fc72614abc2be3b5a44" title="Entry point into Nachos to handle user system calls and exceptions." alt="" coords="1112,1017,1236,1044"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="1149,663,1199,689"/>
<area shape="rect" href="classMachine.html#a0d6f63790c0568437b100171f61fd77f" title="Do a pending delayed load (modifying a reg)" alt="" coords="893,916,1064,943"/>
<area shape="rect" href="classMachine.html#ad70a015685c6e4bf705e4939551774aa" title=" " alt="" coords="351,865,513,892"/>
<area shape="rect" href="classMMU.html#a28a50bd03688bc05aa15f93e4abf61a7" title=" " alt="" coords="562,992,682,1019"/>
<area shape="rect" href="classMMU.html#aa2ddea5dcd1648aba21ac1a75c79dc25" title=" " alt="" coords="731,916,845,943"/>
<area shape="rect" href="classMMU.html#a60227cf48e6778a4c66d8a13fd2f1539" title=" " alt="" coords="561,815,683,841"/>
<area shape="rect" href="classMachine.html#a83444e06eb7a7c163a1b9c87a7062d43" title="Destructor. De&#45;allocate the data structures." alt="" coords="200,865,303,892"/>
<area shape="rect" href="thread_8cpp.html#a014c1a99794f74ed079b0dde1f7efe8d" title=" " alt="" coords="5,865,152,892"/>
<area shape="rect" href="exception_8cpp.html#a2f3d05f12e27c15623b3d6a0e3813677" title=" " alt="" coords="372,1031,492,1057"/>
<area shape="rect" href="exception_8cpp.html#a467d8e83c5db03566d20ee929c7d7c1f" title=" " alt="" coords="375,1081,489,1108"/>
<area shape="rect" href="classSyscallError.html#a6b4121cb56f7f1a22890ba109ab2ef57" title=" " alt="" coords="1284,1299,1463,1325"/>
<area shape="rect" href="classFileHeader.html#aa85564cee98fc9592df08cc5e4a2efc6" title="Initialize file header from disk." alt="" coords="2125,132,2280,159"/>
<area shape="rect" href="classSwapManager.html#a0934e61240a5ace841499321bf0889af" title=" " alt="" coords="2348,537,2543,564"/>
<area shape="rect" href="classFileHeader.html#a57b661cda2c4d51ee06cc29e7ea0a0c0" title="Print the contents of the file." alt="" coords="2143,259,2262,285"/>
<area shape="rect" href="classOpenFile.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="2383,860,2508,887"/>
<area shape="rect" href="classOpenFile.html#a89136ac6b54013a413398f9496d39963" title=" " alt="" coords="1917,5,2052,32"/>
<area shape="rect" href="classFileSystem.html#aebaf06661b1879a62afefa5abe99f21e" title="List all the files and their contents." alt="" coords="1731,259,1854,285"/>
<area shape="rect" href="classDirectory.html#a40c728221c5557e4fc181c4091c6fcff" title="Verbose print of the contents of the directory – all the file names and their contents." alt="" coords="1930,208,2039,235"/>
<area shape="rect" href="classFileSystem.html#a52e69a068c68c6c84f02c80fd4c5389e" title="Delete a file (UNIX unlink)" alt="" coords="1521,815,1663,841"/>
<area shape="rect" href="classFileSystem.html#ae5cbf7822080d1c9bb606b5d74dd4ee5" title="Delete a directory." alt="" coords="1527,663,1657,689"/>
<area shape="rect" href="classFileSystem.html#a12d63294322b37e934edd03ff614b95a" title=" " alt="" coords="1511,1101,1673,1128"/>
<area shape="rect" href="classOpenFileTable.html#a004541913ef8deb24d571c20d2020175" title="remove the file from the file system" alt="" coords="1294,865,1453,892"/>
<area shape="rect" href="classAddrSpace.html#acd3d2a68587b04ed5740e87895613821" title=" " alt="" coords="2123,955,2282,981"/>
<area shape="rect" href="classBitMap.html#ad6d12eefec9b64e903d072c83f7c29a2" title="Print contents of bitmap." alt="" coords="2135,904,2270,931"/>
<area shape="rect" href="classOpenFile.html#ad4b5d26a169a7c22e6f27c1693adb1aa" title=" " alt="" coords="1921,1169,2048,1196"/>
<area shape="rect" href="classDirectory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title="Init directory contents from disk." alt="" coords="1912,713,2057,740"/>
<area shape="rect" href="classOpenFile.html#af87bf2b0b15fa3501dada45a1a284bf4" title=" " alt="" coords="1536,409,1648,436"/>
<area shape="rect" href="classFileSystem.html#aaf76918c6f0d24bc72aaa84625adfddf" title="List all the files in the file system." alt="" coords="1533,511,1651,537"/>
<area shape="rect" href="classFileSystem.html#a9b4f11a12aed939e691edd6d591a8fcf" title="Create a new directory." alt="" coords="1528,984,1656,1011"/>
<area shape="rect" href="classOpenFileTableEntry.html#a3db43ff60517c9949bb89a499c7304a8" title=" " alt="" coords="1516,1035,1668,1077"/>
<area shape="rect" href="classOpenFile.html#a2de8d2d805fef3510bfd2fdf46f683fa" title=" " alt="" coords="1535,1253,1649,1280"/>
<area shape="rect" href="classBitMap.html#a19052d41ba5a654c7e478582dffba20d" title="fetch contents from disk" alt="" coords="1727,1093,1859,1120"/>
<area shape="rect" href="classDirectory.html#abf5550df42587bbc604c71441a4d12fc" title="Write modifications to directory contents back to disk." alt="" coords="1721,1195,1864,1221"/>
<area shape="rect" href="filesys_8hpp.html#a562c4a58dde9f8b0a25dc482e23d9dc4" title=" " alt="" coords="1761,739,1824,765"/>
<area shape="rect" href="classFileSystem.html#a606ea080a2a0fe5e3be3c3f5b8f4e7bc" title="Open a file (UNIX open)" alt="" coords="1529,612,1655,639"/>
<area shape="rect" href="classOpenFileTable.html#ab0519dd960600e61b98d524281aaa882" title=" " alt="" coords="1520,713,1664,740"/>
<area shape="rect" href="classDirectory.html#a2525a4455b80a1ee2648319ab257037c" title="Print the names of all the files in the directory." alt="" coords="1741,435,1844,461"/>
<area shape="rect" href="main_8cpp.html#a42300b7160fd87b4a003e05cfa902ae4" title=" " alt="" coords="1349,409,1398,436"/>
<area shape="rect" href="classProcess.html#acc8b64d45800f641a937ca447f080d10" title=" " alt="" coords="1310,612,1437,639"/>
<area shape="rect" href="classSwapManager.html#a35b5428181fe6bbb69f2cdfe9df13546" title=" " alt="" coords="2105,1340,2300,1367"/>
<area shape="rect" href="classFileHeader.html#ab896cc7dd7274e3f8072da2c7d9beee8" title="Write modifications to file header back to disk." alt="" coords="2126,1289,2279,1316"/>
</map>
</div>

</div>
</div>
<a id="a99cfb639fe3cf24033eebdcc19be42f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99cfb639fe3cf24033eebdcc19be42f3">&#9670;&nbsp;</a></span>getName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* Lock::getName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For debugging. </p>

</div>
</div>
<a id="a35b68baf5f5a3165a4e6fe50845a46a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35b68baf5f5a3165a4e6fe50845a46a2">&#9670;&nbsp;</a></span>isHeldByCurrentThread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Lock::isHeldByCurrentThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>true if the current thread holds this lock. Useful for checking in Release, and in <a class="el" href="classCondition.html" title="Defines the &quot;condition variable&quot; synchronization tool.">Condition</a> variable operations below.</p>
<p>To check if current thread hold the lock </p>

</div>
</div>
<a id="a5ca005b84272e56c2bf447056ee9217c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ca005b84272e56c2bf447056ee9217c">&#9670;&nbsp;</a></span>Release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Lock::Release </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release a lock (atomic operation) </p>
<p>Wake up a waiter if necessary, or release it if no thread is waiting. We check that the lock is held by the g_current_thread. As with Acquire, this operation must be atomic, so we need to disable interrupts. <a class="el" href="classScheduler.html#a18e89ab130a40c423da77673f12585d7" title="Inserts a thread in the ready list.">Scheduler::ReadyToRun()</a> assumes that threads are disabled when it is called. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classLock_a5ca005b84272e56c2bf447056ee9217c_icgraph.png" border="0" usemap="#classLock_a5ca005b84272e56c2bf447056ee9217c_icgraph" alt=""/></div>
<map name="classLock_a5ca005b84272e56c2bf447056ee9217c_icgraph" id="classLock_a5ca005b84272e56c2bf447056ee9217c_icgraph">
<area shape="rect" title="Release a lock (atomic operation)" alt="" coords="2820,1524,2925,1551"/>
<area shape="rect" href="classFileSystem.html#ac789d58815881d7f193d86085b0f54aa" title="Create a file (UNIX creat)" alt="" coords="1525,1203,1659,1229"/>
<area shape="rect" href="classOpenFileTable.html#addfa5b75bab09266fea5d13fb50474ab" title="release the lock after the disk operation." alt="" coords="2591,1651,2772,1677"/>
<area shape="rect" href="classDriverConsole.html#a6e9663f1c449c24edfb77264375b03fc" title="Read characters from the console." alt="" coords="2599,1600,2763,1627"/>
<area shape="rect" href="classDriverConsole.html#a7cd25307953296dea6a255c0877155cb" title="Write a buffer on the console." alt="" coords="1511,1304,1673,1331"/>
<area shape="rect" href="classDriverDisk.html#a2e93ba9a36bba4e8b3eeb43f877b2395" title="Read a disk sector, returning only once the data is actually read." alt="" coords="2603,537,2759,564"/>
<area shape="rect" href="classDriverDisk.html#a74426214379e50aa0d8a7b19084887ee" title="write a disk sector, returning only once the data is actually written." alt="" coords="2367,1315,2524,1341"/>
<area shape="rect" href="main_8cpp.html#a8e00c17571a60a78f108e1b56b300e1f" title=" " alt="" coords="1347,967,1399,993"/>
<area shape="rect" href="machine_8hpp.html#af31c84fcf9811fc72614abc2be3b5a44" title="Entry point into Nachos to handle user system calls and exceptions." alt="" coords="1112,1017,1236,1044"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="1149,663,1199,689"/>
<area shape="rect" href="classMachine.html#a0d6f63790c0568437b100171f61fd77f" title="Do a pending delayed load (modifying a reg)" alt="" coords="893,916,1064,943"/>
<area shape="rect" href="classMachine.html#ad70a015685c6e4bf705e4939551774aa" title=" " alt="" coords="351,865,513,892"/>
<area shape="rect" href="classMMU.html#a28a50bd03688bc05aa15f93e4abf61a7" title=" " alt="" coords="562,992,682,1019"/>
<area shape="rect" href="classMMU.html#aa2ddea5dcd1648aba21ac1a75c79dc25" title=" " alt="" coords="731,916,845,943"/>
<area shape="rect" href="classMMU.html#a60227cf48e6778a4c66d8a13fd2f1539" title=" " alt="" coords="561,815,683,841"/>
<area shape="rect" href="classMachine.html#a83444e06eb7a7c163a1b9c87a7062d43" title="Destructor. De&#45;allocate the data structures." alt="" coords="200,865,303,892"/>
<area shape="rect" href="thread_8cpp.html#a014c1a99794f74ed079b0dde1f7efe8d" title=" " alt="" coords="5,865,152,892"/>
<area shape="rect" href="exception_8cpp.html#a2f3d05f12e27c15623b3d6a0e3813677" title=" " alt="" coords="372,1031,492,1057"/>
<area shape="rect" href="exception_8cpp.html#a467d8e83c5db03566d20ee929c7d7c1f" title=" " alt="" coords="375,1081,489,1108"/>
<area shape="rect" href="classSyscallError.html#a6b4121cb56f7f1a22890ba109ab2ef57" title=" " alt="" coords="1284,1299,1463,1325"/>
<area shape="rect" href="classFileHeader.html#aa85564cee98fc9592df08cc5e4a2efc6" title="Initialize file header from disk." alt="" coords="2125,132,2280,159"/>
<area shape="rect" href="classSwapManager.html#a0934e61240a5ace841499321bf0889af" title=" " alt="" coords="2348,537,2543,564"/>
<area shape="rect" href="classFileHeader.html#a57b661cda2c4d51ee06cc29e7ea0a0c0" title="Print the contents of the file." alt="" coords="2143,259,2262,285"/>
<area shape="rect" href="classOpenFile.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="2383,860,2508,887"/>
<area shape="rect" href="classOpenFile.html#a89136ac6b54013a413398f9496d39963" title=" " alt="" coords="1917,5,2052,32"/>
<area shape="rect" href="classFileSystem.html#aebaf06661b1879a62afefa5abe99f21e" title="List all the files and their contents." alt="" coords="1731,259,1854,285"/>
<area shape="rect" href="classDirectory.html#a40c728221c5557e4fc181c4091c6fcff" title="Verbose print of the contents of the directory – all the file names and their contents." alt="" coords="1930,208,2039,235"/>
<area shape="rect" href="classFileSystem.html#a52e69a068c68c6c84f02c80fd4c5389e" title="Delete a file (UNIX unlink)" alt="" coords="1521,815,1663,841"/>
<area shape="rect" href="classFileSystem.html#ae5cbf7822080d1c9bb606b5d74dd4ee5" title="Delete a directory." alt="" coords="1527,663,1657,689"/>
<area shape="rect" href="classFileSystem.html#a12d63294322b37e934edd03ff614b95a" title=" " alt="" coords="1511,1101,1673,1128"/>
<area shape="rect" href="classOpenFileTable.html#a004541913ef8deb24d571c20d2020175" title="remove the file from the file system" alt="" coords="1294,865,1453,892"/>
<area shape="rect" href="classAddrSpace.html#acd3d2a68587b04ed5740e87895613821" title=" " alt="" coords="2123,955,2282,981"/>
<area shape="rect" href="classBitMap.html#ad6d12eefec9b64e903d072c83f7c29a2" title="Print contents of bitmap." alt="" coords="2135,904,2270,931"/>
<area shape="rect" href="classOpenFile.html#ad4b5d26a169a7c22e6f27c1693adb1aa" title=" " alt="" coords="1921,1169,2048,1196"/>
<area shape="rect" href="classDirectory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title="Init directory contents from disk." alt="" coords="1912,713,2057,740"/>
<area shape="rect" href="classOpenFile.html#af87bf2b0b15fa3501dada45a1a284bf4" title=" " alt="" coords="1536,409,1648,436"/>
<area shape="rect" href="classFileSystem.html#aaf76918c6f0d24bc72aaa84625adfddf" title="List all the files in the file system." alt="" coords="1533,511,1651,537"/>
<area shape="rect" href="classFileSystem.html#a9b4f11a12aed939e691edd6d591a8fcf" title="Create a new directory." alt="" coords="1528,984,1656,1011"/>
<area shape="rect" href="classOpenFileTableEntry.html#a3db43ff60517c9949bb89a499c7304a8" title=" " alt="" coords="1516,1035,1668,1077"/>
<area shape="rect" href="classOpenFile.html#a2de8d2d805fef3510bfd2fdf46f683fa" title=" " alt="" coords="1535,1253,1649,1280"/>
<area shape="rect" href="classBitMap.html#a19052d41ba5a654c7e478582dffba20d" title="fetch contents from disk" alt="" coords="1727,1093,1859,1120"/>
<area shape="rect" href="classDirectory.html#abf5550df42587bbc604c71441a4d12fc" title="Write modifications to directory contents back to disk." alt="" coords="1721,1195,1864,1221"/>
<area shape="rect" href="filesys_8hpp.html#a562c4a58dde9f8b0a25dc482e23d9dc4" title=" " alt="" coords="1761,739,1824,765"/>
<area shape="rect" href="classFileSystem.html#a606ea080a2a0fe5e3be3c3f5b8f4e7bc" title="Open a file (UNIX open)" alt="" coords="1529,612,1655,639"/>
<area shape="rect" href="classOpenFileTable.html#ab0519dd960600e61b98d524281aaa882" title=" " alt="" coords="1520,713,1664,740"/>
<area shape="rect" href="classDirectory.html#a2525a4455b80a1ee2648319ab257037c" title="Print the names of all the files in the directory." alt="" coords="1741,435,1844,461"/>
<area shape="rect" href="main_8cpp.html#a42300b7160fd87b4a003e05cfa902ae4" title=" " alt="" coords="1349,409,1398,436"/>
<area shape="rect" href="classProcess.html#acc8b64d45800f641a937ca447f080d10" title=" " alt="" coords="1310,612,1437,639"/>
<area shape="rect" href="classSwapManager.html#a35b5428181fe6bbb69f2cdfe9df13546" title=" " alt="" coords="2105,1340,2300,1367"/>
<area shape="rect" href="classFileHeader.html#ab896cc7dd7274e3f8072da2c7d9beee8" title="Write modifications to file header back to disk." alt="" coords="2126,1289,2279,1316"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a3a77227a99cb533c0944054916f4a021"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a77227a99cb533c0944054916f4a021">&#9670;&nbsp;</a></span>free</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Lock::free</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>to know if the lock is free </p>

</div>
</div>
<a id="aac2ad412d7f5f3ee27496a152eb7f4c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac2ad412d7f5f3ee27496a152eb7f4c6">&#9670;&nbsp;</a></span>name</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* Lock::name</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>for debugging </p>

</div>
</div>
<a id="a4c4a7da8e7d3974b7d84b310e7b2ef63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c4a7da8e7d3974b7d84b310e7b2ef63">&#9670;&nbsp;</a></span>owner</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classThread.html">Thread</a>* Lock::owner</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classThread.html" title="Data structures for managing threads">Thread</a> who has acquired the lock. </p>

</div>
</div>
<a id="a8840c0462a64e95b23f7d983d4bcf289"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8840c0462a64e95b23f7d983d4bcf289">&#9670;&nbsp;</a></span>sleepqueue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="list_8hpp.html#aa84599d07605fa9c90fc73ac57c58635">Listint</a>* Lock::sleepqueue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>threads waiting to acquire the lock </p>

</div>
</div>
<a id="a5327a137986efc6e5fb065d54a112e6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5327a137986efc6e5fb065d54a112e6b">&#9670;&nbsp;</a></span>type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="system_8hpp.html#a842c5e2e69277690b064bf363c017980">ObjectType</a> Lock::type</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Object type, for validity checks during system calls (must be the first public field) </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>kernel/<a class="el" href="synch_8hpp_source.html">synch.hpp</a></li>
<li>kernel/<a class="el" href="synch_8cpp.html">synch.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classLock.html">Lock</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
