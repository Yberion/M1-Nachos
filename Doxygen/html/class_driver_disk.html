<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: DriverDisk Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_driver_disk.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_driver_disk-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DriverDisk Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines a "synchronous" disk abstraction.  
 <a href="class_driver_disk.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="drv_disk_8hpp_source.html">drvDisk.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a12fc147f554a97268fab85d4013b85c5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_driver_disk.html#a12fc147f554a97268fab85d4013b85c5">DriverDisk</a> (char *sem_name, char *lock_name, <a class="el" href="class_disk.html">Disk</a> *theDisk)</td></tr>
<tr class="separator:a12fc147f554a97268fab85d4013b85c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef7f9b235761f441807ae26d2f6e22a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_driver_disk.html#aef7f9b235761f441807ae26d2f6e22a7">~DriverDisk</a> ()</td></tr>
<tr class="separator:aef7f9b235761f441807ae26d2f6e22a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e93ba9a36bba4e8b3eeb43f877b2395"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_driver_disk.html#a2e93ba9a36bba4e8b3eeb43f877b2395">ReadSector</a> (int sectorNumber, char *data)</td></tr>
<tr class="separator:a2e93ba9a36bba4e8b3eeb43f877b2395"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74426214379e50aa0d8a7b19084887ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_driver_disk.html#a74426214379e50aa0d8a7b19084887ee">WriteSector</a> (int sectorNumber, char *data)</td></tr>
<tr class="separator:a74426214379e50aa0d8a7b19084887ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a110084e07cf276072bf7275f22334087"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_driver_disk.html#a110084e07cf276072bf7275f22334087">RequestDone</a> ()</td></tr>
<tr class="separator:a110084e07cf276072bf7275f22334087"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines a "synchronous" disk abstraction. </p>
<p>As with other I/O devices, the raw physical disk is an asynchronous device &ndash; requests to read or write portions of the disk (sectors) return immediately, and an interrupt occurs later to signal that the operation completed. (Also, the physical characteristics of the disk device assume that only one operation can be requested at a time).</p>
<p>This class provides the abstraction that for any individual thread making a request, it waits around until the operation finishes before returning. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a12fc147f554a97268fab85d4013b85c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12fc147f554a97268fab85d4013b85c5">&#9670;&nbsp;</a></span>DriverDisk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DriverDisk::DriverDisk </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>sem_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>lock_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_disk.html">Disk</a> *&#160;</td>
          <td class="paramname"><em>theDisk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor. Initialize the disk driver, in turn initializing the physical disk. </p>

</div>
</div>
<a id="aef7f9b235761f441807ae26d2f6e22a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef7f9b235761f441807ae26d2f6e22a7">&#9670;&nbsp;</a></span>~DriverDisk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DriverDisk::~DriverDisk </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor. De-allocate data structures needed for the disk driver. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2e93ba9a36bba4e8b3eeb43f877b2395"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e93ba9a36bba4e8b3eeb43f877b2395">&#9670;&nbsp;</a></span>ReadSector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DriverDisk::ReadSector </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sectorNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the contents of a disk sector into a buffer. Return only after the data has been read.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sectorNumber</td><td>the disk sector to read </td></tr>
    <tr><td class="paramname">data</td><td>the buffer to hold the contents of the disk sector </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_driver_disk_a2e93ba9a36bba4e8b3eeb43f877b2395_cgraph.png" border="0" usemap="#class_driver_disk_a2e93ba9a36bba4e8b3eeb43f877b2395_cgraph" alt=""/></div>
<map name="class_driver_disk_a2e93ba9a36bba4e8b3eeb43f877b2395_cgraph" id="class_driver_disk_a2e93ba9a36bba4e8b3eeb43f877b2395_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,161,133"/>
<area shape="rect" href="class_lock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="225,5,328,32"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="435,56,503,83"/>
<area shape="rect" href="class_semaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="224,107,329,133"/>
<area shape="rect" href="class_disk.html#a8b51a82d4f2fd009335d0c591ae11042" title=" " alt="" coords="209,157,344,184"/>
<area shape="rect" href="class_lock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="224,208,329,235"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="595,81,711,108"/>
<area shape="rect" href="class_disk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="392,157,547,184"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="441,208,498,235"/>
<area shape="rect" href="sysdep_8cpp.html#a6140dcc97ab52a9406e6d3f5749fa43c" title="Read characters from an open file. Abort if read fails." alt="" coords="443,259,495,285"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_driver_disk_a2e93ba9a36bba4e8b3eeb43f877b2395_icgraph.png" border="0" usemap="#class_driver_disk_a2e93ba9a36bba4e8b3eeb43f877b2395_icgraph" alt=""/></div>
<map name="class_driver_disk_a2e93ba9a36bba4e8b3eeb43f877b2395_icgraph" id="class_driver_disk_a2e93ba9a36bba4e8b3eeb43f877b2395_icgraph">
<area shape="rect" title=" " alt="" coords="431,107,587,133"/>
<area shape="rect" href="class_file_header.html#aa85564cee98fc9592df08cc5e4a2efc6" title="Initialize file header from disk." alt="" coords="208,56,363,83"/>
<area shape="rect" href="class_swap_manager.html#a0934e61240a5ace841499321bf0889af" title=" " alt="" coords="188,157,383,184"/>
<area shape="rect" href="class_file_header.html#a57b661cda2c4d51ee06cc29e7ea0a0c0" title="Print the contents of the file." alt="" coords="226,107,345,133"/>
<area shape="rect" href="class_open_file.html#a89136ac6b54013a413398f9496d39963" title=" " alt="" coords="5,5,140,32"/>
<area shape="rect" href="class_file_system.html#aebaf06661b1879a62afefa5abe99f21e" title="List all the files and their contents." alt="" coords="11,107,134,133"/>
<area shape="rect" href="class_directory.html#a40c728221c5557e4fc181c4091c6fcff" title=" " alt="" coords="18,56,127,83"/>
</map>
</div>

</div>
</div>
<a id="a110084e07cf276072bf7275f22334087"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a110084e07cf276072bf7275f22334087">&#9670;&nbsp;</a></span>RequestDone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DriverDisk::RequestDone </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_disk.html" title="Defines a physical disk I/O device.">Disk</a> interrupt handler. Wake up any thread waiting for the disk request to finish. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_driver_disk_a110084e07cf276072bf7275f22334087_cgraph.png" border="0" usemap="#class_driver_disk_a110084e07cf276072bf7275f22334087_cgraph" alt=""/></div>
<map name="class_driver_disk_a110084e07cf276072bf7275f22334087_cgraph" id="class_driver_disk_a110084e07cf276072bf7275f22334087_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,172,57"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="239,5,307,32"/>
<area shape="rect" href="class_semaphore.html#a3e42125b95660ef696d0d0069b804343" title=" " alt="" coords="220,56,325,83"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="373,5,489,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_driver_disk_a110084e07cf276072bf7275f22334087_icgraph.png" border="0" usemap="#class_driver_disk_a110084e07cf276072bf7275f22334087_icgraph" alt=""/></div>
<map name="class_driver_disk_a110084e07cf276072bf7275f22334087_icgraph" id="class_driver_disk_a110084e07cf276072bf7275f22334087_icgraph">
<area shape="rect" title=" " alt="" coords="212,31,379,57"/>
<area shape="rect" href="drv_disk_8hpp.html#a4914abaf9a1c5b03d7d58de239c0060a" title=" " alt="" coords="21,5,148,32"/>
<area shape="rect" href="drv_disk_8hpp.html#a15036b35816c3b721525d4b117a5f40e" title=" " alt="" coords="5,56,164,83"/>
</map>
</div>

</div>
</div>
<a id="a74426214379e50aa0d8a7b19084887ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74426214379e50aa0d8a7b19084887ee">&#9670;&nbsp;</a></span>WriteSector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DriverDisk::WriteSector </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sectorNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write the contents of a buffer into a disk sector. Return only after the data has been written.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sectorNumber</td><td>the disk sector to be written </td></tr>
    <tr><td class="paramname">data</td><td>the new contents of the disk sector </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_driver_disk_a74426214379e50aa0d8a7b19084887ee_cgraph.png" border="0" usemap="#class_driver_disk_a74426214379e50aa0d8a7b19084887ee_cgraph" alt=""/></div>
<map name="class_driver_disk_a74426214379e50aa0d8a7b19084887ee_cgraph" id="class_driver_disk_a74426214379e50aa0d8a7b19084887ee_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,163,133"/>
<area shape="rect" href="class_lock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="227,5,329,32"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="437,81,505,108"/>
<area shape="rect" href="class_semaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="225,107,331,133"/>
<area shape="rect" href="class_lock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="225,157,331,184"/>
<area shape="rect" href="class_disk.html#aec33797c6480a8c919fc7d340c316abe" title=" " alt="" coords="211,208,345,235"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="596,107,712,133"/>
<area shape="rect" href="class_disk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="393,183,548,209"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="442,233,499,260"/>
<area shape="rect" href="sysdep_8cpp.html#a423758a22b76ab4ab8dce5afd92b83cd" title="Write characters to an open file. Abort if write fails." alt="" coords="433,284,508,311"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_driver_disk_a74426214379e50aa0d8a7b19084887ee_icgraph.png" border="0" usemap="#class_driver_disk_a74426214379e50aa0d8a7b19084887ee_icgraph" alt=""/></div>
<map name="class_driver_disk_a74426214379e50aa0d8a7b19084887ee_icgraph" id="class_driver_disk_a74426214379e50aa0d8a7b19084887ee_icgraph">
<area shape="rect" title=" " alt="" coords="248,5,405,32"/>
<area shape="rect" href="class_swap_manager.html#a35b5428181fe6bbb69f2cdfe9df13546" title=" " alt="" coords="5,5,200,32"/>
</map>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>drivers/<a class="el" href="drv_disk_8hpp_source.html">drvDisk.hpp</a></li>
<li>drivers/<a class="el" href="drv_disk_8cpp.html">drvDisk.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_driver_disk.html">DriverDisk</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
