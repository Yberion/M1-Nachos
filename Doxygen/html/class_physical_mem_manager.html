<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: PhysicalMemManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_physical_mem_manager.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="class_physical_mem_manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">PhysicalMemManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implements the physical page management.  
 <a href="class_physical_mem_manager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="phys_mem_8hpp_source.html">physMem.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad8fc0388862606646867121a8e1fe969"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physical_mem_manager.html#ad8fc0388862606646867121a8e1fe969">PhysicalMemManager</a> ()</td></tr>
<tr class="memdesc:ad8fc0388862606646867121a8e1fe969"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize the memory manager  <a href="class_physical_mem_manager.html#ad8fc0388862606646867121a8e1fe969">More...</a><br /></td></tr>
<tr class="separator:ad8fc0388862606646867121a8e1fe969"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6605d109b70a5aec31702c36aeeb0aa5"><td class="memItemLeft" align="right" valign="top"><a id="a6605d109b70a5aec31702c36aeeb0aa5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physical_mem_manager.html#a6605d109b70a5aec31702c36aeeb0aa5">~PhysicalMemManager</a> ()</td></tr>
<tr class="memdesc:a6605d109b70a5aec31702c36aeeb0aa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">de-allocate the page_flags bitmap <br /></td></tr>
<tr class="separator:a6605d109b70a5aec31702c36aeeb0aa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2cd63490707dbb47c1177f14f046ef9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physical_mem_manager.html#aa2cd63490707dbb47c1177f14f046ef9">AddPhysicalToVirtualMapping</a> (<a class="el" href="class_addr_space.html">AddrSpace</a> *owner, int vp)</td></tr>
<tr class="memdesc:aa2cd63490707dbb47c1177f14f046ef9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds a new page and adds a new page mapping.  <a href="class_physical_mem_manager.html#aa2cd63490707dbb47c1177f14f046ef9">More...</a><br /></td></tr>
<tr class="separator:aa2cd63490707dbb47c1177f14f046ef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eee399c2c1a0866cd575dc6c6b96687"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physical_mem_manager.html#a7eee399c2c1a0866cd575dc6c6b96687">RemovePhysicalToVirtualMapping</a> (long numPage)</td></tr>
<tr class="memdesc:a7eee399c2c1a0866cd575dc6c6b96687"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the page and deletes the existing page mapping.  <a href="class_physical_mem_manager.html#a7eee399c2c1a0866cd575dc6c6b96687">More...</a><br /></td></tr>
<tr class="separator:a7eee399c2c1a0866cd575dc6c6b96687"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f3468cba311669ca2721fa9d80b2a26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physical_mem_manager.html#a4f3468cba311669ca2721fa9d80b2a26">ChangeOwner</a> (long numPage, <a class="el" href="class_thread.html">Thread</a> *owner)</td></tr>
<tr class="memdesc:a4f3468cba311669ca2721fa9d80b2a26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the page owner.  <a href="class_physical_mem_manager.html#a4f3468cba311669ca2721fa9d80b2a26">More...</a><br /></td></tr>
<tr class="separator:a4f3468cba311669ca2721fa9d80b2a26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63eda2af742c1bccb2125d1dead91b83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physical_mem_manager.html#a63eda2af742c1bccb2125d1dead91b83">UnlockPage</a> (long numPage)</td></tr>
<tr class="memdesc:a63eda2af742c1bccb2125d1dead91b83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock physical page.  <a href="class_physical_mem_manager.html#a63eda2af742c1bccb2125d1dead91b83">More...</a><br /></td></tr>
<tr class="separator:a63eda2af742c1bccb2125d1dead91b83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0119a0005df90993c802f80f2e8d7dfd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physical_mem_manager.html#a0119a0005df90993c802f80f2e8d7dfd">Print</a> (void)</td></tr>
<tr class="memdesc:a0119a0005df90993c802f80f2e8d7dfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the contents of a page.  <a href="class_physical_mem_manager.html#a0119a0005df90993c802f80f2e8d7dfd">More...</a><br /></td></tr>
<tr class="separator:a0119a0005df90993c802f80f2e8d7dfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a250555c5f08c63aa2d1bcc82acca70c9"><td class="memItemLeft" align="right" valign="top"><a id="a250555c5f08c63aa2d1bcc82acca70c9"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physical_mem_manager.html#a250555c5f08c63aa2d1bcc82acca70c9">AddrSpace</a></td></tr>
<tr class="memdesc:a250555c5f08c63aa2d1bcc82acca70c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Direct access to page table for programm loading. <br /></td></tr>
<tr class="separator:a250555c5f08c63aa2d1bcc82acca70c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements the physical page management. </p>
<p>This class manages the physical pages of the programs which run on the top of the Nachos kernel. It keeps track of which physical pages are used and which are free.</p>
<p>It processes a new page demand by applying the clock algorithm when there is no page available. It requires an access to the thread list in order to choose which page will be swapped using the <a class="el" href="class_swap_manager.html" title="Implements the swap manager.">SwapManager</a> class. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad8fc0388862606646867121a8e1fe969"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8fc0388862606646867121a8e1fe969">&#9670;&nbsp;</a></span>PhysicalMemManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PhysicalMemManager::PhysicalMemManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialize the memory manager </p>
<p>Constructor. It simply clears all the page flags and inserts them in the free_page_list to indicate that the physical pages are free </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_physical_mem_manager_ad8fc0388862606646867121a8e1fe969_cgraph.png" border="0" usemap="#class_physical_mem_manager_ad8fc0388862606646867121a8e1fe969_cgraph" alt=""/></div>
<map name="class_physical_mem_manager_ad8fc0388862606646867121a8e1fe969_cgraph" id="class_physical_mem_manager_ad8fc0388862606646867121a8e1fe969_cgraph">
<area shape="rect" title="initialize the memory manager" alt="" coords="5,5,164,47"/>
<area shape="rect" href="class_list.html#a3d4805c0e563fd485273fc90a4b69e94" title=" " alt="" coords="212,13,307,39"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa2cd63490707dbb47c1177f14f046ef9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2cd63490707dbb47c1177f14f046ef9">&#9670;&nbsp;</a></span>AddPhysicalToVirtualMapping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PhysicalMemManager::AddPhysicalToVirtualMapping </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_addr_space.html">AddrSpace</a> *&#160;</td>
          <td class="paramname"><em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>virtualPage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds a new page and adds a new page mapping. </p>
<p>This method returns a new physical page number. If there is no page available, it evicts one page (page replacement algorithm).</p>
<p>NB: this method locks the newly allocated physical page such that it is not stolen during the page fault resolution. Don't forget to unlock it</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">owner</td><td>address space (for backlink) </td></tr>
    <tr><td class="paramname">virtualPage</td><td>is the number of virtualPage to link with physical page </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new physical page number. </dd></dl>

</div>
</div>
<a id="a4f3468cba311669ca2721fa9d80b2a26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f3468cba311669ca2721fa9d80b2a26">&#9670;&nbsp;</a></span>ChangeOwner()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PhysicalMemManager::ChangeOwner </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>numPage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_thread.html">Thread</a> *&#160;</td>
          <td class="paramname"><em>owner</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the page owner. </p>
<p>Change the owner of a page</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">owner</td><td>is a pointer on new owner (<a class="el" href="class_thread.html" title="Data structures for managing threads">Thread</a> *) </td></tr>
    <tr><td class="paramname">numPage</td><td>is the concerned page </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_physical_mem_manager_a4f3468cba311669ca2721fa9d80b2a26_cgraph.png" border="0" usemap="#class_physical_mem_manager_a4f3468cba311669ca2721fa9d80b2a26_cgraph" alt=""/></div>
<map name="class_physical_mem_manager_a4f3468cba311669ca2721fa9d80b2a26_cgraph" id="class_physical_mem_manager_a4f3468cba311669ca2721fa9d80b2a26_cgraph">
<area shape="rect" title="Change the page owner." alt="" coords="5,5,156,47"/>
<area shape="rect" href="class_process_stat.html#acbaa82f6a60394aca2db1e7e179a2a71" title=" " alt="" coords="204,13,419,39"/>
</map>
</div>

</div>
</div>
<a id="a0119a0005df90993c802f80f2e8d7dfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0119a0005df90993c802f80f2e8d7dfd">&#9670;&nbsp;</a></span>Print()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PhysicalMemManager::Print </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print the contents of a page. </p>
<p>print the current status of the table of physical pages</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rpage</td><td>number of real page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7eee399c2c1a0866cd575dc6c6b96687"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7eee399c2c1a0866cd575dc6c6b96687">&#9670;&nbsp;</a></span>RemovePhysicalToVirtualMapping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PhysicalMemManager::RemovePhysicalToVirtualMapping </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>num_page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees the page and deletes the existing page mapping. </p>
<p>This method releases an unused physical page by clearing the corresponding bit in the page_flags bitmap structure, and adding it in the free_page_list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num_page</td><td>is the number of the real page to free </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_physical_mem_manager_a7eee399c2c1a0866cd575dc6c6b96687_cgraph.png" border="0" usemap="#class_physical_mem_manager_a7eee399c2c1a0866cd575dc6c6b96687_cgraph" alt=""/></div>
<map name="class_physical_mem_manager_a7eee399c2c1a0866cd575dc6c6b96687_cgraph" id="class_physical_mem_manager_a7eee399c2c1a0866cd575dc6c6b96687_cgraph">
<area shape="rect" title="Frees the page and deletes the existing page mapping." alt="" coords="5,5,232,47"/>
<area shape="rect" href="class_list.html#a8cf5a283a4782ac19fcf00e6ac6a594f" title=" " alt="" coords="280,13,379,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_physical_mem_manager_a7eee399c2c1a0866cd575dc6c6b96687_icgraph.png" border="0" usemap="#class_physical_mem_manager_a7eee399c2c1a0866cd575dc6c6b96687_icgraph" alt=""/></div>
<map name="class_physical_mem_manager_a7eee399c2c1a0866cd575dc6c6b96687_icgraph" id="class_physical_mem_manager_a7eee399c2c1a0866cd575dc6c6b96687_icgraph">
<area shape="rect" title="Frees the page and deletes the existing page mapping." alt="" coords="220,5,447,47"/>
<area shape="rect" href="class_addr_space.html#add4a9431912394188b08c03346632737" title=" " alt="" coords="5,13,172,39"/>
</map>
</div>

</div>
</div>
<a id="a63eda2af742c1bccb2125d1dead91b83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63eda2af742c1bccb2125d1dead91b83">&#9670;&nbsp;</a></span>UnlockPage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PhysicalMemManager::UnlockPage </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>num_page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlock physical page. </p>
<p>This method unlocks the page numPage, after checking the page is in the locked state. Used by the page fault manager to unlock at the end of a page fault (the page cannot be evicted until the page fault handler terminates).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num_page</td><td>is the number of the real page to unlock </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>vm/<a class="el" href="phys_mem_8hpp_source.html">physMem.hpp</a></li>
<li>vm/<a class="el" href="phys_mem_8cpp.html">physMem.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_physical_mem_manager.html">PhysicalMemManager</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
