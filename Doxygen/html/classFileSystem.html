<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: FileSystem Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classFileSystem.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classFileSystem-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">FileSystem Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines the Nachos file system.  
 <a href="classFileSystem.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="filesys_8hpp_source.html">filesys.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for FileSystem:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem__coll__graph.png" border="0" usemap="#FileSystem_coll__map" alt="Collaboration graph"/></div>
<map name="FileSystem_coll__map" id="FileSystem_coll__map">
<area shape="rect" title="Defines the Nachos file system." alt="" coords="11,784,146,1008"/>
<area shape="rect" href="classOpenFile.html" title="Defines the data structure maintained when a file is opened." alt="" coords="16,424,141,707"/>
<area shape="rect" href="classFileHeader.html" title="Defines a file header in the Nachos file system." alt="" coords="5,5,152,361"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a12d63294322b37e934edd03ff614b95a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileSystem.html#a12d63294322b37e934edd03ff614b95a">FileSystem</a> (bool format)</td></tr>
<tr class="separator:a12d63294322b37e934edd03ff614b95a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e366f036e9d9cd884fa689963aacc49"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileSystem.html#a9e366f036e9d9cd884fa689963aacc49">~FileSystem</a> ()</td></tr>
<tr class="memdesc:a9e366f036e9d9cd884fa689963aacc49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor of file system. Called when Nachos is shut-down.  <a href="classFileSystem.html#a9e366f036e9d9cd884fa689963aacc49">More...</a><br /></td></tr>
<tr class="separator:a9e366f036e9d9cd884fa689963aacc49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac789d58815881d7f193d86085b0f54aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileSystem.html#ac789d58815881d7f193d86085b0f54aa">Create</a> (char *name, int initialSize)</td></tr>
<tr class="memdesc:ac789d58815881d7f193d86085b0f54aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a file (UNIX creat)  <a href="classFileSystem.html#ac789d58815881d7f193d86085b0f54aa">More...</a><br /></td></tr>
<tr class="separator:ac789d58815881d7f193d86085b0f54aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a606ea080a2a0fe5e3be3c3f5b8f4e7bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOpenFile.html">OpenFile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileSystem.html#a606ea080a2a0fe5e3be3c3f5b8f4e7bc">Open</a> (char *name)</td></tr>
<tr class="memdesc:a606ea080a2a0fe5e3be3c3f5b8f4e7bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a file (UNIX open)  <a href="classFileSystem.html#a606ea080a2a0fe5e3be3c3f5b8f4e7bc">More...</a><br /></td></tr>
<tr class="separator:a606ea080a2a0fe5e3be3c3f5b8f4e7bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52e69a068c68c6c84f02c80fd4c5389e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileSystem.html#a52e69a068c68c6c84f02c80fd4c5389e">Remove</a> (char *name)</td></tr>
<tr class="memdesc:a52e69a068c68c6c84f02c80fd4c5389e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a file (UNIX unlink)  <a href="classFileSystem.html#a52e69a068c68c6c84f02c80fd4c5389e">More...</a><br /></td></tr>
<tr class="separator:a52e69a068c68c6c84f02c80fd4c5389e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf76918c6f0d24bc72aaa84625adfddf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileSystem.html#aaf76918c6f0d24bc72aaa84625adfddf">List</a> ()</td></tr>
<tr class="memdesc:aaf76918c6f0d24bc72aaa84625adfddf"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classList.html" title="Definition of a generic single-linked &quot;list&quot;.">List</a> all the files in the file system.  <a href="classFileSystem.html#aaf76918c6f0d24bc72aaa84625adfddf">More...</a><br /></td></tr>
<tr class="separator:aaf76918c6f0d24bc72aaa84625adfddf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebaf06661b1879a62afefa5abe99f21e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileSystem.html#aebaf06661b1879a62afefa5abe99f21e">Print</a> ()</td></tr>
<tr class="memdesc:aebaf06661b1879a62afefa5abe99f21e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classList.html" title="Definition of a generic single-linked &quot;list&quot;.">List</a> all the files and their contents.  <a href="classFileSystem.html#aebaf06661b1879a62afefa5abe99f21e">More...</a><br /></td></tr>
<tr class="separator:aebaf06661b1879a62afefa5abe99f21e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a798400dbcaaef6d6dde5e63fcc500a60"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOpenFile.html">OpenFile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileSystem.html#a798400dbcaaef6d6dde5e63fcc500a60">GetFreeMapFile</a> ()</td></tr>
<tr class="memdesc:a798400dbcaaef6d6dde5e63fcc500a60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the free map table.  <a href="classFileSystem.html#a798400dbcaaef6d6dde5e63fcc500a60">More...</a><br /></td></tr>
<tr class="separator:a798400dbcaaef6d6dde5e63fcc500a60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a118ce47f3ef95d3e930572c20836d327"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOpenFile.html">OpenFile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileSystem.html#a118ce47f3ef95d3e930572c20836d327">GetDirFile</a> ()</td></tr>
<tr class="memdesc:a118ce47f3ef95d3e930572c20836d327"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the root directory.  <a href="classFileSystem.html#a118ce47f3ef95d3e930572c20836d327">More...</a><br /></td></tr>
<tr class="separator:a118ce47f3ef95d3e930572c20836d327"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b4f11a12aed939e691edd6d591a8fcf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileSystem.html#a9b4f11a12aed939e691edd6d591a8fcf">Mkdir</a> (char *)</td></tr>
<tr class="memdesc:a9b4f11a12aed939e691edd6d591a8fcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new directory.  <a href="classFileSystem.html#a9b4f11a12aed939e691edd6d591a8fcf">More...</a><br /></td></tr>
<tr class="separator:a9b4f11a12aed939e691edd6d591a8fcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5cbf7822080d1c9bb606b5d74dd4ee5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileSystem.html#ae5cbf7822080d1c9bb606b5d74dd4ee5">Rmdir</a> (char *)</td></tr>
<tr class="memdesc:ae5cbf7822080d1c9bb606b5d74dd4ee5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a directory.  <a href="classFileSystem.html#ae5cbf7822080d1c9bb606b5d74dd4ee5">More...</a><br /></td></tr>
<tr class="separator:ae5cbf7822080d1c9bb606b5d74dd4ee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac011f3b710a3b03d29fb9e554008699d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOpenFile.html">OpenFile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileSystem.html#ac011f3b710a3b03d29fb9e554008699d">freeMapFile</a></td></tr>
<tr class="memdesc:ac011f3b710a3b03d29fb9e554008699d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit map of free disk blocks, represented as a file.  <a href="classFileSystem.html#ac011f3b710a3b03d29fb9e554008699d">More...</a><br /></td></tr>
<tr class="separator:ac011f3b710a3b03d29fb9e554008699d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d062da5905bf0eca01033ad70d0e2d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOpenFile.html">OpenFile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileSystem.html#a8d062da5905bf0eca01033ad70d0e2d5">directoryFile</a></td></tr>
<tr class="memdesc:a8d062da5905bf0eca01033ad70d0e2d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">"Root" directory &ndash; list of file names, represented as a file  <a href="classFileSystem.html#a8d062da5905bf0eca01033ad70d0e2d5">More...</a><br /></td></tr>
<tr class="separator:a8d062da5905bf0eca01033ad70d0e2d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines the Nachos file system. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a12d63294322b37e934edd03ff614b95a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12d63294322b37e934edd03ff614b95a">&#9670;&nbsp;</a></span>FileSystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FileSystem::FileSystem </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the file system. Must be called <em>after</em> "synchDisk" has been initialized.</p>
<p>Initialize the file system. If format = true, the disk has nothing on it, and we need to initialize the disk to contain an empty directory, and a bitmap of free sectors (with almost but not all of the sectors marked as free).</p>
<p>If format = false, we just have to open the files representing the bitmap and the directory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">format</td><td>should we initialize the disk? </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_a12d63294322b37e934edd03ff614b95a_cgraph.png" border="0" usemap="#classFileSystem_a12d63294322b37e934edd03ff614b95a_cgraph" alt=""/></div>
<map name="classFileSystem_a12d63294322b37e934edd03ff614b95a_cgraph" id="classFileSystem_a12d63294322b37e934edd03ff614b95a_cgraph">
<area shape="rect" title=" " alt="" coords="5,335,168,361"/>
<area shape="rect" href="classFileHeader.html#a2fb90f63470e10c847393e124763fd1a" title=" " alt="" coords="610,195,749,221"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="1683,625,1751,652"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="1853,748,1969,775"/>
<area shape="rect" href="classBitMap.html#ae3eb006c755440ae830bf220457dbbc7" title="De&#45;allocate bitmap." alt="" coords="1063,195,1163,221"/>
<area shape="rect" href="classBitMap.html#a04d9c800f2a3b815f47d22c149ceae01" title="Return the number of clear bits." alt="" coords="421,257,519,284"/>
<area shape="rect" href="classDirectory.html#a40c728221c5557e4fc181c4091c6fcff" title="Verbose print of the contents of the directory – all the file names and their contents." alt="" coords="625,853,734,880"/>
<area shape="rect" href="classFileHeader.html#a1099a20b5ca3009ba75ba05492528682" title="Mark this header as a directory header." alt="" coords="223,413,351,440"/>
<area shape="rect" href="classBitMap.html#a19052d41ba5a654c7e478582dffba20d" title="fetch contents from disk" alt="" coords="221,363,353,389"/>
<area shape="rect" href="classFileHeader.html#ab896cc7dd7274e3f8072da2c7d9beee8" title="Write modifications to file header back to disk." alt="" coords="603,803,756,829"/>
<area shape="rect" href="classDirectory.html#abf5550df42587bbc604c71441a4d12fc" title="Write modifications to directory contents back to disk." alt="" coords="216,489,359,516"/>
<area shape="rect" href="classBitMap.html#a031ad924663dcae2359403b3a76a9dd8" title="Is the &quot;nth&quot; bit set?" alt="" coords="855,195,951,221"/>
<area shape="rect" href="classBitMap.html#af73514736aff03229d58557d0423daca" title="Return the # of a clear bit, and as a side effect, set the bit. If no bits are clear,..." alt="" coords="839,296,967,323"/>
<area shape="rect" href="classBitMap.html#af5a945ba7b79e92a5a1bb0db24ecf26a" title="Clear the &quot;nth&quot; bit." alt="" coords="1065,245,1161,272"/>
<area shape="rect" href="classFileHeader.html#aa85564cee98fc9592df08cc5e4a2efc6" title="Initialize file header from disk." alt="" coords="825,904,980,931"/>
<area shape="rect" href="classFileHeader.html#a57b661cda2c4d51ee06cc29e7ea0a0c0" title="Print the contents of the file." alt="" coords="843,853,962,880"/>
<area shape="rect" href="classDriverDisk.html#a2e93ba9a36bba4e8b3eeb43f877b2395" title="Read a disk sector, returning only once the data is actually read." alt="" coords="1035,883,1191,909"/>
<area shape="rect" href="classLock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="1263,912,1365,939"/>
<area shape="rect" href="classSemaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="1261,811,1367,837"/>
<area shape="rect" href="classDisk.html#a8b51a82d4f2fd009335d0c591ae11042" title=" " alt="" coords="1247,1148,1381,1175"/>
<area shape="rect" href="classLock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="1261,861,1367,888"/>
<area shape="rect" href="classDisk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="1440,1275,1595,1301"/>
<area shape="rect" href="disk_8cpp.html#a03b355bcf0d41c1fdeb1c69fb067fc1a" title="dummy procedure because we can&#39;t take a pointer of a member function" alt="" coords="1478,971,1557,997"/>
<area shape="rect" href="classThread.html#ade294fd013100034bebd745d8ffb1f94" title="Returns the process owner." alt="" coords="1430,1072,1605,1099"/>
<area shape="rect" href="classProcessStat.html#a8114ba343d15b3a29be80eff5a094f79" title=" " alt="" coords="1429,1427,1605,1469"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="1489,1021,1546,1048"/>
<area shape="rect" href="disk_8cpp.html#a3f97a10c00c77d969f5ec6423403b6cc" title="Dump the data in a disk read/write request, for debugging only." alt="" coords="1474,920,1561,947"/>
<area shape="rect" href="sysdep_8cpp.html#a6140dcc97ab52a9406e6d3f5749fa43c" title="Read characters from an open file. Abort if read fails." alt="" coords="1491,1376,1543,1403"/>
<area shape="rect" href="classInterrupt.html#ac403a14a9e41fa2b6dbd5c6056b87389" title="Print interrupt state." alt="" coords="1452,1173,1583,1200"/>
<area shape="rect" href="classDisk.html#aa87426eeedc8cf390fa4b293ecd34b42" title=" " alt="" coords="1456,1325,1579,1352"/>
<area shape="rect" href="classStatistics.html#a77aec82b7adb8d795c850db96c82f5d8" title=" " alt="" coords="1829,1325,1992,1352"/>
<area shape="rect" href="classDisk.html#abf14ace693df2b08e1187045305e81a5" title="time to get to the new track" alt="" coords="1659,1249,1775,1276"/>
<area shape="rect" href="classDisk.html#abecdf19e160925b1bc9b4542c90de2ac" title=" " alt="" coords="1653,1351,1781,1377"/>
<area shape="rect" href="classList.html#a7c94145ed3ab4115dd2a87e25eeadc91" title=" " alt="" coords="1657,1097,1778,1124"/>
<area shape="rect" href="classOpenFile.html#ad4b5d26a169a7c22e6f27c1693adb1aa" title=" " alt="" coords="407,496,533,523"/>
<area shape="rect" href="classFileHeader.html#adacbe1c1af441d0b1e978c65a05d60f2" title="Convert a byte offset into the file to the disk sector containing the byte." alt="" coords="1028,448,1199,475"/>
<area shape="rect" href="classFileHeader.html#a8dcba7e634e37555f08c39dd9c63597a" title=" " alt="" coords="581,651,777,677"/>
<area shape="rect" href="classBitMap.html#ad6d12eefec9b64e903d072c83f7c29a2" title="Print contents of bitmap." alt="" coords="612,600,747,627"/>
<area shape="rect" href="classOpenFile.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="840,499,965,525"/>
<area shape="rect" href="classFileHeader.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="1037,397,1189,424"/>
<area shape="rect" href="classFileSystem.html#a798400dbcaaef6d6dde5e63fcc500a60" title="Get the free map table." alt="" coords="585,347,774,373"/>
<area shape="rect" href="classFileHeader.html#aeff760f3edaad0bfb6862a4e93b005c6" title=" " alt="" coords="591,549,768,576"/>
<area shape="rect" href="classFileHeader.html#afa31f3a959a74b0134a544858021457f" title=" " alt="" coords="604,296,755,323"/>
<area shape="rect" href="classDriverDisk.html#a74426214379e50aa0d8a7b19084887ee" title="write a disk sector, returning only once the data is actually written." alt="" coords="1035,803,1192,829"/>
<area shape="rect" href="classDisk.html#aec33797c6480a8c919fc7d340c316abe" title=" " alt="" coords="1247,760,1381,787"/>
<area shape="rect" href="classProcessStat.html#ad8f0597460874ad1dcf515fa3b58b9c8" title=" " alt="" coords="1429,753,1605,794"/>
<area shape="rect" href="sysdep_8cpp.html#a423758a22b76ab4ab8dce5afd92b83cd" title="Write characters to an open file. Abort if write fails." alt="" coords="1480,701,1555,728"/>
</map>
</div>

</div>
</div>
<a id="a9e366f036e9d9cd884fa689963aacc49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e366f036e9d9cd884fa689963aacc49">&#9670;&nbsp;</a></span>~FileSystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FileSystem::~FileSystem </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor of file system. Called when Nachos is shut-down. </p>
<p>Destructor of the file system, called when Nachos is stopped </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac789d58815881d7f193d86085b0f54aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac789d58815881d7f193d86085b0f54aa">&#9670;&nbsp;</a></span>Create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FileSystem::Create </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>initialSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a file (UNIX creat) </p>
<p>Create a file in the Nachos file system (similar to UNIX create). Since we can't increase the size of files dynamically, we have to give Create the initial size of the file.</p>
<p>The steps to create a file are: Make sure the file doesn't already exist Allocate a sector for the file header Allocate space on disk for the data blocks for the file Add the name to the directory Store the new file header on disk Flush the changes to the bitmap and the directory back to disk</p>
<p>Create fails if: file is already in directory no free space for file header no free entry for file in directory no free space for data blocks for the file</p>
<p>Note that this implementation assumes there is no concurrent access to the file system!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>is the name of file to be created (NOT MODIFIED) </td></tr>
    <tr><td class="paramname">initialSize</td><td>is the size of file to be created </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NO_ERROR if everything goes ok, otherwise, return an error code as define in <a class="el" href="msgerror_8hpp.html" title="Defines the data structure to store error messages during a syscall process.">msgerror.hpp</a> </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_ac789d58815881d7f193d86085b0f54aa_cgraph.png" border="0" usemap="#classFileSystem_ac789d58815881d7f193d86085b0f54aa_cgraph" alt=""/></div>
<map name="classFileSystem_ac789d58815881d7f193d86085b0f54aa_cgraph" id="classFileSystem_ac789d58815881d7f193d86085b0f54aa_cgraph">
<area shape="rect" title="Create a file (UNIX creat)" alt="" coords="5,1015,140,1041"/>
<area shape="rect" href="classLock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="1247,315,1349,341"/>
<area shape="rect" href="classDirectory.html#ab9f17b4081a08ca0f3f661b8d951153c" title="Add a file name into the directory." alt="" coords="207,1496,312,1523"/>
<area shape="rect" href="classFileHeader.html#a2fb90f63470e10c847393e124763fd1a" title=" " alt="" coords="621,1344,759,1371"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="1685,837,1753,864"/>
<area shape="rect" href="classBitMap.html#a031ad924663dcae2359403b3a76a9dd8" title="Is the &quot;nth&quot; bit set?" alt="" coords="852,1344,948,1371"/>
<area shape="rect" href="classBitMap.html#ad6d12eefec9b64e903d072c83f7c29a2" title="Print contents of bitmap." alt="" coords="623,787,757,813"/>
<area shape="rect" href="classLock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="1245,939,1351,965"/>
<area shape="rect" href="classDirectory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title="Init directory contents from disk." alt="" coords="389,939,534,965"/>
<area shape="rect" href="classDirectory.html#aa0072462a745ab1bc84e36a810ce7cc5" title="Find the sector number of the FileHeader for file: &quot;name&quot;." alt="" coords="408,1445,515,1472"/>
<area shape="rect" href="filesys_8cpp.html#a6aea4042690035ff4b4b4531ccca4dc1" title=" " alt="" coords="228,1217,291,1244"/>
<area shape="rect" href="classFileHeader.html#aa154a9b7f22b2c170b9545c627251d92" title="Mark this header as a file header." alt="" coords="193,1547,326,1573"/>
<area shape="rect" href="classBitMap.html#a19052d41ba5a654c7e478582dffba20d" title="fetch contents from disk" alt="" coords="193,1040,325,1067"/>
<area shape="rect" href="classFileHeader.html#ab896cc7dd7274e3f8072da2c7d9beee8" title="Write modifications to file header back to disk." alt="" coords="613,736,767,763"/>
<area shape="rect" href="classDirectory.html#abf5550df42587bbc604c71441a4d12fc" title="Write modifications to directory contents back to disk." alt="" coords="188,989,331,1016"/>
<area shape="rect" href="classDirectory.html#abab8ff05c1dedadbaac7b44730eeb5a4" title="Find the index into the directory table corresponding to &quot;name&quot;." alt="" coords="621,1496,759,1523"/>
<area shape="rect" href="classBitMap.html#af73514736aff03229d58557d0423daca" title="Return the # of a clear bit, and as a side effect, set the bit. If no bits are clear,..." alt="" coords="836,1293,964,1320"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="1848,568,1964,595"/>
<area shape="rect" href="classBitMap.html#ae3eb006c755440ae830bf220457dbbc7" title="De&#45;allocate bitmap." alt="" coords="1047,1344,1147,1371"/>
<area shape="rect" href="classBitMap.html#af5a945ba7b79e92a5a1bb0db24ecf26a" title="Clear the &quot;nth&quot; bit." alt="" coords="1049,1293,1145,1320"/>
<area shape="rect" href="classOpenFile.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="837,989,963,1016"/>
<area shape="rect" href="classFileHeader.html#adacbe1c1af441d0b1e978c65a05d60f2" title="Convert a byte offset into the file to the disk sector containing the byte." alt="" coords="1012,1040,1183,1067"/>
<area shape="rect" href="classFileHeader.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="1021,1116,1173,1143"/>
<area shape="rect" href="classDriverDisk.html#a2e93ba9a36bba4e8b3eeb43f877b2395" title="Read a disk sector, returning only once the data is actually read." alt="" coords="1019,787,1175,813"/>
<area shape="rect" href="classSemaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="1245,837,1351,864"/>
<area shape="rect" href="classDisk.html#a8b51a82d4f2fd009335d0c591ae11042" title=" " alt="" coords="1231,365,1365,392"/>
<area shape="rect" href="classDisk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="1424,163,1579,189"/>
<area shape="rect" href="disk_8cpp.html#a03b355bcf0d41c1fdeb1c69fb067fc1a" title="dummy procedure because we can&#39;t take a pointer of a member function" alt="" coords="1462,365,1541,392"/>
<area shape="rect" href="classThread.html#ade294fd013100034bebd745d8ffb1f94" title="Returns the process owner." alt="" coords="1414,264,1589,291"/>
<area shape="rect" href="classProcessStat.html#a8114ba343d15b3a29be80eff5a094f79" title=" " alt="" coords="1413,46,1589,87"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="1473,315,1530,341"/>
<area shape="rect" href="disk_8cpp.html#a3f97a10c00c77d969f5ec6423403b6cc" title="Dump the data in a disk read/write request, for debugging only." alt="" coords="1458,416,1545,443"/>
<area shape="rect" href="sysdep_8cpp.html#a6140dcc97ab52a9406e6d3f5749fa43c" title="Read characters from an open file. Abort if read fails." alt="" coords="1475,112,1527,139"/>
<area shape="rect" href="classInterrupt.html#ac403a14a9e41fa2b6dbd5c6056b87389" title="Print interrupt state." alt="" coords="1436,517,1567,544"/>
<area shape="rect" href="classDisk.html#aa87426eeedc8cf390fa4b293ecd34b42" title=" " alt="" coords="1440,467,1563,493"/>
<area shape="rect" href="classStatistics.html#a77aec82b7adb8d795c850db96c82f5d8" title=" " alt="" coords="1637,467,1800,493"/>
<area shape="rect" href="classDisk.html#abf14ace693df2b08e1187045305e81a5" title="time to get to the new track" alt="" coords="1661,163,1777,189"/>
<area shape="rect" href="filesys_8cpp.html#adf9153e1a224b6785fb5e88446cfc332" title=" " alt="" coords="411,1192,511,1219"/>
<area shape="rect" href="classFileSystem.html#a118ce47f3ef95d3e930572c20836d327" title="Get the root directory." alt="" coords="384,1243,539,1269"/>
<area shape="rect" href="classOpenFile.html#a2c9c2e3e078fc71c99e0f589493fa28e" title="return the file&#39;s header" alt="" coords="379,1293,544,1320"/>
<area shape="rect" href="classFileHeader.html#ae43a97c41cef7b52a01c5d1da28ed3fa" title=" " alt="" coords="402,1141,521,1168"/>
<area shape="rect" href="classOpenFile.html#ad4b5d26a169a7c22e6f27c1693adb1aa" title=" " alt="" coords="398,1040,525,1067"/>
<area shape="rect" href="classFileHeader.html#a8dcba7e634e37555f08c39dd9c63597a" title=" " alt="" coords="592,1091,788,1117"/>
<area shape="rect" href="classFileSystem.html#a798400dbcaaef6d6dde5e63fcc500a60" title="Get the free map table." alt="" coords="595,1141,785,1168"/>
<area shape="rect" href="classFileHeader.html#aeff760f3edaad0bfb6862a4e93b005c6" title=" " alt="" coords="601,939,779,965"/>
<area shape="rect" href="classFileHeader.html#afa31f3a959a74b0134a544858021457f" title=" " alt="" coords="615,1293,765,1320"/>
<area shape="rect" href="classDriverDisk.html#a74426214379e50aa0d8a7b19084887ee" title="write a disk sector, returning only once the data is actually written." alt="" coords="1019,837,1176,864"/>
<area shape="rect" href="classDisk.html#aec33797c6480a8c919fc7d340c316abe" title=" " alt="" coords="1231,492,1365,519"/>
<area shape="rect" href="classProcessStat.html#ad8f0597460874ad1dcf515fa3b58b9c8" title=" " alt="" coords="1413,619,1589,661"/>
<area shape="rect" href="sysdep_8cpp.html#a423758a22b76ab4ab8dce5afd92b83cd" title="Write characters to an open file. Abort if write fails." alt="" coords="1464,685,1539,712"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_ac789d58815881d7f193d86085b0f54aa_icgraph.png" border="0" usemap="#classFileSystem_ac789d58815881d7f193d86085b0f54aa_icgraph" alt=""/></div>
<map name="classFileSystem_ac789d58815881d7f193d86085b0f54aa_icgraph" id="classFileSystem_ac789d58815881d7f193d86085b0f54aa_icgraph">
<area shape="rect" title="Create a file (UNIX creat)" alt="" coords="1519,81,1653,108"/>
<area shape="rect" href="main_8cpp.html#a8e00c17571a60a78f108e1b56b300e1f" title=" " alt="" coords="1383,31,1435,57"/>
<area shape="rect" href="machine_8hpp.html#af31c84fcf9811fc72614abc2be3b5a44" title="Entry point into Nachos to handle user system calls and exceptions." alt="" coords="1347,132,1471,159"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="1188,5,1239,32"/>
<area shape="rect" href="classMachine.html#a0d6f63790c0568437b100171f61fd77f" title="Do a pending delayed load (modifying a reg)" alt="" coords="1128,259,1299,285"/>
<area shape="rect" href="classMachine.html#ad70a015685c6e4bf705e4939551774aa" title=" " alt="" coords="585,309,748,336"/>
<area shape="rect" href="classMMU.html#a28a50bd03688bc05aa15f93e4abf61a7" title=" " alt="" coords="797,196,917,223"/>
<area shape="rect" href="classMMU.html#aa2ddea5dcd1648aba21ac1a75c79dc25" title=" " alt="" coords="965,259,1080,285"/>
<area shape="rect" href="classMMU.html#a60227cf48e6778a4c66d8a13fd2f1539" title=" " alt="" coords="796,309,917,336"/>
<area shape="rect" href="classMachine.html#a83444e06eb7a7c163a1b9c87a7062d43" title="Destructor. De&#45;allocate the data structures." alt="" coords="435,309,537,336"/>
<area shape="rect" href="thread_8cpp.html#a014c1a99794f74ed079b0dde1f7efe8d" title=" " alt="" coords="240,309,387,336"/>
<area shape="rect" href="classThread.html#ad6d5edb1a6d2a9effbb442883fc5b866" title="Sets&#45;up the thread simulator context : fills it with the appropriate." alt="" coords="5,309,192,336"/>
<area shape="rect" href="exception_8cpp.html#a2f3d05f12e27c15623b3d6a0e3813677" title=" " alt="" coords="607,69,727,96"/>
<area shape="rect" href="exception_8cpp.html#a467d8e83c5db03566d20ee929c7d7c1f" title=" " alt="" coords="609,171,724,197"/>
</map>
</div>

</div>
</div>
<a id="a118ce47f3ef95d3e930572c20836d327"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a118ce47f3ef95d3e930572c20836d327">&#9670;&nbsp;</a></span>GetDirFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOpenFile.html">OpenFile</a> * FileSystem::GetDirFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the root directory. </p>
<p>return the base directory file (used by the open file table). </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_a118ce47f3ef95d3e930572c20836d327_icgraph.png" border="0" usemap="#classFileSystem_a118ce47f3ef95d3e930572c20836d327_icgraph" alt=""/></div>
<map name="classFileSystem_a118ce47f3ef95d3e930572c20836d327_icgraph" id="classFileSystem_a118ce47f3ef95d3e930572c20836d327_icgraph">
<area shape="rect" title="Get the root directory." alt="" coords="2028,259,2183,285"/>
<area shape="rect" href="filesys_8hpp.html#a562c4a58dde9f8b0a25dc482e23d9dc4" title=" " alt="" coords="1917,259,1980,285"/>
<area shape="rect" href="classFileSystem.html#ac789d58815881d7f193d86085b0f54aa" title="Create a file (UNIX creat)" alt="" coords="1730,157,1865,184"/>
<area shape="rect" href="classFileSystem.html#a9b4f11a12aed939e691edd6d591a8fcf" title="Create a new directory." alt="" coords="1534,157,1662,184"/>
<area shape="rect" href="classFileSystem.html#a606ea080a2a0fe5e3be3c3f5b8f4e7bc" title="Open a file (UNIX open)" alt="" coords="1734,81,1861,108"/>
<area shape="rect" href="classOpenFileTable.html#ab0519dd960600e61b98d524281aaa882" title=" " alt="" coords="1725,411,1869,437"/>
<area shape="rect" href="classFileSystem.html#a52e69a068c68c6c84f02c80fd4c5389e" title="Delete a file (UNIX unlink)" alt="" coords="1726,259,1869,285"/>
<area shape="rect" href="classOpenFileTable.html#a004541913ef8deb24d571c20d2020175" title="remove the file from the file system" alt="" coords="1519,360,1677,387"/>
<area shape="rect" href="classFileSystem.html#ae5cbf7822080d1c9bb606b5d74dd4ee5" title="Delete a directory." alt="" coords="1533,309,1663,336"/>
<area shape="rect" href="main_8cpp.html#a8e00c17571a60a78f108e1b56b300e1f" title=" " alt="" coords="1572,107,1624,133"/>
<area shape="rect" href="machine_8hpp.html#af31c84fcf9811fc72614abc2be3b5a44" title="Entry point into Nachos to handle user system calls and exceptions." alt="" coords="1347,309,1471,336"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="1383,157,1434,184"/>
<area shape="rect" href="classMachine.html#a0d6f63790c0568437b100171f61fd77f" title="Do a pending delayed load (modifying a reg)" alt="" coords="1128,208,1299,235"/>
<area shape="rect" href="classMachine.html#ad70a015685c6e4bf705e4939551774aa" title=" " alt="" coords="585,157,748,184"/>
<area shape="rect" href="classMMU.html#a28a50bd03688bc05aa15f93e4abf61a7" title=" " alt="" coords="797,284,917,311"/>
<area shape="rect" href="classMMU.html#aa2ddea5dcd1648aba21ac1a75c79dc25" title=" " alt="" coords="965,208,1080,235"/>
<area shape="rect" href="classMMU.html#a60227cf48e6778a4c66d8a13fd2f1539" title=" " alt="" coords="796,157,917,184"/>
<area shape="rect" href="classMachine.html#a83444e06eb7a7c163a1b9c87a7062d43" title="Destructor. De&#45;allocate the data structures." alt="" coords="435,157,537,184"/>
<area shape="rect" href="thread_8cpp.html#a014c1a99794f74ed079b0dde1f7efe8d" title=" " alt="" coords="240,157,387,184"/>
<area shape="rect" href="classThread.html#ad6d5edb1a6d2a9effbb442883fc5b866" title="Sets&#45;up the thread simulator context : fills it with the appropriate." alt="" coords="5,157,192,184"/>
<area shape="rect" href="exception_8cpp.html#a2f3d05f12e27c15623b3d6a0e3813677" title=" " alt="" coords="607,323,727,349"/>
<area shape="rect" href="exception_8cpp.html#a467d8e83c5db03566d20ee929c7d7c1f" title=" " alt="" coords="609,411,724,437"/>
<area shape="rect" href="main_8cpp.html#a42300b7160fd87b4a003e05cfa902ae4" title=" " alt="" coords="1573,5,1623,32"/>
<area shape="rect" href="classProcess.html#acc8b64d45800f641a937ca447f080d10" title=" " alt="" coords="1535,56,1661,83"/>
</map>
</div>

</div>
</div>
<a id="a798400dbcaaef6d6dde5e63fcc500a60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a798400dbcaaef6d6dde5e63fcc500a60">&#9670;&nbsp;</a></span>GetFreeMapFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOpenFile.html">OpenFile</a> * FileSystem::GetFreeMapFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the free map table. </p>
<p>return the free map file (used by the open file table). </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_a798400dbcaaef6d6dde5e63fcc500a60_icgraph.png" border="0" usemap="#classFileSystem_a798400dbcaaef6d6dde5e63fcc500a60_icgraph" alt=""/></div>
<map name="classFileSystem_a798400dbcaaef6d6dde5e63fcc500a60_icgraph" id="classFileSystem_a798400dbcaaef6d6dde5e63fcc500a60_icgraph">
<area shape="rect" title="Get the free map table." alt="" coords="2301,406,2491,432"/>
<area shape="rect" href="classOpenFile.html#ad4b5d26a169a7c22e6f27c1693adb1aa" title=" " alt="" coords="2127,352,2253,379"/>
<area shape="rect" href="classOpenFileTableEntry.html#a3db43ff60517c9949bb89a499c7304a8" title=" " alt="" coords="1731,505,1883,546"/>
<area shape="rect" href="classOpenFile.html#a2de8d2d805fef3510bfd2fdf46f683fa" title=" " alt="" coords="1750,48,1863,75"/>
<area shape="rect" href="classBitMap.html#a19052d41ba5a654c7e478582dffba20d" title="fetch contents from disk" alt="" coords="1941,352,2073,379"/>
<area shape="rect" href="classDirectory.html#abf5550df42587bbc604c71441a4d12fc" title="Write modifications to directory contents back to disk." alt="" coords="1936,251,2079,278"/>
<area shape="rect" href="main_8cpp.html#a8e00c17571a60a78f108e1b56b300e1f" title=" " alt="" coords="1572,150,1624,176"/>
<area shape="rect" href="machine_8hpp.html#af31c84fcf9811fc72614abc2be3b5a44" title="Entry point into Nachos to handle user system calls and exceptions." alt="" coords="1347,200,1471,227"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="1383,276,1434,303"/>
<area shape="rect" href="classMachine.html#a0d6f63790c0568437b100171f61fd77f" title="Do a pending delayed load (modifying a reg)" alt="" coords="1128,99,1299,126"/>
<area shape="rect" href="classMachine.html#ad70a015685c6e4bf705e4939551774aa" title=" " alt="" coords="585,99,748,126"/>
<area shape="rect" href="classMMU.html#a28a50bd03688bc05aa15f93e4abf61a7" title=" " alt="" coords="797,175,917,202"/>
<area shape="rect" href="classMMU.html#aa2ddea5dcd1648aba21ac1a75c79dc25" title=" " alt="" coords="965,48,1080,75"/>
<area shape="rect" href="classMMU.html#a60227cf48e6778a4c66d8a13fd2f1539" title=" " alt="" coords="796,23,917,50"/>
<area shape="rect" href="classMachine.html#a83444e06eb7a7c163a1b9c87a7062d43" title="Destructor. De&#45;allocate the data structures." alt="" coords="435,99,537,126"/>
<area shape="rect" href="thread_8cpp.html#a014c1a99794f74ed079b0dde1f7efe8d" title=" " alt="" coords="240,99,387,126"/>
<area shape="rect" href="classThread.html#ad6d5edb1a6d2a9effbb442883fc5b866" title="Sets&#45;up the thread simulator context : fills it with the appropriate." alt="" coords="5,99,192,126"/>
<area shape="rect" href="exception_8cpp.html#a2f3d05f12e27c15623b3d6a0e3813677" title=" " alt="" coords="607,214,727,240"/>
<area shape="rect" href="exception_8cpp.html#a467d8e83c5db03566d20ee929c7d7c1f" title=" " alt="" coords="609,302,724,328"/>
<area shape="rect" href="classFileSystem.html#ac789d58815881d7f193d86085b0f54aa" title="Create a file (UNIX creat)" alt="" coords="1739,99,1874,126"/>
<area shape="rect" href="classFileSystem.html#a12d63294322b37e934edd03ff614b95a" title=" " alt="" coords="1725,302,1888,328"/>
<area shape="rect" href="classFileSystem.html#a9b4f11a12aed939e691edd6d591a8fcf" title="Create a new directory." alt="" coords="1534,302,1662,328"/>
<area shape="rect" href="classFileSystem.html#a52e69a068c68c6c84f02c80fd4c5389e" title="Delete a file (UNIX unlink)" alt="" coords="1735,352,1878,379"/>
<area shape="rect" href="classFileSystem.html#ae5cbf7822080d1c9bb606b5d74dd4ee5" title="Delete a directory." alt="" coords="1533,251,1663,278"/>
<area shape="rect" href="classOpenFileTable.html#a004541913ef8deb24d571c20d2020175" title="remove the file from the file system" alt="" coords="1519,200,1677,227"/>
</map>
</div>

</div>
</div>
<a id="aaf76918c6f0d24bc72aaa84625adfddf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf76918c6f0d24bc72aaa84625adfddf">&#9670;&nbsp;</a></span>List()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FileSystem::List </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classList.html" title="Definition of a generic single-linked &quot;list&quot;.">List</a> all the files in the file system. </p>
<p><a class="el" href="classList.html" title="Definition of a generic single-linked &quot;list&quot;.">List</a> all the files in the file system directory. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_aaf76918c6f0d24bc72aaa84625adfddf_cgraph.png" border="0" usemap="#classFileSystem_aaf76918c6f0d24bc72aaa84625adfddf_cgraph" alt=""/></div>
<map name="classFileSystem_aaf76918c6f0d24bc72aaa84625adfddf_cgraph" id="classFileSystem_aaf76918c6f0d24bc72aaa84625adfddf_cgraph">
<area shape="rect" title="List all the files in the file system." alt="" coords="5,144,123,171"/>
<area shape="rect" href="classBitMap.html#ad6d12eefec9b64e903d072c83f7c29a2" title="Print contents of bitmap." alt="" coords="171,56,305,83"/>
<area shape="rect" href="classDirectory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title="Init directory contents from disk." alt="" coords="353,107,499,133"/>
<area shape="rect" href="classDirectory.html#a2525a4455b80a1ee2648319ab257037c" title="Print the names of all the files in the directory." alt="" coords="187,181,289,208"/>
<area shape="rect" href="classBitMap.html#af73514736aff03229d58557d0423daca" title="Return the # of a clear bit, and as a side effect, set the bit. If no bits are clear,..." alt="" coords="174,232,302,259"/>
<area shape="rect" href="classOpenFile.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="547,81,672,108"/>
<area shape="rect" href="classFileHeader.html#adacbe1c1af441d0b1e978c65a05d60f2" title="Convert a byte offset into the file to the disk sector containing the byte." alt="" coords="720,5,891,32"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="1375,208,1443,235"/>
<area shape="rect" href="classFileHeader.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="729,107,881,133"/>
<area shape="rect" href="classDriverDisk.html#a2e93ba9a36bba4e8b3eeb43f877b2395" title="Read a disk sector, returning only once the data is actually read." alt="" coords="727,335,883,361"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="1545,284,1661,311"/>
<area shape="rect" href="classLock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="955,411,1057,437"/>
<area shape="rect" href="classSemaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="953,461,1059,488"/>
<area shape="rect" href="classDisk.html#a8b51a82d4f2fd009335d0c591ae11042" title=" " alt="" coords="939,360,1073,387"/>
<area shape="rect" href="classLock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="953,309,1059,336"/>
<area shape="rect" href="classDisk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="1132,680,1287,707"/>
<area shape="rect" href="disk_8cpp.html#a03b355bcf0d41c1fdeb1c69fb067fc1a" title="dummy procedure because we can&#39;t take a pointer of a member function" alt="" coords="1170,461,1249,488"/>
<area shape="rect" href="classThread.html#ade294fd013100034bebd745d8ffb1f94" title="Returns the process owner." alt="" coords="1122,512,1297,539"/>
<area shape="rect" href="classProcessStat.html#a8114ba343d15b3a29be80eff5a094f79" title=" " alt="" coords="1121,563,1297,605"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="1181,629,1238,656"/>
<area shape="rect" href="disk_8cpp.html#a3f97a10c00c77d969f5ec6423403b6cc" title="Dump the data in a disk read/write request, for debugging only." alt="" coords="1166,157,1253,184"/>
<area shape="rect" href="sysdep_8cpp.html#a6140dcc97ab52a9406e6d3f5749fa43c" title="Read characters from an open file. Abort if read fails." alt="" coords="1183,208,1235,235"/>
<area shape="rect" href="classInterrupt.html#ac403a14a9e41fa2b6dbd5c6056b87389" title="Print interrupt state." alt="" coords="1144,309,1275,336"/>
<area shape="rect" href="classDisk.html#aa87426eeedc8cf390fa4b293ecd34b42" title=" " alt="" coords="1148,411,1271,437"/>
<area shape="rect" href="classStatistics.html#a77aec82b7adb8d795c850db96c82f5d8" title=" " alt="" coords="1521,436,1684,463"/>
<area shape="rect" href="classDisk.html#abf14ace693df2b08e1187045305e81a5" title="time to get to the new track" alt="" coords="1351,680,1467,707"/>
<area shape="rect" href="classDisk.html#abecdf19e160925b1bc9b4542c90de2ac" title=" " alt="" coords="1345,461,1473,488"/>
<area shape="rect" href="classList.html#a7c94145ed3ab4115dd2a87e25eeadc91" title=" " alt="" coords="1349,259,1470,285"/>
<area shape="rect" href="classOpenFile.html#aaa8600eb2b54645780d5a6208ad85762" title="return true if the file is a directory" alt="" coords="372,181,480,208"/>
<area shape="rect" href="classFileHeader.html#ae43a97c41cef7b52a01c5d1da28ed3fa" title=" " alt="" coords="550,181,669,208"/>
<area shape="rect" href="classBitMap.html#af5a945ba7b79e92a5a1bb0db24ecf26a" title="Clear the &quot;nth&quot; bit." alt="" coords="378,232,474,259"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_aaf76918c6f0d24bc72aaa84625adfddf_icgraph.png" border="0" usemap="#classFileSystem_aaf76918c6f0d24bc72aaa84625adfddf_icgraph" alt=""/></div>
<map name="classFileSystem_aaf76918c6f0d24bc72aaa84625adfddf_icgraph" id="classFileSystem_aaf76918c6f0d24bc72aaa84625adfddf_icgraph">
<area shape="rect" title="List all the files in the file system." alt="" coords="1519,201,1636,228"/>
<area shape="rect" href="machine_8hpp.html#af31c84fcf9811fc72614abc2be3b5a44" title="Entry point into Nachos to handle user system calls and exceptions." alt="" coords="1347,176,1471,203"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="1383,227,1434,253"/>
<area shape="rect" href="classMachine.html#a0d6f63790c0568437b100171f61fd77f" title="Do a pending delayed load (modifying a reg)" alt="" coords="1128,75,1299,101"/>
<area shape="rect" href="classMachine.html#ad70a015685c6e4bf705e4939551774aa" title=" " alt="" coords="585,24,748,51"/>
<area shape="rect" href="classMMU.html#a28a50bd03688bc05aa15f93e4abf61a7" title=" " alt="" coords="797,151,917,177"/>
<area shape="rect" href="classMMU.html#aa2ddea5dcd1648aba21ac1a75c79dc25" title=" " alt="" coords="965,75,1080,101"/>
<area shape="rect" href="classMMU.html#a60227cf48e6778a4c66d8a13fd2f1539" title=" " alt="" coords="796,24,917,51"/>
<area shape="rect" href="classMachine.html#a83444e06eb7a7c163a1b9c87a7062d43" title="Destructor. De&#45;allocate the data structures." alt="" coords="435,24,537,51"/>
<area shape="rect" href="thread_8cpp.html#a014c1a99794f74ed079b0dde1f7efe8d" title=" " alt="" coords="240,24,387,51"/>
<area shape="rect" href="classThread.html#ad6d5edb1a6d2a9effbb442883fc5b866" title="Sets&#45;up the thread simulator context : fills it with the appropriate." alt="" coords="5,24,192,51"/>
<area shape="rect" href="exception_8cpp.html#a2f3d05f12e27c15623b3d6a0e3813677" title=" " alt="" coords="607,189,727,216"/>
<area shape="rect" href="exception_8cpp.html#a467d8e83c5db03566d20ee929c7d7c1f" title=" " alt="" coords="609,240,724,267"/>
</map>
</div>

</div>
</div>
<a id="a9b4f11a12aed939e691edd6d591a8fcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b4f11a12aed939e691edd6d591a8fcf">&#9670;&nbsp;</a></span>Mkdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FileSystem::Mkdir </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dirname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new directory. </p>
<p>Create a directory in the Nachos file system (similar to UNIX create). A directory is a file containing a table of directory entries.</p>
<p>The steps to create a dirctory are: Make sure the name is valid and does not exist Create a file containing the directory entries mkdir fails if: dir already exists no free space for file header no free entry for dir in directory no free space for data blocks for the file</p>
<p>Note that this implementation assumes there is no concurrent access to the file system!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>is the name of directory to be created (NOT MODIFIED) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NO_ERROR if everything goes ok, an error code otherwise (see <a class="el" href="msgerror_8hpp.html" title="Defines the data structure to store error messages during a syscall process.">msgerror.hpp</a>) </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_a9b4f11a12aed939e691edd6d591a8fcf_cgraph.png" border="0" usemap="#classFileSystem_a9b4f11a12aed939e691edd6d591a8fcf_cgraph" alt=""/></div>
<map name="classFileSystem_a9b4f11a12aed939e691edd6d591a8fcf_cgraph" id="classFileSystem_a9b4f11a12aed939e691edd6d591a8fcf_cgraph">
<area shape="rect" title="Create a new directory." alt="" coords="5,418,133,445"/>
<area shape="rect" href="classDirectory.html#ab9f17b4081a08ca0f3f661b8d951153c" title="Add a file name into the directory." alt="" coords="200,140,305,166"/>
<area shape="rect" href="classFileHeader.html#a2fb90f63470e10c847393e124763fd1a" title=" " alt="" coords="614,89,753,116"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="1678,444,1746,470"/>
<area shape="rect" href="classBitMap.html#a031ad924663dcae2359403b3a76a9dd8" title="Is the &quot;nth&quot; bit set?" alt="" coords="845,89,941,116"/>
<area shape="rect" href="classBitMap.html#ad6d12eefec9b64e903d072c83f7c29a2" title="Print contents of bitmap." alt="" coords="616,798,751,825"/>
<area shape="rect" href="classDirectory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title="Init directory contents from disk." alt="" coords="382,596,527,622"/>
<area shape="rect" href="classDirectory.html#aa0072462a745ab1bc84e36a810ce7cc5" title="Find the sector number of the FileHeader for file: &quot;name&quot;." alt="" coords="401,190,508,217"/>
<area shape="rect" href="filesys_8cpp.html#a6aea4042690035ff4b4b4531ccca4dc1" title=" " alt="" coords="221,393,284,420"/>
<area shape="rect" href="classFileHeader.html#a1099a20b5ca3009ba75ba05492528682" title="Mark this header as a directory header." alt="" coords="189,545,317,572"/>
<area shape="rect" href="classBitMap.html#a19052d41ba5a654c7e478582dffba20d" title="fetch contents from disk" alt="" coords="187,444,319,470"/>
<area shape="rect" href="classFileHeader.html#ab896cc7dd7274e3f8072da2c7d9beee8" title="Write modifications to file header back to disk." alt="" coords="607,849,760,876"/>
<area shape="rect" href="classDirectory.html#abf5550df42587bbc604c71441a4d12fc" title="Write modifications to directory contents back to disk." alt="" coords="181,494,324,521"/>
<area shape="rect" href="classDirectory.html#abab8ff05c1dedadbaac7b44730eeb5a4" title="Find the index into the directory table corresponding to &quot;name&quot;." alt="" coords="614,140,753,166"/>
<area shape="rect" href="classBitMap.html#af73514736aff03229d58557d0423daca" title="Return the # of a clear bit, and as a side effect, set the bit. If no bits are clear,..." alt="" coords="829,140,957,166"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="1841,713,1957,740"/>
<area shape="rect" href="classBitMap.html#ae3eb006c755440ae830bf220457dbbc7" title="De&#45;allocate bitmap." alt="" coords="1041,89,1141,116"/>
<area shape="rect" href="classBitMap.html#af5a945ba7b79e92a5a1bb0db24ecf26a" title="Clear the &quot;nth&quot; bit." alt="" coords="1043,140,1139,166"/>
<area shape="rect" href="classOpenFile.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="831,646,956,673"/>
<area shape="rect" href="classFileHeader.html#adacbe1c1af441d0b1e978c65a05d60f2" title="Convert a byte offset into the file to the disk sector containing the byte." alt="" coords="1005,393,1176,420"/>
<area shape="rect" href="classFileHeader.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="1015,444,1167,470"/>
<area shape="rect" href="classDriverDisk.html#a2e93ba9a36bba4e8b3eeb43f877b2395" title="Read a disk sector, returning only once the data is actually read." alt="" coords="1013,781,1169,808"/>
<area shape="rect" href="classLock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="1240,908,1343,934"/>
<area shape="rect" href="classSemaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="1239,857,1344,884"/>
<area shape="rect" href="classDisk.html#a8b51a82d4f2fd009335d0c591ae11042" title=" " alt="" coords="1224,756,1359,782"/>
<area shape="rect" href="classLock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="1239,806,1344,833"/>
<area shape="rect" href="classDisk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="1417,1017,1572,1044"/>
<area shape="rect" href="disk_8cpp.html#a03b355bcf0d41c1fdeb1c69fb067fc1a" title="dummy procedure because we can&#39;t take a pointer of a member function" alt="" coords="1455,865,1534,892"/>
<area shape="rect" href="classThread.html#ade294fd013100034bebd745d8ffb1f94" title="Returns the process owner." alt="" coords="1407,764,1582,790"/>
<area shape="rect" href="classProcessStat.html#a8114ba343d15b3a29be80eff5a094f79" title=" " alt="" coords="1407,596,1583,638"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="1466,1118,1523,1145"/>
<area shape="rect" href="disk_8cpp.html#a3f97a10c00c77d969f5ec6423403b6cc" title="Dump the data in a disk read/write request, for debugging only." alt="" coords="1451,814,1538,841"/>
<area shape="rect" href="sysdep_8cpp.html#a6140dcc97ab52a9406e6d3f5749fa43c" title="Read characters from an open file. Abort if read fails." alt="" coords="1469,662,1521,689"/>
<area shape="rect" href="classInterrupt.html#ac403a14a9e41fa2b6dbd5c6056b87389" title="Print interrupt state." alt="" coords="1429,966,1560,993"/>
<area shape="rect" href="classDisk.html#aa87426eeedc8cf390fa4b293ecd34b42" title=" " alt="" coords="1433,1068,1556,1094"/>
<area shape="rect" href="classStatistics.html#a77aec82b7adb8d795c850db96c82f5d8" title=" " alt="" coords="1631,992,1793,1018"/>
<area shape="rect" href="classDisk.html#abf14ace693df2b08e1187045305e81a5" title="time to get to the new track" alt="" coords="1654,1042,1770,1069"/>
<area shape="rect" href="filesys_8cpp.html#adf9153e1a224b6785fb5e88446cfc332" title=" " alt="" coords="405,292,505,318"/>
<area shape="rect" href="classFileSystem.html#a118ce47f3ef95d3e930572c20836d327" title="Get the root directory." alt="" coords="377,342,532,369"/>
<area shape="rect" href="classOpenFile.html#a2c9c2e3e078fc71c99e0f589493fa28e" title="return the file&#39;s header" alt="" coords="372,393,537,420"/>
<area shape="rect" href="classFileHeader.html#ae43a97c41cef7b52a01c5d1da28ed3fa" title=" " alt="" coords="395,444,514,470"/>
<area shape="rect" href="classOpenFile.html#ad4b5d26a169a7c22e6f27c1693adb1aa" title=" " alt="" coords="391,545,518,572"/>
<area shape="rect" href="classFileHeader.html#a8dcba7e634e37555f08c39dd9c63597a" title=" " alt="" coords="585,494,781,521"/>
<area shape="rect" href="classFileSystem.html#a798400dbcaaef6d6dde5e63fcc500a60" title="Get the free map table." alt="" coords="589,545,778,572"/>
<area shape="rect" href="classFileHeader.html#aeff760f3edaad0bfb6862a4e93b005c6" title=" " alt="" coords="595,596,772,622"/>
<area shape="rect" href="classFileHeader.html#afa31f3a959a74b0134a544858021457f" title=" " alt="" coords="608,190,759,217"/>
<area shape="rect" href="classDriverDisk.html#a74426214379e50aa0d8a7b19084887ee" title="write a disk sector, returning only once the data is actually written." alt="" coords="1012,849,1169,876"/>
<area shape="rect" href="classDisk.html#aec33797c6480a8c919fc7d340c316abe" title=" " alt="" coords="1224,992,1359,1018"/>
<area shape="rect" href="classProcessStat.html#ad8f0597460874ad1dcf515fa3b58b9c8" title=" " alt="" coords="1407,1220,1583,1262"/>
<area shape="rect" href="sysdep_8cpp.html#a423758a22b76ab4ab8dce5afd92b83cd" title="Write characters to an open file. Abort if write fails." alt="" coords="1457,1169,1532,1196"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_a9b4f11a12aed939e691edd6d591a8fcf_icgraph.png" border="0" usemap="#classFileSystem_a9b4f11a12aed939e691edd6d591a8fcf_icgraph" alt=""/></div>
<map name="classFileSystem_a9b4f11a12aed939e691edd6d591a8fcf_icgraph" id="classFileSystem_a9b4f11a12aed939e691edd6d591a8fcf_icgraph">
<area shape="rect" title="Create a new directory." alt="" coords="1519,201,1647,228"/>
<area shape="rect" href="machine_8hpp.html#af31c84fcf9811fc72614abc2be3b5a44" title="Entry point into Nachos to handle user system calls and exceptions." alt="" coords="1347,176,1471,203"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="1383,227,1434,253"/>
<area shape="rect" href="classMachine.html#a0d6f63790c0568437b100171f61fd77f" title="Do a pending delayed load (modifying a reg)" alt="" coords="1128,75,1299,101"/>
<area shape="rect" href="classMachine.html#ad70a015685c6e4bf705e4939551774aa" title=" " alt="" coords="585,24,748,51"/>
<area shape="rect" href="classMMU.html#a28a50bd03688bc05aa15f93e4abf61a7" title=" " alt="" coords="797,151,917,177"/>
<area shape="rect" href="classMMU.html#aa2ddea5dcd1648aba21ac1a75c79dc25" title=" " alt="" coords="965,75,1080,101"/>
<area shape="rect" href="classMMU.html#a60227cf48e6778a4c66d8a13fd2f1539" title=" " alt="" coords="796,24,917,51"/>
<area shape="rect" href="classMachine.html#a83444e06eb7a7c163a1b9c87a7062d43" title="Destructor. De&#45;allocate the data structures." alt="" coords="435,24,537,51"/>
<area shape="rect" href="thread_8cpp.html#a014c1a99794f74ed079b0dde1f7efe8d" title=" " alt="" coords="240,24,387,51"/>
<area shape="rect" href="classThread.html#ad6d5edb1a6d2a9effbb442883fc5b866" title="Sets&#45;up the thread simulator context : fills it with the appropriate." alt="" coords="5,24,192,51"/>
<area shape="rect" href="exception_8cpp.html#a2f3d05f12e27c15623b3d6a0e3813677" title=" " alt="" coords="607,189,727,216"/>
<area shape="rect" href="exception_8cpp.html#a467d8e83c5db03566d20ee929c7d7c1f" title=" " alt="" coords="609,240,724,267"/>
</map>
</div>

</div>
</div>
<a id="a606ea080a2a0fe5e3be3c3f5b8f4e7bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a606ea080a2a0fe5e3be3c3f5b8f4e7bc">&#9670;&nbsp;</a></span>Open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOpenFile.html">OpenFile</a> * FileSystem::Open </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a file (UNIX open) </p>
<p>Open a file for reading and writing. <br  />
 To open a file: Find the location of the file's header, using the directory Bring the header into memory</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the text name of the file to be opened (NOT MODIFIED) </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_a606ea080a2a0fe5e3be3c3f5b8f4e7bc_cgraph.png" border="0" usemap="#classFileSystem_a606ea080a2a0fe5e3be3c3f5b8f4e7bc_cgraph" alt=""/></div>
<map name="classFileSystem_a606ea080a2a0fe5e3be3c3f5b8f4e7bc_cgraph" id="classFileSystem_a606ea080a2a0fe5e3be3c3f5b8f4e7bc_cgraph">
<area shape="rect" title="Open a file (UNIX open)" alt="" coords="5,220,132,247"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="1419,245,1487,272"/>
<area shape="rect" href="classDirectory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title="Init directory contents from disk." alt="" coords="374,296,519,323"/>
<area shape="rect" href="classDirectory.html#aa0072462a745ab1bc84e36a810ce7cc5" title="Find the sector number of the FileHeader for file: &quot;name&quot;." alt="" coords="393,43,500,69"/>
<area shape="rect" href="filesys_8cpp.html#a6aea4042690035ff4b4b4531ccca4dc1" title=" " alt="" coords="217,195,279,221"/>
<area shape="rect" href="classOpenFile.html#aaa8600eb2b54645780d5a6208ad85762" title="return true if the file is a directory" alt="" coords="194,296,302,323"/>
<area shape="rect" href="classOpenFile.html#a55f2403097b272cec23712007d4a11b5" title="Set the file&#39;s name." alt="" coords="180,347,316,373"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="1589,469,1705,496"/>
<area shape="rect" href="classOpenFile.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="584,245,709,272"/>
<area shape="rect" href="classFileHeader.html#adacbe1c1af441d0b1e978c65a05d60f2" title="Convert a byte offset into the file to the disk sector containing the byte." alt="" coords="764,195,935,221"/>
<area shape="rect" href="classFileHeader.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="773,245,925,272"/>
<area shape="rect" href="classDriverDisk.html#a2e93ba9a36bba4e8b3eeb43f877b2395" title="Read a disk sector, returning only once the data is actually read." alt="" coords="771,296,927,323"/>
<area shape="rect" href="classLock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="999,296,1101,323"/>
<area shape="rect" href="classSemaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="997,347,1103,373"/>
<area shape="rect" href="classDisk.html#a8b51a82d4f2fd009335d0c591ae11042" title=" " alt="" coords="983,515,1117,541"/>
<area shape="rect" href="classLock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="997,195,1103,221"/>
<area shape="rect" href="classDisk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="1176,793,1331,820"/>
<area shape="rect" href="disk_8cpp.html#a03b355bcf0d41c1fdeb1c69fb067fc1a" title="dummy procedure because we can&#39;t take a pointer of a member function" alt="" coords="1214,321,1293,348"/>
<area shape="rect" href="classThread.html#ade294fd013100034bebd745d8ffb1f94" title="Returns the process owner." alt="" coords="1166,372,1341,399"/>
<area shape="rect" href="classProcessStat.html#a8114ba343d15b3a29be80eff5a094f79" title=" " alt="" coords="1165,423,1341,465"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="1225,489,1282,516"/>
<area shape="rect" href="disk_8cpp.html#a3f97a10c00c77d969f5ec6423403b6cc" title="Dump the data in a disk read/write request, for debugging only." alt="" coords="1210,540,1297,567"/>
<area shape="rect" href="sysdep_8cpp.html#a6140dcc97ab52a9406e6d3f5749fa43c" title="Read characters from an open file. Abort if read fails." alt="" coords="1227,591,1279,617"/>
<area shape="rect" href="classInterrupt.html#ac403a14a9e41fa2b6dbd5c6056b87389" title="Print interrupt state." alt="" coords="1188,641,1319,668"/>
<area shape="rect" href="classDisk.html#aa87426eeedc8cf390fa4b293ecd34b42" title=" " alt="" coords="1192,743,1315,769"/>
<area shape="rect" href="classStatistics.html#a77aec82b7adb8d795c850db96c82f5d8" title=" " alt="" coords="1565,768,1728,795"/>
<area shape="rect" href="classDisk.html#abf14ace693df2b08e1187045305e81a5" title="time to get to the new track" alt="" coords="1395,895,1511,921"/>
<area shape="rect" href="classDisk.html#abecdf19e160925b1bc9b4542c90de2ac" title=" " alt="" coords="1389,793,1517,820"/>
<area shape="rect" href="classList.html#a7c94145ed3ab4115dd2a87e25eeadc91" title=" " alt="" coords="1393,591,1514,617"/>
<area shape="rect" href="classDirectory.html#abab8ff05c1dedadbaac7b44730eeb5a4" title="Find the index into the directory table corresponding to &quot;name&quot;." alt="" coords="577,43,716,69"/>
<area shape="rect" href="filesys_8cpp.html#adf9153e1a224b6785fb5e88446cfc332" title=" " alt="" coords="397,195,497,221"/>
<area shape="rect" href="classFileSystem.html#a118ce47f3ef95d3e930572c20836d327" title="Get the root directory." alt="" coords="369,245,524,272"/>
<area shape="rect" href="classOpenFile.html#a2c9c2e3e078fc71c99e0f589493fa28e" title="return the file&#39;s header" alt="" coords="364,144,529,171"/>
<area shape="rect" href="classFileHeader.html#ae43a97c41cef7b52a01c5d1da28ed3fa" title=" " alt="" coords="387,347,506,373"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_a606ea080a2a0fe5e3be3c3f5b8f4e7bc_icgraph.png" border="0" usemap="#classFileSystem_a606ea080a2a0fe5e3be3c3f5b8f4e7bc_icgraph" alt=""/></div>
<map name="classFileSystem_a606ea080a2a0fe5e3be3c3f5b8f4e7bc_icgraph" id="classFileSystem_a606ea080a2a0fe5e3be3c3f5b8f4e7bc_icgraph">
<area shape="rect" title="Open a file (UNIX open)" alt="" coords="279,56,405,83"/>
<area shape="rect" href="main_8cpp.html#a8e00c17571a60a78f108e1b56b300e1f" title=" " alt="" coords="141,5,193,32"/>
<area shape="rect" href="main_8cpp.html#a42300b7160fd87b4a003e05cfa902ae4" title=" " alt="" coords="143,56,192,83"/>
<area shape="rect" href="classProcess.html#acc8b64d45800f641a937ca447f080d10" title=" " alt="" coords="104,107,231,133"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,31,56,57"/>
</map>
</div>

</div>
</div>
<a id="aebaf06661b1879a62afefa5abe99f21e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebaf06661b1879a62afefa5abe99f21e">&#9670;&nbsp;</a></span>Print()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FileSystem::Print </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classList.html" title="Definition of a generic single-linked &quot;list&quot;.">List</a> all the files and their contents. </p>
<p>Print everything about the file system: the contents of the bitmap the contents of the directory for each file in the directory, the contents of the file header the data in the file </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_aebaf06661b1879a62afefa5abe99f21e_cgraph.png" border="0" usemap="#classFileSystem_aebaf06661b1879a62afefa5abe99f21e_cgraph" alt=""/></div>
<map name="classFileSystem_aebaf06661b1879a62afefa5abe99f21e_cgraph" id="classFileSystem_aebaf06661b1879a62afefa5abe99f21e_cgraph">
<area shape="rect" title="List all the files and their contents." alt="" coords="5,231,128,258"/>
<area shape="rect" href="classBitMap.html#ad6d12eefec9b64e903d072c83f7c29a2" title="Print contents of bitmap." alt="" coords="181,105,316,131"/>
<area shape="rect" href="classDirectory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title="Init directory contents from disk." alt="" coords="176,155,321,182"/>
<area shape="rect" href="classFileHeader.html#aa85564cee98fc9592df08cc5e4a2efc6" title="Initialize file header from disk." alt="" coords="369,231,524,258"/>
<area shape="rect" href="classBitMap.html#a04d9c800f2a3b815f47d22c149ceae01" title="Return the number of clear bits." alt="" coords="199,358,298,385"/>
<area shape="rect" href="classDirectory.html#a40c728221c5557e4fc181c4091c6fcff" title="Verbose print of the contents of the directory – all the file names and their contents." alt="" coords="194,257,303,283"/>
<area shape="rect" href="classFileHeader.html#a57b661cda2c4d51ee06cc29e7ea0a0c0" title="Print the contents of the file." alt="" coords="387,282,506,309"/>
<area shape="rect" href="classOpenFile.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="384,130,509,157"/>
<area shape="rect" href="classFileHeader.html#adacbe1c1af441d0b1e978c65a05d60f2" title="Convert a byte offset into the file to the disk sector containing the byte." alt="" coords="572,155,743,182"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="1227,130,1295,157"/>
<area shape="rect" href="classFileHeader.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="581,105,733,131"/>
<area shape="rect" href="classDriverDisk.html#a2e93ba9a36bba4e8b3eeb43f877b2395" title="Read a disk sector, returning only once the data is actually read." alt="" coords="579,257,735,283"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="1397,206,1513,233"/>
<area shape="rect" href="classLock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="807,333,909,359"/>
<area shape="rect" href="classSemaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="805,383,911,410"/>
<area shape="rect" href="classDisk.html#a8b51a82d4f2fd009335d0c591ae11042" title=" " alt="" coords="791,282,925,309"/>
<area shape="rect" href="classLock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="805,231,911,258"/>
<area shape="rect" href="classDisk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="984,602,1139,629"/>
<area shape="rect" href="disk_8cpp.html#a03b355bcf0d41c1fdeb1c69fb067fc1a" title="dummy procedure because we can&#39;t take a pointer of a member function" alt="" coords="1022,383,1101,410"/>
<area shape="rect" href="classThread.html#ade294fd013100034bebd745d8ffb1f94" title="Returns the process owner." alt="" coords="974,434,1149,461"/>
<area shape="rect" href="classProcessStat.html#a8114ba343d15b3a29be80eff5a094f79" title=" " alt="" coords="973,485,1149,527"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="1033,551,1090,578"/>
<area shape="rect" href="disk_8cpp.html#a3f97a10c00c77d969f5ec6423403b6cc" title="Dump the data in a disk read/write request, for debugging only." alt="" coords="1018,79,1105,106"/>
<area shape="rect" href="sysdep_8cpp.html#a6140dcc97ab52a9406e6d3f5749fa43c" title="Read characters from an open file. Abort if read fails." alt="" coords="1035,130,1087,157"/>
<area shape="rect" href="classInterrupt.html#ac403a14a9e41fa2b6dbd5c6056b87389" title="Print interrupt state." alt="" coords="996,231,1127,258"/>
<area shape="rect" href="classDisk.html#aa87426eeedc8cf390fa4b293ecd34b42" title=" " alt="" coords="1000,333,1123,359"/>
<area shape="rect" href="classStatistics.html#a77aec82b7adb8d795c850db96c82f5d8" title=" " alt="" coords="1373,358,1536,385"/>
<area shape="rect" href="classDisk.html#abf14ace693df2b08e1187045305e81a5" title="time to get to the new track" alt="" coords="1203,602,1319,629"/>
<area shape="rect" href="classDisk.html#abecdf19e160925b1bc9b4542c90de2ac" title=" " alt="" coords="1197,383,1325,410"/>
<area shape="rect" href="classList.html#a7c94145ed3ab4115dd2a87e25eeadc91" title=" " alt="" coords="1201,181,1322,207"/>
<area shape="rect" href="classBitMap.html#af5a945ba7b79e92a5a1bb0db24ecf26a" title="Clear the &quot;nth&quot; bit." alt="" coords="399,358,495,385"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_aebaf06661b1879a62afefa5abe99f21e_icgraph.png" border="0" usemap="#classFileSystem_aebaf06661b1879a62afefa5abe99f21e_icgraph" alt=""/></div>
<map name="classFileSystem_aebaf06661b1879a62afefa5abe99f21e_icgraph" id="classFileSystem_aebaf06661b1879a62afefa5abe99f21e_icgraph">
<area shape="rect" title="List all the files and their contents." alt="" coords="104,5,227,32"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="a52e69a068c68c6c84f02c80fd4c5389e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52e69a068c68c6c84f02c80fd4c5389e">&#9670;&nbsp;</a></span>Remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FileSystem::Remove </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a file (UNIX unlink) </p>
<p>Delete a file from the file system. This requires: Remove it from the directory Delete the space for its header Delete the space for its data blocks Write changes to directory, bitmap back to disk</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the text name of the file to be removed (NOT MODIFIED) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NO_ERROR if the file was deleted, else an error code as defined in <a class="el" href="msgerror_8hpp.html" title="Defines the data structure to store error messages during a syscall process.">msgerror.hpp</a> </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_a52e69a068c68c6c84f02c80fd4c5389e_cgraph.png" border="0" usemap="#classFileSystem_a52e69a068c68c6c84f02c80fd4c5389e_cgraph" alt=""/></div>
<map name="classFileSystem_a52e69a068c68c6c84f02c80fd4c5389e_cgraph" id="classFileSystem_a52e69a068c68c6c84f02c80fd4c5389e_cgraph">
<area shape="rect" title="Delete a file (UNIX unlink)" alt="" coords="5,1029,148,1056"/>
<area shape="rect" href="classBitMap.html#aee4445b4d2079c96f5c87896717569d2" title="Set the &quot;nth&quot; bit." alt="" coords="429,396,531,423"/>
<area shape="rect" href="classFileHeader.html#a0d8a66db0af2460ccb27edd8d2331179" title="De&#45;allocate this file&#39;s." alt="" coords="196,447,349,473"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="1713,751,1781,777"/>
<area shape="rect" href="classBitMap.html#ad6d12eefec9b64e903d072c83f7c29a2" title="Print contents of bitmap." alt="" coords="641,1055,776,1081"/>
<area shape="rect" href="classDirectory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title="Init directory contents from disk." alt="" coords="407,1055,553,1081"/>
<area shape="rect" href="classFileHeader.html#aa85564cee98fc9592df08cc5e4a2efc6" title="Initialize file header from disk." alt="" coords="855,700,1009,727"/>
<area shape="rect" href="classDirectory.html#aa0072462a745ab1bc84e36a810ce7cc5" title="Find the sector number of the FileHeader for file: &quot;name&quot;." alt="" coords="427,1359,533,1385"/>
<area shape="rect" href="filesys_8cpp.html#a6aea4042690035ff4b4b4531ccca4dc1" title=" " alt="" coords="241,1181,304,1208"/>
<area shape="rect" href="classFileHeader.html#ae43a97c41cef7b52a01c5d1da28ed3fa" title=" " alt="" coords="421,1409,539,1436"/>
<area shape="rect" href="classDirectory.html#a38cd9f677e7110bab63fb943d118e3cc" title="Remove a file from the directory." alt="" coords="209,1460,337,1487"/>
<area shape="rect" href="classBitMap.html#a19052d41ba5a654c7e478582dffba20d" title="fetch contents from disk" alt="" coords="207,903,339,929"/>
<area shape="rect" href="classDirectory.html#abf5550df42587bbc604c71441a4d12fc" title="Write modifications to directory contents back to disk." alt="" coords="201,852,344,879"/>
<area shape="rect" href="classBitMap.html#af5a945ba7b79e92a5a1bb0db24ecf26a" title="Clear the &quot;nth&quot; bit." alt="" coords="1095,675,1191,701"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="1882,751,1998,777"/>
<area shape="rect" href="classOpenFile.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="869,1004,995,1031"/>
<area shape="rect" href="classFileHeader.html#adacbe1c1af441d0b1e978c65a05d60f2" title="Convert a byte offset into the file to the disk sector containing the byte." alt="" coords="1057,903,1228,929"/>
<area shape="rect" href="classFileHeader.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="1067,953,1219,980"/>
<area shape="rect" href="classDriverDisk.html#a2e93ba9a36bba4e8b3eeb43f877b2395" title="Read a disk sector, returning only once the data is actually read." alt="" coords="1065,725,1221,752"/>
<area shape="rect" href="classLock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="1292,751,1395,777"/>
<area shape="rect" href="classSemaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="1291,649,1396,676"/>
<area shape="rect" href="classDisk.html#a8b51a82d4f2fd009335d0c591ae11042" title=" " alt="" coords="1276,456,1411,483"/>
<area shape="rect" href="classLock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="1291,700,1396,727"/>
<area shape="rect" href="classDisk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="1469,127,1624,153"/>
<area shape="rect" href="disk_8cpp.html#a03b355bcf0d41c1fdeb1c69fb067fc1a" title="dummy procedure because we can&#39;t take a pointer of a member function" alt="" coords="1507,380,1586,407"/>
<area shape="rect" href="classThread.html#ade294fd013100034bebd745d8ffb1f94" title="Returns the process owner." alt="" coords="1459,431,1634,457"/>
<area shape="rect" href="classProcessStat.html#a8114ba343d15b3a29be80eff5a094f79" title=" " alt="" coords="1459,634,1635,675"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="1518,481,1575,508"/>
<area shape="rect" href="disk_8cpp.html#a3f97a10c00c77d969f5ec6423403b6cc" title="Dump the data in a disk read/write request, for debugging only." alt="" coords="1503,329,1590,356"/>
<area shape="rect" href="sysdep_8cpp.html#a6140dcc97ab52a9406e6d3f5749fa43c" title="Read characters from an open file. Abort if read fails." alt="" coords="1521,532,1573,559"/>
<area shape="rect" href="classInterrupt.html#ac403a14a9e41fa2b6dbd5c6056b87389" title="Print interrupt state." alt="" coords="1481,228,1612,255"/>
<area shape="rect" href="classDisk.html#aa87426eeedc8cf390fa4b293ecd34b42" title=" " alt="" coords="1485,51,1608,77"/>
<area shape="rect" href="classStatistics.html#a77aec82b7adb8d795c850db96c82f5d8" title=" " alt="" coords="1859,51,2021,77"/>
<area shape="rect" href="classDisk.html#abf14ace693df2b08e1187045305e81a5" title="time to get to the new track" alt="" coords="1689,127,1805,153"/>
<area shape="rect" href="classDisk.html#abecdf19e160925b1bc9b4542c90de2ac" title=" " alt="" coords="1683,25,1811,52"/>
<area shape="rect" href="classList.html#a7c94145ed3ab4115dd2a87e25eeadc91" title=" " alt="" coords="1686,279,1807,305"/>
<area shape="rect" href="classDirectory.html#abab8ff05c1dedadbaac7b44730eeb5a4" title="Find the index into the directory table corresponding to &quot;name&quot;." alt="" coords="639,1409,778,1436"/>
<area shape="rect" href="filesys_8cpp.html#adf9153e1a224b6785fb5e88446cfc332" title=" " alt="" coords="430,1257,530,1284"/>
<area shape="rect" href="classFileSystem.html#a118ce47f3ef95d3e930572c20836d327" title="Get the root directory." alt="" coords="403,1156,557,1183"/>
<area shape="rect" href="classOpenFile.html#a2c9c2e3e078fc71c99e0f589493fa28e" title="return the file&#39;s header" alt="" coords="397,1207,563,1233"/>
<area shape="rect" href="classOpenFile.html#ad4b5d26a169a7c22e6f27c1693adb1aa" title=" " alt="" coords="417,852,543,879"/>
<area shape="rect" href="classFileHeader.html#a8dcba7e634e37555f08c39dd9c63597a" title=" " alt="" coords="611,801,807,828"/>
<area shape="rect" href="classFileSystem.html#a798400dbcaaef6d6dde5e63fcc500a60" title="Get the free map table." alt="" coords="614,852,803,879"/>
<area shape="rect" href="classFileHeader.html#aeff760f3edaad0bfb6862a4e93b005c6" title=" " alt="" coords="620,903,797,929"/>
<area shape="rect" href="classFileHeader.html#afa31f3a959a74b0134a544858021457f" title=" " alt="" coords="633,700,784,727"/>
<area shape="rect" href="classFileHeader.html#ab896cc7dd7274e3f8072da2c7d9beee8" title="Write modifications to file header back to disk." alt="" coords="855,548,1009,575"/>
<area shape="rect" href="classDriverDisk.html#a74426214379e50aa0d8a7b19084887ee" title="write a disk sector, returning only once the data is actually written." alt="" coords="1064,599,1221,625"/>
<area shape="rect" href="classBitMap.html#a031ad924663dcae2359403b3a76a9dd8" title="Is the &quot;nth&quot; bit set?" alt="" coords="884,751,980,777"/>
<area shape="rect" href="classBitMap.html#af73514736aff03229d58557d0423daca" title="Return the # of a clear bit, and as a side effect, set the bit. If no bits are clear,..." alt="" coords="868,801,996,828"/>
<area shape="rect" href="classDisk.html#aec33797c6480a8c919fc7d340c316abe" title=" " alt="" coords="1276,304,1411,331"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_a52e69a068c68c6c84f02c80fd4c5389e_icgraph.png" border="0" usemap="#classFileSystem_a52e69a068c68c6c84f02c80fd4c5389e_icgraph" alt=""/></div>
<map name="classFileSystem_a52e69a068c68c6c84f02c80fd4c5389e_icgraph" id="classFileSystem_a52e69a068c68c6c84f02c80fd4c5389e_icgraph">
<area shape="rect" title="Delete a file (UNIX unlink)" alt="" coords="1725,151,1868,177"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="1573,125,1623,152"/>
<area shape="rect" href="classOpenFileTable.html#a004541913ef8deb24d571c20d2020175" title="remove the file from the file system" alt="" coords="1519,176,1677,203"/>
<area shape="rect" href="machine_8hpp.html#af31c84fcf9811fc72614abc2be3b5a44" title="Entry point into Nachos to handle user system calls and exceptions." alt="" coords="1347,176,1471,203"/>
<area shape="rect" href="classMachine.html#a0d6f63790c0568437b100171f61fd77f" title="Do a pending delayed load (modifying a reg)" alt="" coords="1128,75,1299,101"/>
<area shape="rect" href="classMachine.html#ad70a015685c6e4bf705e4939551774aa" title=" " alt="" coords="585,24,748,51"/>
<area shape="rect" href="classMMU.html#a28a50bd03688bc05aa15f93e4abf61a7" title=" " alt="" coords="797,151,917,177"/>
<area shape="rect" href="classMMU.html#aa2ddea5dcd1648aba21ac1a75c79dc25" title=" " alt="" coords="965,75,1080,101"/>
<area shape="rect" href="classMMU.html#a60227cf48e6778a4c66d8a13fd2f1539" title=" " alt="" coords="796,24,917,51"/>
<area shape="rect" href="classMachine.html#a83444e06eb7a7c163a1b9c87a7062d43" title="Destructor. De&#45;allocate the data structures." alt="" coords="435,24,537,51"/>
<area shape="rect" href="thread_8cpp.html#a014c1a99794f74ed079b0dde1f7efe8d" title=" " alt="" coords="240,24,387,51"/>
<area shape="rect" href="classThread.html#ad6d5edb1a6d2a9effbb442883fc5b866" title="Sets&#45;up the thread simulator context : fills it with the appropriate." alt="" coords="5,24,192,51"/>
<area shape="rect" href="exception_8cpp.html#a2f3d05f12e27c15623b3d6a0e3813677" title=" " alt="" coords="607,189,727,216"/>
<area shape="rect" href="exception_8cpp.html#a467d8e83c5db03566d20ee929c7d7c1f" title=" " alt="" coords="609,240,724,267"/>
</map>
</div>

</div>
</div>
<a id="ae5cbf7822080d1c9bb606b5d74dd4ee5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5cbf7822080d1c9bb606b5d74dd4ee5">&#9670;&nbsp;</a></span>Rmdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FileSystem::Rmdir </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dirname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a directory. </p>
<p>Delete a directory from the file system. This requires: check the name is valid check the directory is empty Remove it from its directory Delete the space for its header Delete the space for its data blocks Write changes to directory, bitmap back to disk</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">namedir</td><td>the text name of the directory to be removed (NOT MODIFIED) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NO_ERROR if the directory was deleted, else an error code (see <a class="el" href="msgerror_8hpp.html" title="Defines the data structure to store error messages during a syscall process.">msgerror.hpp</a>) </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_ae5cbf7822080d1c9bb606b5d74dd4ee5_cgraph.png" border="0" usemap="#classFileSystem_ae5cbf7822080d1c9bb606b5d74dd4ee5_cgraph" alt=""/></div>
<map name="classFileSystem_ae5cbf7822080d1c9bb606b5d74dd4ee5_cgraph" id="classFileSystem_ae5cbf7822080d1c9bb606b5d74dd4ee5_cgraph">
<area shape="rect" title="Delete a directory." alt="" coords="5,1114,136,1140"/>
<area shape="rect" href="classBitMap.html#aee4445b4d2079c96f5c87896717569d2" title="Set the &quot;nth&quot; bit." alt="" coords="417,430,519,456"/>
<area shape="rect" href="classFileHeader.html#a0d8a66db0af2460ccb27edd8d2331179" title="De&#45;allocate this file&#39;s." alt="" coords="184,480,337,507"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="1701,708,1769,735"/>
<area shape="rect" href="classDirectory.html#a2c415a2870e506317333c666ec013aa5" title="Tests if a directory is empty." alt="" coords="201,1468,320,1495"/>
<area shape="rect" href="classBitMap.html#ad6d12eefec9b64e903d072c83f7c29a2" title="Print contents of bitmap." alt="" coords="629,1088,764,1115"/>
<area shape="rect" href="classDirectory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title="Init directory contents from disk." alt="" coords="395,1114,541,1140"/>
<area shape="rect" href="classFileHeader.html#aa85564cee98fc9592df08cc5e4a2efc6" title="Initialize file header from disk." alt="" coords="843,734,997,760"/>
<area shape="rect" href="classDirectory.html#aa0072462a745ab1bc84e36a810ce7cc5" title="Find the sector number of the FileHeader for file: &quot;name&quot;." alt="" coords="415,1418,521,1444"/>
<area shape="rect" href="filesys_8cpp.html#a6aea4042690035ff4b4b4531ccca4dc1" title=" " alt="" coords="229,1266,292,1292"/>
<area shape="rect" href="classFileHeader.html#ae43a97c41cef7b52a01c5d1da28ed3fa" title=" " alt="" coords="409,1468,527,1495"/>
<area shape="rect" href="classDirectory.html#a38cd9f677e7110bab63fb943d118e3cc" title="Remove a file from the directory." alt="" coords="197,1418,325,1444"/>
<area shape="rect" href="classBitMap.html#a19052d41ba5a654c7e478582dffba20d" title="fetch contents from disk" alt="" coords="195,886,327,912"/>
<area shape="rect" href="classDirectory.html#abf5550df42587bbc604c71441a4d12fc" title="Write modifications to directory contents back to disk." alt="" coords="189,987,332,1014"/>
<area shape="rect" href="classBitMap.html#af5a945ba7b79e92a5a1bb0db24ecf26a" title="Clear the &quot;nth&quot; bit." alt="" coords="1083,531,1179,558"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="1870,582,1986,608"/>
<area shape="rect" href="classOpenFile.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="857,987,983,1014"/>
<area shape="rect" href="classFileHeader.html#adacbe1c1af441d0b1e978c65a05d60f2" title="Convert a byte offset into the file to the disk sector containing the byte." alt="" coords="1045,936,1216,963"/>
<area shape="rect" href="classFileHeader.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="1055,886,1207,912"/>
<area shape="rect" href="classDriverDisk.html#a2e93ba9a36bba4e8b3eeb43f877b2395" title="Read a disk sector, returning only once the data is actually read." alt="" coords="1053,784,1209,811"/>
<area shape="rect" href="classLock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="1280,835,1383,862"/>
<area shape="rect" href="classSemaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="1279,886,1384,912"/>
<area shape="rect" href="classDisk.html#a8b51a82d4f2fd009335d0c591ae11042" title=" " alt="" coords="1264,303,1399,330"/>
<area shape="rect" href="classLock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="1279,784,1384,811"/>
<area shape="rect" href="classDisk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="1457,227,1612,254"/>
<area shape="rect" href="disk_8cpp.html#a03b355bcf0d41c1fdeb1c69fb067fc1a" title="dummy procedure because we can&#39;t take a pointer of a member function" alt="" coords="1495,430,1574,456"/>
<area shape="rect" href="classThread.html#ade294fd013100034bebd745d8ffb1f94" title="Returns the process owner." alt="" coords="1447,531,1622,558"/>
<area shape="rect" href="classProcessStat.html#a8114ba343d15b3a29be80eff5a094f79" title=" " alt="" coords="1447,161,1623,202"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="1506,328,1563,355"/>
<area shape="rect" href="disk_8cpp.html#a3f97a10c00c77d969f5ec6423403b6cc" title="Dump the data in a disk read/write request, for debugging only." alt="" coords="1491,379,1578,406"/>
<area shape="rect" href="sysdep_8cpp.html#a6140dcc97ab52a9406e6d3f5749fa43c" title="Read characters from an open file. Abort if read fails." alt="" coords="1509,110,1561,136"/>
<area shape="rect" href="classInterrupt.html#ac403a14a9e41fa2b6dbd5c6056b87389" title="Print interrupt state." alt="" coords="1469,480,1600,507"/>
<area shape="rect" href="classDisk.html#aa87426eeedc8cf390fa4b293ecd34b42" title=" " alt="" coords="1473,8,1596,35"/>
<area shape="rect" href="classStatistics.html#a77aec82b7adb8d795c850db96c82f5d8" title=" " alt="" coords="1847,102,2009,128"/>
<area shape="rect" href="classDisk.html#abf14ace693df2b08e1187045305e81a5" title="time to get to the new track" alt="" coords="1677,227,1793,254"/>
<area shape="rect" href="classDisk.html#abecdf19e160925b1bc9b4542c90de2ac" title=" " alt="" coords="1671,34,1799,60"/>
<area shape="rect" href="classDirectory.html#abab8ff05c1dedadbaac7b44730eeb5a4" title="Find the index into the directory table corresponding to &quot;name&quot;." alt="" coords="627,1468,766,1495"/>
<area shape="rect" href="filesys_8cpp.html#adf9153e1a224b6785fb5e88446cfc332" title=" " alt="" coords="418,1266,518,1292"/>
<area shape="rect" href="classFileSystem.html#a118ce47f3ef95d3e930572c20836d327" title="Get the root directory." alt="" coords="391,1316,545,1343"/>
<area shape="rect" href="classOpenFile.html#a2c9c2e3e078fc71c99e0f589493fa28e" title="return the file&#39;s header" alt="" coords="385,1215,551,1242"/>
<area shape="rect" href="classOpenFile.html#ad4b5d26a169a7c22e6f27c1693adb1aa" title=" " alt="" coords="405,886,531,912"/>
<area shape="rect" href="classFileHeader.html#a8dcba7e634e37555f08c39dd9c63597a" title=" " alt="" coords="599,632,795,659"/>
<area shape="rect" href="classFileSystem.html#a798400dbcaaef6d6dde5e63fcc500a60" title="Get the free map table." alt="" coords="602,734,791,760"/>
<area shape="rect" href="classFileHeader.html#aeff760f3edaad0bfb6862a4e93b005c6" title=" " alt="" coords="608,784,785,811"/>
<area shape="rect" href="classFileHeader.html#afa31f3a959a74b0134a544858021457f" title=" " alt="" coords="621,531,772,558"/>
<area shape="rect" href="classFileHeader.html#ab896cc7dd7274e3f8072da2c7d9beee8" title="Write modifications to file header back to disk." alt="" coords="843,784,997,811"/>
<area shape="rect" href="classDriverDisk.html#a74426214379e50aa0d8a7b19084887ee" title="write a disk sector, returning only once the data is actually written." alt="" coords="1052,835,1209,862"/>
<area shape="rect" href="classBitMap.html#a031ad924663dcae2359403b3a76a9dd8" title="Is the &quot;nth&quot; bit set?" alt="" coords="872,531,968,558"/>
<area shape="rect" href="classBitMap.html#af73514736aff03229d58557d0423daca" title="Return the # of a clear bit, and as a side effect, set the bit. If no bits are clear,..." alt="" coords="856,582,984,608"/>
<area shape="rect" href="classDisk.html#aec33797c6480a8c919fc7d340c316abe" title=" " alt="" coords="1264,455,1399,482"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classFileSystem_ae5cbf7822080d1c9bb606b5d74dd4ee5_icgraph.png" border="0" usemap="#classFileSystem_ae5cbf7822080d1c9bb606b5d74dd4ee5_icgraph" alt=""/></div>
<map name="classFileSystem_ae5cbf7822080d1c9bb606b5d74dd4ee5_icgraph" id="classFileSystem_ae5cbf7822080d1c9bb606b5d74dd4ee5_icgraph">
<area shape="rect" title="Delete a directory." alt="" coords="1519,201,1649,228"/>
<area shape="rect" href="machine_8hpp.html#af31c84fcf9811fc72614abc2be3b5a44" title="Entry point into Nachos to handle user system calls and exceptions." alt="" coords="1347,176,1471,203"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="1383,227,1434,253"/>
<area shape="rect" href="classMachine.html#a0d6f63790c0568437b100171f61fd77f" title="Do a pending delayed load (modifying a reg)" alt="" coords="1128,75,1299,101"/>
<area shape="rect" href="classMachine.html#ad70a015685c6e4bf705e4939551774aa" title=" " alt="" coords="585,24,748,51"/>
<area shape="rect" href="classMMU.html#a28a50bd03688bc05aa15f93e4abf61a7" title=" " alt="" coords="797,151,917,177"/>
<area shape="rect" href="classMMU.html#aa2ddea5dcd1648aba21ac1a75c79dc25" title=" " alt="" coords="965,75,1080,101"/>
<area shape="rect" href="classMMU.html#a60227cf48e6778a4c66d8a13fd2f1539" title=" " alt="" coords="796,24,917,51"/>
<area shape="rect" href="classMachine.html#a83444e06eb7a7c163a1b9c87a7062d43" title="Destructor. De&#45;allocate the data structures." alt="" coords="435,24,537,51"/>
<area shape="rect" href="thread_8cpp.html#a014c1a99794f74ed079b0dde1f7efe8d" title=" " alt="" coords="240,24,387,51"/>
<area shape="rect" href="classThread.html#ad6d5edb1a6d2a9effbb442883fc5b866" title="Sets&#45;up the thread simulator context : fills it with the appropriate." alt="" coords="5,24,192,51"/>
<area shape="rect" href="exception_8cpp.html#a2f3d05f12e27c15623b3d6a0e3813677" title=" " alt="" coords="607,189,727,216"/>
<area shape="rect" href="exception_8cpp.html#a467d8e83c5db03566d20ee929c7d7c1f" title=" " alt="" coords="609,240,724,267"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a8d062da5905bf0eca01033ad70d0e2d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d062da5905bf0eca01033ad70d0e2d5">&#9670;&nbsp;</a></span>directoryFile</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOpenFile.html">OpenFile</a>* FileSystem::directoryFile</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>"Root" directory &ndash; list of file names, represented as a file </p>

</div>
</div>
<a id="ac011f3b710a3b03d29fb9e554008699d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac011f3b710a3b03d29fb9e554008699d">&#9670;&nbsp;</a></span>freeMapFile</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOpenFile.html">OpenFile</a>* FileSystem::freeMapFile</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Bit map of free disk blocks, represented as a file. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>filesys/<a class="el" href="filesys_8hpp_source.html">filesys.hpp</a></li>
<li>filesys/<a class="el" href="filesys_8cpp.html">filesys.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classFileSystem.html">FileSystem</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
