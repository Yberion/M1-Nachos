<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: OpenFile Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_open_file.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_open_file-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">OpenFile Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines the data structure maintained when a file is opened.  
 <a href="class_open_file.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="openfile_8hpp_source.html">openfile.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a89136ac6b54013a413398f9496d39963"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a89136ac6b54013a413398f9496d39963">OpenFile</a> (int sector)</td></tr>
<tr class="separator:a89136ac6b54013a413398f9496d39963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d59e2d0a4e8eb5f21f31f7179dd6e50"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a1d59e2d0a4e8eb5f21f31f7179dd6e50">~OpenFile</a> ()</td></tr>
<tr class="memdesc:a1d59e2d0a4e8eb5f21f31f7179dd6e50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the file.  <a href="class_open_file.html#a1d59e2d0a4e8eb5f21f31f7179dd6e50">More...</a><br /></td></tr>
<tr class="separator:a1d59e2d0a4e8eb5f21f31f7179dd6e50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00f20ca65c80be4e6039a9f04cb03374"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a00f20ca65c80be4e6039a9f04cb03374">Seek</a> (int position)</td></tr>
<tr class="separator:a00f20ca65c80be4e6039a9f04cb03374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af87bf2b0b15fa3501dada45a1a284bf4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#af87bf2b0b15fa3501dada45a1a284bf4">Read</a> (char *into, int numBytes)</td></tr>
<tr class="separator:af87bf2b0b15fa3501dada45a1a284bf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2de8d2d805fef3510bfd2fdf46f683fa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a2de8d2d805fef3510bfd2fdf46f683fa">Write</a> (char *from, int numBytes)</td></tr>
<tr class="separator:a2de8d2d805fef3510bfd2fdf46f683fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0af8cd52ec71a2ad407039cebee2ef3d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a0af8cd52ec71a2ad407039cebee2ef3d">ReadAt</a> (char *into, int numBytes, int position)</td></tr>
<tr class="separator:a0af8cd52ec71a2ad407039cebee2ef3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4b5d26a169a7c22e6f27c1693adb1aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#ad4b5d26a169a7c22e6f27c1693adb1aa">WriteAt</a> (char *from, int numBytes, int position)</td></tr>
<tr class="separator:ad4b5d26a169a7c22e6f27c1693adb1aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d5618da2388829f294c3f33017fadac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a5d5618da2388829f294c3f33017fadac">Length</a> ()</td></tr>
<tr class="memdesc:a5d5618da2388829f294c3f33017fadac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of bytes in the file.  <a href="class_open_file.html#a5d5618da2388829f294c3f33017fadac">More...</a><br /></td></tr>
<tr class="separator:a5d5618da2388829f294c3f33017fadac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c9c2e3e078fc71c99e0f589493fa28e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_file_header.html">FileHeader</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a2c9c2e3e078fc71c99e0f589493fa28e">GetFileHeader</a> ()</td></tr>
<tr class="memdesc:a2c9c2e3e078fc71c99e0f589493fa28e"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the file's header  <a href="class_open_file.html#a2c9c2e3e078fc71c99e0f589493fa28e">More...</a><br /></td></tr>
<tr class="separator:a2c9c2e3e078fc71c99e0f589493fa28e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99da585bad8c8e1916ca3eeaf78539b7"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a99da585bad8c8e1916ca3eeaf78539b7">GetName</a> ()</td></tr>
<tr class="memdesc:a99da585bad8c8e1916ca3eeaf78539b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the file's name  <a href="class_open_file.html#a99da585bad8c8e1916ca3eeaf78539b7">More...</a><br /></td></tr>
<tr class="separator:a99da585bad8c8e1916ca3eeaf78539b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55f2403097b272cec23712007d4a11b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a55f2403097b272cec23712007d4a11b5">SetName</a> (char *)</td></tr>
<tr class="memdesc:a55f2403097b272cec23712007d4a11b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the file's name.  <a href="class_open_file.html#a55f2403097b272cec23712007d4a11b5">More...</a><br /></td></tr>
<tr class="separator:a55f2403097b272cec23712007d4a11b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa8600eb2b54645780d5a6208ad85762"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#aaa8600eb2b54645780d5a6208ad85762">IsDir</a> ()</td></tr>
<tr class="memdesc:aaa8600eb2b54645780d5a6208ad85762"><td class="mdescLeft">&#160;</td><td class="mdescRight">return true if the file is a directory  <a href="class_open_file.html#aaa8600eb2b54645780d5a6208ad85762">More...</a><br /></td></tr>
<tr class="separator:aaa8600eb2b54645780d5a6208ad85762"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a7ee14d7e9d6ddb91f11e2de8d028c053"><td class="memItemLeft" align="right" valign="top"><a id="a7ee14d7e9d6ddb91f11e2de8d028c053"></a>
<a class="el" href="system_8hpp.html#a842c5e2e69277690b064bf363c017980">ObjectType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a7ee14d7e9d6ddb91f11e2de8d028c053">type</a></td></tr>
<tr class="memdesc:a7ee14d7e9d6ddb91f11e2de8d028c053"><td class="mdescLeft">&#160;</td><td class="mdescRight">Object type, for validity checks during system calls (must be the first public field) <br /></td></tr>
<tr class="separator:a7ee14d7e9d6ddb91f11e2de8d028c053"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines the data structure maintained when a file is opened. </p>
<p>This is the "real" implementation, that turns these operations into read and write disk sector requests. In this baseline implementation of the file system, we don't worry about concurrent accesses to the file system by different threads &ndash; this is part of the assignment. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a89136ac6b54013a413398f9496d39963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89136ac6b54013a413398f9496d39963">&#9670;&nbsp;</a></span>OpenFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OpenFile::OpenFile </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sector</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open a file whose header is located at "sector" on the disk</p>
<p>Open a Nachos file for reading and writing. Bring the file header into memory while the file is open.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sector</td><td>the location on disk of the file header for this file </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_open_file_a89136ac6b54013a413398f9496d39963_cgraph.png" border="0" usemap="#class_open_file_a89136ac6b54013a413398f9496d39963_cgraph" alt=""/></div>
<map name="class_open_file_a89136ac6b54013a413398f9496d39963_cgraph" id="class_open_file_a89136ac6b54013a413398f9496d39963_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,140,133"/>
<area shape="rect" href="class_file_header.html#aa85564cee98fc9592df08cc5e4a2efc6" title="Initialize file header from disk." alt="" coords="188,107,343,133"/>
<area shape="rect" href="class_driver_disk.html#a2e93ba9a36bba4e8b3eeb43f877b2395" title=" " alt="" coords="391,107,547,133"/>
<area shape="rect" href="class_lock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="611,5,713,32"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="821,56,889,83"/>
<area shape="rect" href="class_semaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="609,107,715,133"/>
<area shape="rect" href="class_disk.html#a8b51a82d4f2fd009335d0c591ae11042" title=" " alt="" coords="595,157,729,184"/>
<area shape="rect" href="class_lock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="609,208,715,235"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="980,81,1096,108"/>
<area shape="rect" href="class_disk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="777,157,932,184"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="826,208,883,235"/>
<area shape="rect" href="sysdep_8cpp.html#a6140dcc97ab52a9406e6d3f5749fa43c" title="Read characters from an open file. Abort if read fails." alt="" coords="829,259,881,285"/>
</map>
</div>

</div>
</div>
<a id="a1d59e2d0a4e8eb5f21f31f7179dd6e50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d59e2d0a4e8eb5f21f31f7179dd6e50">&#9670;&nbsp;</a></span>~OpenFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OpenFile::~OpenFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close the file. </p>
<p>Close a Nachos file, de-allocating any in-memory data structures. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2c9c2e3e078fc71c99e0f589493fa28e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c9c2e3e078fc71c99e0f589493fa28e">&#9670;&nbsp;</a></span>GetFileHeader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_file_header.html">FileHeader</a> * OpenFile::GetFileHeader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return the file's header </p>
<p>Return the file's <a class="el" href="class_file_header.html" title="Defines a file header in the Nachos file system.">FileHeader</a>. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_open_file_a2c9c2e3e078fc71c99e0f589493fa28e_icgraph.png" border="0" usemap="#class_open_file_a2c9c2e3e078fc71c99e0f589493fa28e_icgraph" alt=""/></div>
<map name="class_open_file_a2c9c2e3e078fc71c99e0f589493fa28e_icgraph" id="class_open_file_a2c9c2e3e078fc71c99e0f589493fa28e_icgraph">
<area shape="rect" title="return the file&#39;s header" alt="" coords="205,13,371,39"/>
<area shape="rect" href="class_open_file_table_entry.html#a3db43ff60517c9949bb89a499c7304a8" title=" " alt="" coords="5,5,157,47"/>
</map>
</div>

</div>
</div>
<a id="a99da585bad8c8e1916ca3eeaf78539b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99da585bad8c8e1916ca3eeaf78539b7">&#9670;&nbsp;</a></span>GetName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * OpenFile::GetName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return the file's name </p>
<p>Return the name of the file. </p>

</div>
</div>
<a id="aaa8600eb2b54645780d5a6208ad85762"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa8600eb2b54645780d5a6208ad85762">&#9670;&nbsp;</a></span>IsDir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OpenFile::IsDir </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return true if the file is a directory </p>
<p>Return true if the file is a directory. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_open_file_aaa8600eb2b54645780d5a6208ad85762_cgraph.png" border="0" usemap="#class_open_file_aaa8600eb2b54645780d5a6208ad85762_cgraph" alt=""/></div>
<map name="class_open_file_aaa8600eb2b54645780d5a6208ad85762_cgraph" id="class_open_file_aaa8600eb2b54645780d5a6208ad85762_cgraph">
<area shape="rect" title="return true if the file is a directory" alt="" coords="5,5,113,32"/>
<area shape="rect" href="class_file_header.html#ae43a97c41cef7b52a01c5d1da28ed3fa" title=" " alt="" coords="161,5,280,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_open_file_aaa8600eb2b54645780d5a6208ad85762_icgraph.png" border="0" usemap="#class_open_file_aaa8600eb2b54645780d5a6208ad85762_icgraph" alt=""/></div>
<map name="class_open_file_aaa8600eb2b54645780d5a6208ad85762_icgraph" id="class_open_file_aaa8600eb2b54645780d5a6208ad85762_icgraph">
<area shape="rect" title="return true if the file is a directory" alt="" coords="363,80,471,107"/>
<area shape="rect" href="class_directory.html#a2525a4455b80a1ee2648319ab257037c" title=" " alt="" coords="191,29,294,56"/>
<area shape="rect" href="class_file_system.html#a606ea080a2a0fe5e3be3c3f5b8f4e7bc" title="Open a file (UNIX open)" alt="" coords="179,80,306,107"/>
<area shape="rect" href="class_open_file_table.html#ab0519dd960600e61b98d524281aaa882" title=" " alt="" coords="171,131,315,157"/>
<area shape="rect" href="class_file_system.html#aaf76918c6f0d24bc72aaa84625adfddf" title="List all the files in the file system." alt="" coords="5,29,123,56"/>
</map>
</div>

</div>
</div>
<a id="a5d5618da2388829f294c3f33017fadac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d5618da2388829f294c3f33017fadac">&#9670;&nbsp;</a></span>Length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OpenFile::Length </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the number of bytes in the file. </p>
<p>Return the number of bytes in the file (this interface is simpler than the UNIX idiom &ndash; lseek to end of file, tell, lseek back </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_open_file_a5d5618da2388829f294c3f33017fadac_cgraph.png" border="0" usemap="#class_open_file_a5d5618da2388829f294c3f33017fadac_cgraph" alt=""/></div>
<map name="class_open_file_a5d5618da2388829f294c3f33017fadac_cgraph" id="class_open_file_a5d5618da2388829f294c3f33017fadac_cgraph">
<area shape="rect" title="Return the number of bytes in the file." alt="" coords="5,5,127,32"/>
<area shape="rect" href="class_file_header.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="175,5,327,32"/>
</map>
</div>

</div>
</div>
<a id="af87bf2b0b15fa3501dada45a1a284bf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af87bf2b0b15fa3501dada45a1a284bf4">&#9670;&nbsp;</a></span>Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OpenFile::Read </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>into</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read/write bytes from the file, starting at the implicit position. Return the # actually read/written, and increment position in file.</p>
<p>Read a portion of a file, starting from seekPosition. Return the number of bytes actually read, and as a side effect, increment the current position within the file.</p>
<p>Implemented using the more primitive ReadAt.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">into</td><td>the buffer to contain the data to be read from disk </td></tr>
    <tr><td class="paramname">numBytes</td><td>the number of bytes to transfer </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_open_file_af87bf2b0b15fa3501dada45a1a284bf4_cgraph.png" border="0" usemap="#class_open_file_af87bf2b0b15fa3501dada45a1a284bf4_cgraph" alt=""/></div>
<map name="class_open_file_af87bf2b0b15fa3501dada45a1a284bf4_cgraph" id="class_open_file_af87bf2b0b15fa3501dada45a1a284bf4_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,117,57"/>
<area shape="rect" href="class_open_file.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="165,31,291,57"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="381,5,449,32"/>
<area shape="rect" href="class_file_header.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="339,56,491,83"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="539,5,655,32"/>
</map>
</div>

</div>
</div>
<a id="a0af8cd52ec71a2ad407039cebee2ef3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0af8cd52ec71a2ad407039cebee2ef3d">&#9670;&nbsp;</a></span>ReadAt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OpenFile::ReadAt </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>into</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numBytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read/write bytes from the file, bypassing the implicit position.</p>
<p>Read a portion of a file, starting at "position". Return the number of bytes actually read, but has no side effects.</p>
<p>There is no guarantee the request starts or ends on an even disk sector boundary; however the disk only knows how to read a whole disk sector at a time. <br  />
</p>
<p>We read in all of the full or partial sectors that are part of the request, but we only copy the part we are interested in.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">into</td><td>the buffer to contain the data to be read from disk </td></tr>
    <tr><td class="paramname">numBytes</td><td>the number of bytes to transfer </td></tr>
    <tr><td class="paramname">position</td><td>the offset within the file of the first byte to be read </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_open_file_a0af8cd52ec71a2ad407039cebee2ef3d_cgraph.png" border="0" usemap="#class_open_file_a0af8cd52ec71a2ad407039cebee2ef3d_cgraph" alt=""/></div>
<map name="class_open_file_a0af8cd52ec71a2ad407039cebee2ef3d_cgraph" id="class_open_file_a0af8cd52ec71a2ad407039cebee2ef3d_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,131,57"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="221,5,289,32"/>
<area shape="rect" href="class_file_header.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="179,56,331,83"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="379,5,495,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_open_file_a0af8cd52ec71a2ad407039cebee2ef3d_icgraph.png" border="0" usemap="#class_open_file_a0af8cd52ec71a2ad407039cebee2ef3d_icgraph" alt=""/></div>
<map name="class_open_file_a0af8cd52ec71a2ad407039cebee2ef3d_icgraph" id="class_open_file_a0af8cd52ec71a2ad407039cebee2ef3d_icgraph">
<area shape="rect" title=" " alt="" coords="793,348,919,375"/>
<area shape="rect" href="class_addr_space.html#acd3d2a68587b04ed5740e87895613821" title=" " alt="" coords="587,235,745,261"/>
<area shape="rect" href="class_bit_map.html#ad6d12eefec9b64e903d072c83f7c29a2" title=" " alt="" coords="599,411,733,437"/>
<area shape="rect" href="class_directory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title=" " alt="" coords="593,285,739,312"/>
<area shape="rect" href="class_open_file.html#af87bf2b0b15fa3501dada45a1a284bf4" title=" " alt="" coords="610,461,722,488"/>
<area shape="rect" href="class_file_system.html#aaf76918c6f0d24bc72aaa84625adfddf" title="List all the files in the file system." alt="" coords="226,360,343,387"/>
<area shape="rect" href="class_open_file.html#ad4b5d26a169a7c22e6f27c1693adb1aa" title=" " alt="" coords="412,461,539,488"/>
<area shape="rect" href="class_open_file_table_entry.html#a3db43ff60517c9949bb89a499c7304a8" title=" " alt="" coords="5,505,157,546"/>
<area shape="rect" href="class_open_file.html#a2de8d2d805fef3510bfd2fdf46f683fa" title=" " alt="" coords="228,411,341,437"/>
<area shape="rect" href="class_bit_map.html#a19052d41ba5a654c7e478582dffba20d" title=" " alt="" coords="219,461,351,488"/>
<area shape="rect" href="class_directory.html#abf5550df42587bbc604c71441a4d12fc" title=" " alt="" coords="213,512,356,539"/>
<area shape="rect" href="filesys_8hpp.html#a562c4a58dde9f8b0a25dc482e23d9dc4" title=" " alt="" coords="444,171,507,197"/>
<area shape="rect" href="class_file_system.html#a606ea080a2a0fe5e3be3c3f5b8f4e7bc" title="Open a file (UNIX open)" alt="" coords="221,309,348,336"/>
<area shape="rect" href="class_open_file_table.html#ab0519dd960600e61b98d524281aaa882" title=" " alt="" coords="213,5,357,32"/>
<area shape="rect" href="class_directory.html#a2525a4455b80a1ee2648319ab257037c" title=" " alt="" coords="424,360,527,387"/>
<area shape="rect" href="class_file_system.html#ac789d58815881d7f193d86085b0f54aa" title="Create a file (UNIX creat)" alt="" coords="217,259,352,285"/>
<area shape="rect" href="class_file_system.html#a9b4f11a12aed939e691edd6d591a8fcf" title="Create a new directory." alt="" coords="221,56,349,83"/>
<area shape="rect" href="class_file_system.html#a52e69a068c68c6c84f02c80fd4c5389e" title="Delete a file (UNIX unlink)" alt="" coords="213,107,356,133"/>
<area shape="rect" href="class_open_file_table.html#a004541913ef8deb24d571c20d2020175" title="remove the file from the file system" alt="" coords="205,208,364,235"/>
<area shape="rect" href="class_file_system.html#ae5cbf7822080d1c9bb606b5d74dd4ee5" title="Delete a directory." alt="" coords="219,157,350,184"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="56,107,107,133"/>
</map>
</div>

</div>
</div>
<a id="a00f20ca65c80be4e6039a9f04cb03374"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00f20ca65c80be4e6039a9f04cb03374">&#9670;&nbsp;</a></span>Seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OpenFile::Seek </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>position</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the position from which to start reading/writing &ndash; UNIX lseek</p>
<p>Change the current location within the open file &ndash; the point at which the next Read or Write will start from.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>the location within the file for the next Read/Write </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a55f2403097b272cec23712007d4a11b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55f2403097b272cec23712007d4a11b5">&#9670;&nbsp;</a></span>SetName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OpenFile::SetName </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>newname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the file's name. </p>
<p>Set the name of the file. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_open_file_a55f2403097b272cec23712007d4a11b5_icgraph.png" border="0" usemap="#class_open_file_a55f2403097b272cec23712007d4a11b5_icgraph" alt=""/></div>
<map name="class_open_file_a55f2403097b272cec23712007d4a11b5_icgraph" id="class_open_file_a55f2403097b272cec23712007d4a11b5_icgraph">
<area shape="rect" title="Set the file&#39;s name." alt="" coords="197,31,333,57"/>
<area shape="rect" href="class_file_system.html#a606ea080a2a0fe5e3be3c3f5b8f4e7bc" title="Open a file (UNIX open)" alt="" coords="14,5,141,32"/>
<area shape="rect" href="class_open_file_table.html#ab0519dd960600e61b98d524281aaa882" title=" " alt="" coords="5,56,149,83"/>
</map>
</div>

</div>
</div>
<a id="a2de8d2d805fef3510bfd2fdf46f683fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2de8d2d805fef3510bfd2fdf46f683fa">&#9670;&nbsp;</a></span>Write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OpenFile::Write </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>into</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a portion of a file, starting from seekPosition. Return the number of bytes actually written, and as a side effect, increment the current position within the file.</p>
<p>Implemented using the more primitive WriteAt.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">into</td><td>the buffer containing the data to be written to disk </td></tr>
    <tr><td class="paramname">numBytes</td><td>the number of bytes to transfer </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_open_file_a2de8d2d805fef3510bfd2fdf46f683fa_cgraph.png" border="0" usemap="#class_open_file_a2de8d2d805fef3510bfd2fdf46f683fa_cgraph" alt=""/></div>
<map name="class_open_file_a2de8d2d805fef3510bfd2fdf46f683fa_cgraph" id="class_open_file_a2de8d2d805fef3510bfd2fdf46f683fa_cgraph">
<area shape="rect" title=" " alt="" coords="5,233,119,260"/>
<area shape="rect" href="class_open_file.html#ad4b5d26a169a7c22e6f27c1693adb1aa" title=" " alt="" coords="167,233,293,260"/>
<area shape="rect" href="class_file_header.html#a8dcba7e634e37555f08c39dd9c63597a" title=" " alt="" coords="341,5,537,32"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="801,81,869,108"/>
<area shape="rect" href="class_bit_map.html#ad6d12eefec9b64e903d072c83f7c29a2" title=" " alt="" coords="372,107,507,133"/>
<area shape="rect" href="class_file_header.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="759,132,911,159"/>
<area shape="rect" href="class_file_system.html#a798400dbcaaef6d6dde5e63fcc500a60" title="Get the free map table." alt="" coords="345,208,534,235"/>
<area shape="rect" href="class_file_header.html#aeff760f3edaad0bfb6862a4e93b005c6" title=" " alt="" coords="351,259,528,285"/>
<area shape="rect" href="class_file_header.html#afa31f3a959a74b0134a544858021457f" title=" " alt="" coords="364,309,515,336"/>
<area shape="rect" href="class_bit_map.html#a19052d41ba5a654c7e478582dffba20d" title=" " alt="" coords="373,360,505,387"/>
<area shape="rect" href="class_file_header.html#ab896cc7dd7274e3f8072da2c7d9beee8" title="back to disk" alt="" coords="363,411,516,437"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="959,81,1075,108"/>
<area shape="rect" href="class_open_file.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="585,107,711,133"/>
</map>
</div>

</div>
</div>
<a id="ad4b5d26a169a7c22e6f27c1693adb1aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4b5d26a169a7c22e6f27c1693adb1aa">&#9670;&nbsp;</a></span>WriteAt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OpenFile::WriteAt </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numBytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a portion of a file, starting at "position". Return the number of bytes actually written, but has no side effects (except that Write modifies the file, of course).</p>
<p>There is no guarantee the request starts or ends on an even disk sector boundary; however the disk only knows how to write a whole disk sector at a time.</p>
<p>We must first read in any sectors that will be partially written, so that we don't overwrite the unmodified portion. We then copy in the data that will be modified, and write back all the full or partial sectors that are part of the request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">from</td><td>the buffer containing the data to be written to disk </td></tr>
    <tr><td class="paramname">numBytes</td><td>the number of bytes to transfer </td></tr>
    <tr><td class="paramname">position</td><td>the offset within the file of the first byte to be written </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_open_file_ad4b5d26a169a7c22e6f27c1693adb1aa_cgraph.png" border="0" usemap="#class_open_file_ad4b5d26a169a7c22e6f27c1693adb1aa_cgraph" alt=""/></div>
<map name="class_open_file_ad4b5d26a169a7c22e6f27c1693adb1aa_cgraph" id="class_open_file_ad4b5d26a169a7c22e6f27c1693adb1aa_cgraph">
<area shape="rect" title=" " alt="" coords="5,233,132,260"/>
<area shape="rect" href="class_file_header.html#a8dcba7e634e37555f08c39dd9c63597a" title=" " alt="" coords="180,5,376,32"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="639,81,707,108"/>
<area shape="rect" href="class_bit_map.html#ad6d12eefec9b64e903d072c83f7c29a2" title=" " alt="" coords="211,107,345,133"/>
<area shape="rect" href="class_file_header.html#a676d88bbc37d3d108625be75d637a8e6" title="in bytes" alt="" coords="597,132,749,159"/>
<area shape="rect" href="class_file_system.html#a798400dbcaaef6d6dde5e63fcc500a60" title="Get the free map table." alt="" coords="183,208,373,235"/>
<area shape="rect" href="class_file_header.html#aeff760f3edaad0bfb6862a4e93b005c6" title=" " alt="" coords="189,259,367,285"/>
<area shape="rect" href="class_file_header.html#afa31f3a959a74b0134a544858021457f" title=" " alt="" coords="203,309,353,336"/>
<area shape="rect" href="class_bit_map.html#a19052d41ba5a654c7e478582dffba20d" title=" " alt="" coords="212,360,344,387"/>
<area shape="rect" href="class_file_header.html#ab896cc7dd7274e3f8072da2c7d9beee8" title="back to disk" alt="" coords="201,411,355,437"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="797,81,913,108"/>
<area shape="rect" href="class_open_file.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="424,107,549,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_open_file_ad4b5d26a169a7c22e6f27c1693adb1aa_icgraph.png" border="0" usemap="#class_open_file_ad4b5d26a169a7c22e6f27c1693adb1aa_icgraph" alt=""/></div>
<map name="class_open_file_ad4b5d26a169a7c22e6f27c1693adb1aa_icgraph" id="class_open_file_ad4b5d26a169a7c22e6f27c1693adb1aa_icgraph">
<area shape="rect" title=" " alt="" coords="396,56,523,83"/>
<area shape="rect" href="class_open_file.html#a2de8d2d805fef3510bfd2fdf46f683fa" title=" " alt="" coords="220,5,333,32"/>
<area shape="rect" href="class_bit_map.html#a19052d41ba5a654c7e478582dffba20d" title=" " alt="" coords="211,56,343,83"/>
<area shape="rect" href="class_directory.html#abf5550df42587bbc604c71441a4d12fc" title=" " alt="" coords="205,107,348,133"/>
<area shape="rect" href="class_open_file_table_entry.html#a3db43ff60517c9949bb89a499c7304a8" title=" " alt="" coords="5,49,157,90"/>
</map>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>filesys/<a class="el" href="openfile_8hpp_source.html">openfile.hpp</a></li>
<li>filesys/<a class="el" href="openfile_8cpp.html">openfile.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_open_file.html">OpenFile</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
