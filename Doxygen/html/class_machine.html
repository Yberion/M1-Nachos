<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: Machine Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_machine.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_machine-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Machine Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines the simulated execution hardware.  
 <a href="class_machine.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="machine_8hpp_source.html">machine.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for Machine:</div>
<div class="dyncontent">
<div class="center"><img src="class_machine__coll__graph.png" border="0" usemap="#_machine_coll__map" alt="Collaboration graph"/></div>
<map name="_machine_coll__map" id="_machine_coll__map">
<area shape="rect" title="Defines the simulated execution hardware." alt="" coords="207,199,277,225"/>
<area shape="rect" href="class_m_m_u.html" title="Defines a MMU &#45; Memory Management Unit." alt="" coords="37,95,90,121"/>
<area shape="rect" href="class_translation_table.html" title="Defines the data structures used for address translation." alt="" coords="5,5,121,32"/>
<area shape="rect" href="class_console.html" title="Defines a hardware console device." alt="" coords="114,95,183,121"/>
<area shape="rect" href="class_interrupt.html" title="Defines a low level interrupt hardware." alt="" coords="207,95,277,121"/>
<area shape="rect" href="class_a_c_i_a.html" title="Defines an ACIA (Asynchronous Communication Interface Adapter) device. An ACIA is an asynchronous dev..." alt="" coords="301,95,353,121"/>
<area shape="rect" href="class_disk.html" title="Defines a physical disk I/O device." alt="" coords="378,95,426,121"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad5958275a54dbc299b71ecdba7da0604"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ad5958275a54dbc299b71ecdba7da0604">Machine</a> (bool debug)</td></tr>
<tr class="memdesc:ad5958275a54dbc299b71ecdba7da0604"><td class="mdescLeft">&#160;</td><td class="mdescRight">for running user programs  <a href="class_machine.html#ad5958275a54dbc299b71ecdba7da0604">More...</a><br /></td></tr>
<tr class="separator:ad5958275a54dbc299b71ecdba7da0604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f595e09b54761f6c1e73b192067bd9c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a7f595e09b54761f6c1e73b192067bd9c">~Machine</a> ()</td></tr>
<tr class="memdesc:a7f595e09b54761f6c1e73b192067bd9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. De-allocate the data structures.  <a href="class_machine.html#a7f595e09b54761f6c1e73b192067bd9c">More...</a><br /></td></tr>
<tr class="separator:a7f595e09b54761f6c1e73b192067bd9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83444e06eb7a7c163a1b9c87a7062d43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a83444e06eb7a7c163a1b9c87a7062d43">Run</a> ()</td></tr>
<tr class="memdesc:a83444e06eb7a7c163a1b9c87a7062d43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a user program.  <a href="class_machine.html#a83444e06eb7a7c163a1b9c87a7062d43">More...</a><br /></td></tr>
<tr class="separator:a83444e06eb7a7c163a1b9c87a7062d43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9c9870f67219547a61d4d2e35516d06"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#aa9c9870f67219547a61d4d2e35516d06">ReadIntRegister</a> (int num)</td></tr>
<tr class="memdesc:aa9c9870f67219547a61d4d2e35516d06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the contents of an Integer CPU register.  <a href="class_machine.html#aa9c9870f67219547a61d4d2e35516d06">More...</a><br /></td></tr>
<tr class="separator:aa9c9870f67219547a61d4d2e35516d06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c99ef39db8a79eb9d31a462c86332ff"><td class="memItemLeft" align="right" valign="top"><a id="a0c99ef39db8a79eb9d31a462c86332ff"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a0c99ef39db8a79eb9d31a462c86332ff">WriteIntRegister</a> (int num, int32_t value)</td></tr>
<tr class="memdesc:a0c99ef39db8a79eb9d31a462c86332ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a value into an Integer CPU register. <br /></td></tr>
<tr class="separator:a0c99ef39db8a79eb9d31a462c86332ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af16b6154387003b4d6a9ddfd6128284a"><td class="memItemLeft" align="right" valign="top"><a id="af16b6154387003b4d6a9ddfd6128284a"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#af16b6154387003b4d6a9ddfd6128284a">ReadFPRegister</a> (int num)</td></tr>
<tr class="memdesc:af16b6154387003b4d6a9ddfd6128284a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the contents of a floating point register. <br /></td></tr>
<tr class="separator:af16b6154387003b4d6a9ddfd6128284a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac773aec703a24a025b6c0520c0fd5ac8"><td class="memItemLeft" align="right" valign="top"><a id="ac773aec703a24a025b6c0520c0fd5ac8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ac773aec703a24a025b6c0520c0fd5ac8">WriteFPRegister</a> (int num, int32_t value)</td></tr>
<tr class="memdesc:ac773aec703a24a025b6c0520c0fd5ac8"><td class="mdescLeft">&#160;</td><td class="mdescRight">store a value into a floating point register <br /></td></tr>
<tr class="separator:ac773aec703a24a025b6c0520c0fd5ac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae12d7f0022eadcdadb37493ebab42b0b"><td class="memItemLeft" align="right" valign="top"><a id="ae12d7f0022eadcdadb37493ebab42b0b"></a>
int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ae12d7f0022eadcdadb37493ebab42b0b">ReadCC</a> (void)</td></tr>
<tr class="memdesc:ae12d7f0022eadcdadb37493ebab42b0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read floating point code condition register. <br /></td></tr>
<tr class="separator:ae12d7f0022eadcdadb37493ebab42b0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a710c8e7507cde9d8b5e087bb8eceebd1"><td class="memItemLeft" align="right" valign="top"><a id="a710c8e7507cde9d8b5e087bb8eceebd1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a710c8e7507cde9d8b5e087bb8eceebd1">WriteCC</a> (int8_t <a class="el" href="class_machine.html#a267df298f7abd06598d3b09defa3eb2c">cc</a>)</td></tr>
<tr class="memdesc:a710c8e7507cde9d8b5e087bb8eceebd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write floating point code condition register. <br /></td></tr>
<tr class="separator:a710c8e7507cde9d8b5e087bb8eceebd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9c1948a2dadfd2ddb7d432b2443e884"><td class="memItemLeft" align="right" valign="top"><a id="ad9c1948a2dadfd2ddb7d432b2443e884"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>SetStatus</b> (<a class="el" href="machine_8hpp.html#a5cc6b28ebc1a6f32bdfe9031c4deb568">MachineStatus</a> st)</td></tr>
<tr class="separator:ad9c1948a2dadfd2ddb7d432b2443e884"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad70a015685c6e4bf705e4939551774aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ad70a015685c6e4bf705e4939551774aa">OneInstruction</a> (<a class="el" href="class_instruction.html">Instruction</a> *instr)</td></tr>
<tr class="memdesc:ad70a015685c6e4bf705e4939551774aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the execution time of the instr (cycle)  <a href="class_machine.html#ad70a015685c6e4bf705e4939551774aa">More...</a><br /></td></tr>
<tr class="separator:ad70a015685c6e4bf705e4939551774aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11fda0ddf1f16d8b1a06f75d1ab5b8a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a11fda0ddf1f16d8b1a06f75d1ab5b8a1">DelayedLoad</a> (int nextReg, int nextVal)</td></tr>
<tr class="memdesc:a11fda0ddf1f16d8b1a06f75d1ab5b8a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a pending delayed load (modifying a reg)  <a href="class_machine.html#a11fda0ddf1f16d8b1a06f75d1ab5b8a1">More...</a><br /></td></tr>
<tr class="separator:a11fda0ddf1f16d8b1a06f75d1ab5b8a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d6f63790c0568437b100171f61fd77f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a0d6f63790c0568437b100171f61fd77f">RaiseException</a> (<a class="el" href="machine_8hpp.html#a0e0f0f1661d7aeb71ed9698bff6c6383">ExceptionType</a> which, int badVAddr)</td></tr>
<tr class="separator:a0d6f63790c0568437b100171f61fd77f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08d36bd75e689830c73e307e1c7f7e28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a08d36bd75e689830c73e307e1c7f7e28">Debugger</a> ()</td></tr>
<tr class="memdesc:a08d36bd75e689830c73e307e1c7f7e28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoke the user program debugger.  <a href="class_machine.html#a08d36bd75e689830c73e307e1c7f7e28">More...</a><br /></td></tr>
<tr class="separator:a08d36bd75e689830c73e307e1c7f7e28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e4dee4ed66da41de9bbebb161efd06f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a4e4dee4ed66da41de9bbebb161efd06f">DumpState</a> ()</td></tr>
<tr class="memdesc:a4e4dee4ed66da41de9bbebb161efd06f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the user CPU and memory state.  <a href="class_machine.html#a4e4dee4ed66da41de9bbebb161efd06f">More...</a><br /></td></tr>
<tr class="separator:a4e4dee4ed66da41de9bbebb161efd06f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae0da89b16ec8e098144ddb09ab9bf02c"><td class="memItemLeft" align="right" valign="top"><a id="ae0da89b16ec8e098144ddb09ab9bf02c"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ae0da89b16ec8e098144ddb09ab9bf02c">int_registers</a> [<a class="el" href="machine_8hpp.html#a9b76404084d8d806c7df776d27d48dc7">NUM_INT_REGS</a>]</td></tr>
<tr class="memdesc:ae0da89b16ec8e098144ddb09ab9bf02c"><td class="mdescLeft">&#160;</td><td class="mdescRight">CPU Integer registers, for executing user programs. <br /></td></tr>
<tr class="separator:ae0da89b16ec8e098144ddb09ab9bf02c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab911b70757712fc42f16e8b9c87a38b6"><td class="memItemLeft" align="right" valign="top"><a id="ab911b70757712fc42f16e8b9c87a38b6"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ab911b70757712fc42f16e8b9c87a38b6">float_registers</a> [<a class="el" href="machine_8hpp.html#a3fae2fd34d21368d476a0a2c6abba2fb">NUM_FP_REGS</a>]</td></tr>
<tr class="memdesc:ab911b70757712fc42f16e8b9c87a38b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Floating point general purpose registers. <br /></td></tr>
<tr class="separator:ab911b70757712fc42f16e8b9c87a38b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a267df298f7abd06598d3b09defa3eb2c"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a267df298f7abd06598d3b09defa3eb2c">cc</a></td></tr>
<tr class="separator:a267df298f7abd06598d3b09defa3eb2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07cbf6544fe46ae72a7fc37e0db71993"><td class="memItemLeft" align="right" valign="top">int8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a07cbf6544fe46ae72a7fc37e0db71993">mainMemory</a></td></tr>
<tr class="separator:a07cbf6544fe46ae72a7fc37e0db71993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d27a9b68f4b10a801169190790177ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_m_m_u.html">MMU</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a7d27a9b68f4b10a801169190790177ea">mmu</a></td></tr>
<tr class="separator:a7d27a9b68f4b10a801169190790177ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa616ec44582a5910384ea1874bf9617f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_a_c_i_a.html">ACIA</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#aa616ec44582a5910384ea1874bf9617f">acia</a></td></tr>
<tr class="separator:aa616ec44582a5910384ea1874bf9617f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8290980871eb910ad13ace3a1b58108e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_interrupt.html">Interrupt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a8290980871eb910ad13ace3a1b58108e">interrupt</a></td></tr>
<tr class="separator:a8290980871eb910ad13ace3a1b58108e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68ed56cd4020a618c3681347462a92fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_disk.html">Disk</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a68ed56cd4020a618c3681347462a92fd">disk</a></td></tr>
<tr class="separator:a68ed56cd4020a618c3681347462a92fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9837c56d8d140ab4e30a1bf26003455a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_disk.html">Disk</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a9837c56d8d140ab4e30a1bf26003455a">diskSwap</a></td></tr>
<tr class="separator:a9837c56d8d140ab4e30a1bf26003455a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a798eb7c6240b03be493aaeb262d28d77"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_console.html">Console</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a798eb7c6240b03be493aaeb262d28d77">console</a></td></tr>
<tr class="separator:a798eb7c6240b03be493aaeb262d28d77"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines the simulated execution hardware. </p>
<p>User programs shouldn't be able to tell that they are running on our simulator or on the real hardware, except</p><ul>
<li>we only partially support floating point instructions (only "ordered operations", no FP "likely branches", no fixed point words</li>
<li>the system call interface to Nachos is not the same as UNIX (10 system calls in Nachos vs. 200 in UNIX!) If we were to implement more of the UNIX system calls, we ought to be able to run Nachos on top of Nachos!</li>
</ul>
<p>The procedures in this class are defined in <a class="el" href="machine_8cpp.html" title="Routines to simulate the execution of user programs.">machine.cpp</a>, <a class="el" href="mipssim_8cpp.html" title="simulate a MIPS R2/3000 processor">mipssim.cpp</a>, and translate.cpp. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad5958275a54dbc299b71ecdba7da0604"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5958275a54dbc299b71ecdba7da0604">&#9670;&nbsp;</a></span>Machine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Machine::Machine </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>debug</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>for running user programs </p>
<p>Constructor. Initialize the MIPS machine</p>
<p>Constructor. Initialize the MIPS machine.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">debug</td><td>if true, drop into the debugger after each user instruction is executed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7f595e09b54761f6c1e73b192067bd9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f595e09b54761f6c1e73b192067bd9c">&#9670;&nbsp;</a></span>~Machine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Machine::~Machine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor. De-allocate the data structures. </p>
<p>Destructor. De-allocate the data structures used by the. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a08d36bd75e689830c73e307e1c7f7e28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08d36bd75e689830c73e307e1c7f7e28">&#9670;&nbsp;</a></span>Debugger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::Debugger </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoke the user program debugger. </p>
<p>Primitive debugger. Note that we can't use gdb to debug user programs, since gdb doesn't run on top of Nachos.</p>
<p>This method just allow single-stepping, and printing the contents of memory. </p>

</div>
</div>
<a id="a11fda0ddf1f16d8b1a06f75d1ab5b8a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11fda0ddf1f16d8b1a06f75d1ab5b8a1">&#9670;&nbsp;</a></span>DelayedLoad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::DelayedLoad </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nextReg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nextValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a pending delayed load (modifying a reg) </p>
<p>Simulate effects of a delayed load.</p>
<p>NOTE &ndash; RaiseException/CheckInterrupts must also call DelayedLoad, since any delayed load must get applied before we trap to the kernel. </p>

</div>
</div>
<a id="a4e4dee4ed66da41de9bbebb161efd06f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e4dee4ed66da41de9bbebb161efd06f">&#9670;&nbsp;</a></span>DumpState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::DumpState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print the user CPU and memory state. </p>
<p>Print the user program's CPU state. We might print the contents of memory, but that seemed like overkill. Floating point registers are not printed for the same reason. </p>

</div>
</div>
<a id="ad70a015685c6e4bf705e4939551774aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad70a015685c6e4bf705e4939551774aa">&#9670;&nbsp;</a></span>OneInstruction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Machine::OneInstruction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>instr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the execution time of the instr (cycle) </p>
<p>Run one instruction of a user program.</p>
<p>Execute one instruction from a user-level program</p>
<p>If there is any kind of exception or interrupt, we invoke the exception handler, and when it returns, we return to <a class="el" href="class_machine.html#a83444e06eb7a7c163a1b9c87a7062d43" title="Run a user program.">Run()</a>, which will re-invoke us in a loop. This allows us to re-start the instruction execution from the beginning, in case any of our state has changed. On a syscall, the OS software must increment the PC so execution begins at the instruction immediately after the syscall.</p>
<p>This routine is re-entrant, in that it can be called multiple times concurrently &ndash; one for each thread executing user code. We get re-entrancy by never caching any data &ndash; we always re-start the simulation from scratch each time we are called (or after trapping back to the Nachos kernel on an exception or interrupt), and we always store all data back to the machine registers and memory before leaving. This allows the Nachos kernel to control our behavior by controlling the contents of memory, the translation table, and the register set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instr</td><td><a class="el" href="class_instruction.html" title="Defines an instruction.">Instruction</a> to be executed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Execution time of the instruction in cycles </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_machine_ad70a015685c6e4bf705e4939551774aa_cgraph.png" border="0" usemap="#class_machine_ad70a015685c6e4bf705e4939551774aa_cgraph" alt=""/></div>
<map name="class_machine_ad70a015685c6e4bf705e4939551774aa_cgraph" id="class_machine_ad70a015685c6e4bf705e4939551774aa_cgraph">
<area shape="rect" title="Return the execution time of the instr (cycle)" alt="" coords="5,93,168,120"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="948,17,1064,44"/>
<area shape="rect" href="class_instruction.html#acbdc34d695f5fa324a8418ef7a916814" title="Decode the binary representation of the instruction." alt="" coords="216,144,351,171"/>
<area shape="rect" href="class_m_m_u.html#a28a50bd03688bc05aa15f93e4abf61a7" title="memory (at addr). Return FALSE if a" alt="" coords="223,93,343,120"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="832,68,900,95"/>
<area shape="rect" href="class_process_stat.html#acbaa82f6a60394aca2db1e7e179a2a71" title=" " alt="" coords="565,508,780,535"/>
<area shape="rect" href="class_machine.html#a0d6f63790c0568437b100171f61fd77f" title=" " alt="" coords="587,93,758,120"/>
<area shape="rect" href="class_m_m_u.html#aa2ddea5dcd1648aba21ac1a75c79dc25" title="translation couldn&#39;t be completed." alt="" coords="399,268,513,295"/>
<area shape="rect" href="class_translation_table.html#a422fb5a0c18054667ce47a5025cb644c" title=" " alt="" coords="593,195,752,237"/>
<area shape="rect" href="class_translation_table.html#a1314ab5a89657842d5fcb56b3ed8730f" title=" " alt="" coords="593,261,752,302"/>
<area shape="rect" href="class_translation_table.html#aaea1ba12f26cb0d9849fb059f3399845" title=" " alt="" coords="593,326,752,367"/>
<area shape="rect" href="class_translation_table.html#a55c89008e61112f61a5d2cec29e678dc" title=" " alt="" coords="589,391,756,433"/>
<area shape="rect" href="class_translation_table.html#a4f29cbac75ad518a17d8f70e873dffef" title=" " alt="" coords="561,144,784,171"/>
</map>
</div>

</div>
</div>
<a id="a0d6f63790c0568437b100171f61fd77f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d6f63790c0568437b100171f61fd77f">&#9670;&nbsp;</a></span>RaiseException()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::RaiseException </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="machine_8hpp.html#a0e0f0f1661d7aeb71ed9698bff6c6383">ExceptionType</a>&#160;</td>
          <td class="paramname"><em>which</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>badVAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Trap to the Nachos kernel, because of a system call or other exception. <br  />
</p>
<p>Transfer control to the Nachos kernel from user mode, because the user program either invoked a system call, or some exception occurred (such as the address translation failed).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">which</td><td>the cause of the kernel trap (exception number) </td></tr>
    <tr><td class="paramname">badVaddr</td><td>the virtual address causing the trap, if appropriate </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_machine_a0d6f63790c0568437b100171f61fd77f_cgraph.png" border="0" usemap="#class_machine_a0d6f63790c0568437b100171f61fd77f_cgraph" alt=""/></div>
<map name="class_machine_a0d6f63790c0568437b100171f61fd77f_cgraph" id="class_machine_a0d6f63790c0568437b100171f61fd77f_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,176,32"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="224,5,292,32"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="340,5,456,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_machine_a0d6f63790c0568437b100171f61fd77f_icgraph.png" border="0" usemap="#class_machine_a0d6f63790c0568437b100171f61fd77f_icgraph" alt=""/></div>
<map name="class_machine_a0d6f63790c0568437b100171f61fd77f_icgraph" id="class_machine_a0d6f63790c0568437b100171f61fd77f_icgraph">
<area shape="rect" title=" " alt="" coords="548,31,719,57"/>
<area shape="rect" href="class_m_m_u.html#a28a50bd03688bc05aa15f93e4abf61a7" title="memory (at addr). Return FALSE if a" alt="" coords="217,5,337,32"/>
<area shape="rect" href="class_m_m_u.html#aa2ddea5dcd1648aba21ac1a75c79dc25" title="translation couldn&#39;t be completed." alt="" coords="385,31,500,57"/>
<area shape="rect" href="class_m_m_u.html#a60227cf48e6778a4c66d8a13fd2f1539" title=" " alt="" coords="216,68,337,95"/>
<area shape="rect" href="class_machine.html#ad70a015685c6e4bf705e4939551774aa" title="Return the execution time of the instr (cycle)" alt="" coords="5,5,168,32"/>
</map>
</div>

</div>
</div>
<a id="aa9c9870f67219547a61d4d2e35516d06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9c9870f67219547a61d4d2e35516d06">&#9670;&nbsp;</a></span>ReadIntRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Machine::ReadIntRegister </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the contents of an Integer CPU register. </p>
<p>Fetch or write the contents of CPU registers. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_machine_aa9c9870f67219547a61d4d2e35516d06_icgraph.png" border="0" usemap="#class_machine_aa9c9870f67219547a61d4d2e35516d06_icgraph" alt=""/></div>
<map name="class_machine_aa9c9870f67219547a61d4d2e35516d06_icgraph" id="class_machine_aa9c9870f67219547a61d4d2e35516d06_icgraph">
<area shape="rect" title="Read the contents of an Integer CPU register." alt="" coords="177,5,348,32"/>
<area shape="rect" href="machine_8hpp.html#af31c84fcf9811fc72614abc2be3b5a44" title="Entry point into Nachos to handle user system calls and exceptions." alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a83444e06eb7a7c163a1b9c87a7062d43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83444e06eb7a7c163a1b9c87a7062d43">&#9670;&nbsp;</a></span>Run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::Run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run a user program. </p>
<p>Make the MIPS machine start the execution of a user program. Called by the kernel when the program starts up; never returns.</p>
<p>This routine is re-entrant, in that it can be called multiple times concurrently &ndash; one for each thread executing user code. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa616ec44582a5910384ea1874bf9617f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa616ec44582a5910384ea1874bf9617f">&#9670;&nbsp;</a></span>acia</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_a_c_i_a.html">ACIA</a>* Machine::acia</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_a_c_i_a.html" title="Defines an ACIA (Asynchronous Communication Interface Adapter) device. An ACIA is an asynchronous dev...">ACIA</a> Hardware </p>

</div>
</div>
<a id="a267df298f7abd06598d3b09defa3eb2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a267df298f7abd06598d3b09defa3eb2c">&#9670;&nbsp;</a></span>cc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t Machine::cc</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_condition.html" title="Defines the &quot;condition variable&quot; synchronization tool.">Condition</a> code. Note that since only MIPS I FP instrs are implemented </p>

</div>
</div>
<a id="a798eb7c6240b03be493aaeb262d28d77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a798eb7c6240b03be493aaeb262d28d77">&#9670;&nbsp;</a></span>console</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_console.html">Console</a>* Machine::console</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_console.html" title="Defines a hardware console device.">Console</a> </p>

</div>
</div>
<a id="a68ed56cd4020a618c3681347462a92fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68ed56cd4020a618c3681347462a92fd">&#9670;&nbsp;</a></span>disk</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_disk.html">Disk</a>* Machine::disk</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Raw disk device (hardware) </p>

</div>
</div>
<a id="a9837c56d8d140ab4e30a1bf26003455a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9837c56d8d140ab4e30a1bf26003455a">&#9670;&nbsp;</a></span>diskSwap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_disk.html">Disk</a>* Machine::diskSwap</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Swap raw disk device (hardware) </p>

</div>
</div>
<a id="a8290980871eb910ad13ace3a1b58108e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8290980871eb910ad13ace3a1b58108e">&#9670;&nbsp;</a></span>interrupt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_interrupt.html">Interrupt</a>* Machine::interrupt</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_interrupt.html" title="Defines a low level interrupt hardware.">Interrupt</a> management </p>

</div>
</div>
<a id="a07cbf6544fe46ae72a7fc37e0db71993"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07cbf6544fe46ae72a7fc37e0db71993">&#9670;&nbsp;</a></span>mainMemory</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t* Machine::mainMemory</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Physical memory to store user program, code and data, while executing </p>

</div>
</div>
<a id="a7d27a9b68f4b10a801169190790177ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d27a9b68f4b10a801169190790177ea">&#9670;&nbsp;</a></span>mmu</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_m_m_u.html">MMU</a>* Machine::mmu</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_machine.html" title="Defines the simulated execution hardware.">Machine</a> memory management unit </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>machine/<a class="el" href="machine_8hpp_source.html">machine.hpp</a></li>
<li>machine/<a class="el" href="machine_8cpp.html">machine.cpp</a></li>
<li>machine/<a class="el" href="mipssim_8cpp.html">mipssim.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_machine.html">Machine</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
