<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: DriverDisk Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classDriverDisk.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classDriverDisk-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DriverDisk Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines a "synchronous" disk abstraction.  
 <a href="classDriverDisk.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="drvDisk_8hpp_source.html">drvDisk.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for DriverDisk:</div>
<div class="dyncontent">
<div class="center"><img src="classDriverDisk__coll__graph.png" border="0" usemap="#DriverDisk_coll__map" alt="Collaboration graph"/></div>
<map name="DriverDisk_coll__map" id="DriverDisk_coll__map">
<area shape="rect" title="Defines a &quot;synchronous&quot; disk abstraction." alt="" coords="645,1805,765,1941"/>
<area shape="rect" href="classSemaphore.html" title="Defines the &quot;semaphore&quot; synchronization tool." alt="" coords="647,1533,763,1699"/>
<area shape="rect" href="classList.html" title="Definition of a generic single&#45;linked &quot;list&quot;." alt="" coords="641,1173,768,1427"/>
<area shape="rect" href="classLock.html" title="Defines the &quot;lock&quot; synchronization tool." alt="" coords="448,1526,623,1706"/>
<area shape="rect" href="classThread.html" title="Data structures for managing threads" alt="" coords="199,1173,357,1427"/>
<area shape="rect" href="structsimulatorContextT.html" title="Defines the context of the Nachos simulator." alt="" coords="5,945,132,1052"/>
<area shape="rect" href="classProcess.html" title="Defines the data structures to keep track of the execution environment of a user program." alt="" coords="377,938,483,1059"/>
<area shape="rect" href="classAddrSpace.html" title="Defines the data structures to keep track of memory resources of executing user programs (address spa..." alt="" coords="451,1203,617,1397"/>
<area shape="rect" href="classProcessStat.html" title="Defines statistics that concern a particular process." alt="" coords="334,424,513,824"/>
<area shape="rect" href="classOpenFile.html" title="Defines the data structure maintained when a file is opened." alt="" coords="537,483,662,765"/>
<area shape="rect" href="structs__mapped__file.html" title="Information describing a memory&#45;mapped file." alt="" coords="545,953,653,1045"/>
<area shape="rect" href="classFileHeader.html" title="Defines a file header in the Nachos file system." alt="" coords="526,5,673,361"/>
<area shape="rect" href="classTranslationTable.html" title="Defines the data structures used for address translation." alt="" coords="679,887,829,1111"/>
<area shape="rect" href="classPageTableEntry.html" title="Defines an entry in a simple translation table." alt="" coords="687,527,821,721"/>
<area shape="rect" href="structthreadContextT.html" title="Defines the thread context (MIPS virtual machine)" alt="" coords="157,945,271,1052"/>
<area shape="rect" href="classDisk.html" title="Defines a physical disk I/O device." alt="" coords="787,1489,927,1743"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a12fc147f554a97268fab85d4013b85c5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#a12fc147f554a97268fab85d4013b85c5">DriverDisk</a> (char *sem_name, char *lock_name, <a class="el" href="classDisk.html">Disk</a> *theDisk)</td></tr>
<tr class="memdesc:a12fc147f554a97268fab85d4013b85c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. Initializes the disk driver by initializing the raw <a class="el" href="classDisk.html" title="Defines a physical disk I/O device.">Disk</a>.  <a href="classDriverDisk.html#a12fc147f554a97268fab85d4013b85c5">More...</a><br /></td></tr>
<tr class="separator:a12fc147f554a97268fab85d4013b85c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef7f9b235761f441807ae26d2f6e22a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#aef7f9b235761f441807ae26d2f6e22a7">~DriverDisk</a> ()</td></tr>
<tr class="memdesc:aef7f9b235761f441807ae26d2f6e22a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. De-allocate the driver data.  <a href="classDriverDisk.html#aef7f9b235761f441807ae26d2f6e22a7">More...</a><br /></td></tr>
<tr class="separator:aef7f9b235761f441807ae26d2f6e22a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e93ba9a36bba4e8b3eeb43f877b2395"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#a2e93ba9a36bba4e8b3eeb43f877b2395">ReadSector</a> (int sectorNumber, char *data)</td></tr>
<tr class="memdesc:a2e93ba9a36bba4e8b3eeb43f877b2395"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a disk sector, returning only once the data is actually read.  <a href="classDriverDisk.html#a2e93ba9a36bba4e8b3eeb43f877b2395">More...</a><br /></td></tr>
<tr class="separator:a2e93ba9a36bba4e8b3eeb43f877b2395"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74426214379e50aa0d8a7b19084887ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#a74426214379e50aa0d8a7b19084887ee">WriteSector</a> (int sectorNumber, char *data)</td></tr>
<tr class="memdesc:a74426214379e50aa0d8a7b19084887ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">write a disk sector, returning only once the data is actually written.  <a href="classDriverDisk.html#a74426214379e50aa0d8a7b19084887ee">More...</a><br /></td></tr>
<tr class="separator:a74426214379e50aa0d8a7b19084887ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a110084e07cf276072bf7275f22334087"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#a110084e07cf276072bf7275f22334087">RequestDone</a> ()</td></tr>
<tr class="memdesc:a110084e07cf276072bf7275f22334087"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the disk device interrupt handler, to signal that the current disk operation is complete.  <a href="classDriverDisk.html#a110084e07cf276072bf7275f22334087">More...</a><br /></td></tr>
<tr class="separator:a110084e07cf276072bf7275f22334087"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:acbbf38dbce563287b1c0f672f26d53b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSemaphore.html">Semaphore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#acbbf38dbce563287b1c0f672f26d53b2">semaphore</a></td></tr>
<tr class="memdesc:acbbf38dbce563287b1c0f672f26d53b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">To synchronize requesting thread with the interrupt handler.  <a href="classDriverDisk.html#acbbf38dbce563287b1c0f672f26d53b2">More...</a><br /></td></tr>
<tr class="separator:acbbf38dbce563287b1c0f672f26d53b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe1043f09602296df03e98c32a13f8b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLock.html">Lock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#abe1043f09602296df03e98c32a13f8b1">lock</a></td></tr>
<tr class="memdesc:abe1043f09602296df03e98c32a13f8b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutual exclusion on the disk device.  <a href="classDriverDisk.html#abe1043f09602296df03e98c32a13f8b1">More...</a><br /></td></tr>
<tr class="separator:abe1043f09602296df03e98c32a13f8b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e6453448bb8b509ec4a17737e70fe46"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDisk.html">Disk</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#a0e6453448bb8b509ec4a17737e70fe46">disk</a></td></tr>
<tr class="memdesc:a0e6453448bb8b509ec4a17737e70fe46"><td class="mdescLeft">&#160;</td><td class="mdescRight">The disk.  <a href="classDriverDisk.html#a0e6453448bb8b509ec4a17737e70fe46">More...</a><br /></td></tr>
<tr class="separator:a0e6453448bb8b509ec4a17737e70fe46"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines a "synchronous" disk abstraction. </p>
<p>As with other I/O devices, the raw physical disk is an asynchronous device &ndash; requests to read or write portions of the disk (sectors) return immediately, and an interrupt occurs later to signal that the operation completed. (Also, the physical characteristics of the disk device assume that only one operation can be requested at a time).</p>
<p>This class provides the abstraction that for any individual thread making a request, it waits around until the operation finishes before returning. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a12fc147f554a97268fab85d4013b85c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12fc147f554a97268fab85d4013b85c5">&#9670;&nbsp;</a></span>DriverDisk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DriverDisk::DriverDisk </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>sem_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>lock_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDisk.html">Disk</a> *&#160;</td>
          <td class="paramname"><em>theDisk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. Initializes the disk driver by initializing the raw <a class="el" href="classDisk.html" title="Defines a physical disk I/O device.">Disk</a>. </p>
<p>Constructor. Initialize the disk driver, in turn initializing the physical disk. </p>

</div>
</div>
<a id="aef7f9b235761f441807ae26d2f6e22a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef7f9b235761f441807ae26d2f6e22a7">&#9670;&nbsp;</a></span>~DriverDisk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DriverDisk::~DriverDisk </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor. De-allocate the driver data. </p>
<p>Destructor. De-allocate data structures needed for the disk driver. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2e93ba9a36bba4e8b3eeb43f877b2395"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e93ba9a36bba4e8b3eeb43f877b2395">&#9670;&nbsp;</a></span>ReadSector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DriverDisk::ReadSector </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sectorNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a disk sector, returning only once the data is actually read. </p>
<p>Read the contents of a disk sector into a buffer. Return only after the data has been read.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sectorNumber</td><td>the disk sector to read </td></tr>
    <tr><td class="paramname">data</td><td>the buffer to hold the contents of the disk sector </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classDriverDisk_a2e93ba9a36bba4e8b3eeb43f877b2395_cgraph.png" border="0" usemap="#classDriverDisk_a2e93ba9a36bba4e8b3eeb43f877b2395_cgraph" alt=""/></div>
<map name="classDriverDisk_a2e93ba9a36bba4e8b3eeb43f877b2395_cgraph" id="classDriverDisk_a2e93ba9a36bba4e8b3eeb43f877b2395_cgraph">
<area shape="rect" title="Read a disk sector, returning only once the data is actually read." alt="" coords="5,183,161,209"/>
<area shape="rect" href="classLock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="225,5,328,32"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="646,157,714,184"/>
<area shape="rect" href="classSemaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="224,183,329,209"/>
<area shape="rect" href="classDisk.html#a8b51a82d4f2fd009335d0c591ae11042" title=" " alt="" coords="209,309,344,336"/>
<area shape="rect" href="classLock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="224,360,329,387"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="815,132,931,159"/>
<area shape="rect" href="classDisk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="403,629,557,656"/>
<area shape="rect" href="disk_8cpp.html#a03b355bcf0d41c1fdeb1c69fb067fc1a" title="dummy procedure because we can&#39;t take a pointer of a member function" alt="" coords="441,309,519,336"/>
<area shape="rect" href="classThread.html#ade294fd013100034bebd745d8ffb1f94" title="Returns the process owner." alt="" coords="393,360,567,387"/>
<area shape="rect" href="classProcessStat.html#a8114ba343d15b3a29be80eff5a094f79" title=" " alt="" coords="392,411,568,453"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="451,477,509,504"/>
<area shape="rect" href="disk_8cpp.html#a3f97a10c00c77d969f5ec6423403b6cc" title="Dump the data in a disk read/write request, for debugging only." alt="" coords="437,528,523,555"/>
<area shape="rect" href="sysdep_8cpp.html#a6140dcc97ab52a9406e6d3f5749fa43c" title="Read characters from an open file. Abort if read fails." alt="" coords="454,579,506,605"/>
<area shape="rect" href="classInterrupt.html#ac403a14a9e41fa2b6dbd5c6056b87389" title="Print interrupt state." alt="" coords="415,208,545,235"/>
<area shape="rect" href="classDisk.html#aa87426eeedc8cf390fa4b293ecd34b42" title=" " alt="" coords="419,259,541,285"/>
<area shape="rect" href="classStatistics.html#a77aec82b7adb8d795c850db96c82f5d8" title=" " alt="" coords="792,335,955,361"/>
<area shape="rect" href="classDisk.html#abf14ace693df2b08e1187045305e81a5" title="time to get to the new track" alt="" coords="622,579,738,605"/>
<area shape="rect" href="classDisk.html#abecdf19e160925b1bc9b4542c90de2ac" title=" " alt="" coords="616,360,744,387"/>
<area shape="rect" href="classList.html#a7c94145ed3ab4115dd2a87e25eeadc91" title=" " alt="" coords="619,259,741,285"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classDriverDisk_a2e93ba9a36bba4e8b3eeb43f877b2395_icgraph.png" border="0" usemap="#classDriverDisk_a2e93ba9a36bba4e8b3eeb43f877b2395_icgraph" alt=""/></div>
<map name="classDriverDisk_a2e93ba9a36bba4e8b3eeb43f877b2395_icgraph" id="classDriverDisk_a2e93ba9a36bba4e8b3eeb43f877b2395_icgraph">
<area shape="rect" title="Read a disk sector, returning only once the data is actually read." alt="" coords="2769,104,2925,131"/>
<area shape="rect" href="classFileHeader.html#aa85564cee98fc9592df08cc5e4a2efc6" title="Initialize file header from disk." alt="" coords="2322,130,2477,156"/>
<area shape="rect" href="classSwapManager.html#a0934e61240a5ace841499321bf0889af" title=" " alt="" coords="2527,79,2721,106"/>
<area shape="rect" href="classFileHeader.html#a57b661cda2c4d51ee06cc29e7ea0a0c0" title="Print the contents of the file." alt="" coords="2340,28,2459,55"/>
<area shape="rect" href="classOpenFile.html#a0af8cd52ec71a2ad407039cebee2ef3d" title=" " alt="" coords="2561,408,2687,435"/>
<area shape="rect" href="classOpenFile.html#a89136ac6b54013a413398f9496d39963" title=" " alt="" coords="2132,130,2267,156"/>
<area shape="rect" href="classFileSystem.html#aebaf06661b1879a62afefa5abe99f21e" title="List all the files and their contents." alt="" coords="1946,79,2069,106"/>
<area shape="rect" href="classDirectory.html#a40c728221c5557e4fc181c4091c6fcff" title="Verbose print of the contents of the directory – all the file names and their contents." alt="" coords="2145,28,2254,55"/>
<area shape="rect" href="classFileSystem.html#a52e69a068c68c6c84f02c80fd4c5389e" title="Delete a file (UNIX unlink)" alt="" coords="1735,371,1878,398"/>
<area shape="rect" href="classFileSystem.html#ae5cbf7822080d1c9bb606b5d74dd4ee5" title="Delete a directory." alt="" coords="1741,539,1872,566"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="1383,486,1434,512"/>
<area shape="rect" href="classFileSystem.html#a12d63294322b37e934edd03ff614b95a" title=" " alt="" coords="1725,320,1888,347"/>
<area shape="rect" href="classOpenFileTable.html#a004541913ef8deb24d571c20d2020175" title="remove the file from the file system" alt="" coords="1519,688,1677,715"/>
<area shape="rect" href="machine_8hpp.html#af31c84fcf9811fc72614abc2be3b5a44" title="Entry point into Nachos to handle user system calls and exceptions." alt="" coords="1347,714,1471,740"/>
<area shape="rect" href="classMachine.html#a0d6f63790c0568437b100171f61fd77f" title="Do a pending delayed load (modifying a reg)" alt="" coords="1128,612,1299,639"/>
<area shape="rect" href="classMachine.html#ad70a015685c6e4bf705e4939551774aa" title=" " alt="" coords="585,562,748,588"/>
<area shape="rect" href="classMMU.html#a28a50bd03688bc05aa15f93e4abf61a7" title=" " alt="" coords="797,688,917,715"/>
<area shape="rect" href="classMMU.html#aa2ddea5dcd1648aba21ac1a75c79dc25" title=" " alt="" coords="965,612,1080,639"/>
<area shape="rect" href="classMMU.html#a60227cf48e6778a4c66d8a13fd2f1539" title=" " alt="" coords="796,511,917,538"/>
<area shape="rect" href="classMachine.html#a83444e06eb7a7c163a1b9c87a7062d43" title="Destructor. De&#45;allocate the data structures." alt="" coords="435,562,537,588"/>
<area shape="rect" href="thread_8cpp.html#a014c1a99794f74ed079b0dde1f7efe8d" title=" " alt="" coords="240,562,387,588"/>
<area shape="rect" href="classThread.html#ad6d5edb1a6d2a9effbb442883fc5b866" title="Sets&#45;up the thread simulator context : fills it with the appropriate." alt="" coords="5,562,192,588"/>
<area shape="rect" href="exception_8cpp.html#a2f3d05f12e27c15623b3d6a0e3813677" title=" " alt="" coords="607,727,727,754"/>
<area shape="rect" href="exception_8cpp.html#a467d8e83c5db03566d20ee929c7d7c1f" title=" " alt="" coords="609,778,724,804"/>
<area shape="rect" href="classAddrSpace.html#acd3d2a68587b04ed5740e87895613821" title=" " alt="" coords="2320,383,2479,410"/>
<area shape="rect" href="classBitMap.html#ad6d12eefec9b64e903d072c83f7c29a2" title="Print contents of bitmap." alt="" coords="2332,484,2467,511"/>
<area shape="rect" href="classOpenFile.html#ad4b5d26a169a7c22e6f27c1693adb1aa" title=" " alt="" coords="2136,434,2263,460"/>
<area shape="rect" href="classDirectory.html#a36ed455b21bbd9a66ffe8ec689ff7c73" title="Init directory contents from disk." alt="" coords="2127,890,2272,916"/>
<area shape="rect" href="classOpenFile.html#af87bf2b0b15fa3501dada45a1a284bf4" title=" " alt="" coords="1751,270,1863,296"/>
<area shape="rect" href="classFileSystem.html#ac789d58815881d7f193d86085b0f54aa" title="Create a file (UNIX creat)" alt="" coords="1739,790,1874,816"/>
<area shape="rect" href="classFileSystem.html#aaf76918c6f0d24bc72aaa84625adfddf" title="List all the files in the file system." alt="" coords="1748,1092,1865,1119"/>
<area shape="rect" href="classFileSystem.html#a9b4f11a12aed939e691edd6d591a8fcf" title="Create a new directory." alt="" coords="1743,638,1871,664"/>
<area shape="rect" href="classOpenFileTableEntry.html#a3db43ff60517c9949bb89a499c7304a8" title=" " alt="" coords="1731,473,1883,514"/>
<area shape="rect" href="main_8cpp.html#a8e00c17571a60a78f108e1b56b300e1f" title=" " alt="" coords="1572,790,1624,816"/>
<area shape="rect" href="classOpenFile.html#a2de8d2d805fef3510bfd2fdf46f683fa" title=" " alt="" coords="1750,739,1863,766"/>
<area shape="rect" href="classBitMap.html#a19052d41ba5a654c7e478582dffba20d" title="fetch contents from disk" alt="" coords="1941,434,2073,460"/>
<area shape="rect" href="classDirectory.html#abf5550df42587bbc604c71441a4d12fc" title="Write modifications to directory contents back to disk." alt="" coords="1936,383,2079,410"/>
<area shape="rect" href="filesys_8hpp.html#a562c4a58dde9f8b0a25dc482e23d9dc4" title=" " alt="" coords="1976,788,2039,815"/>
<area shape="rect" href="classFileSystem.html#a606ea080a2a0fe5e3be3c3f5b8f4e7bc" title="Open a file (UNIX open)" alt="" coords="1743,840,1870,867"/>
<area shape="rect" href="classOpenFileTable.html#ab0519dd960600e61b98d524281aaa882" title=" " alt="" coords="1735,1042,1879,1068"/>
<area shape="rect" href="classDirectory.html#a2525a4455b80a1ee2648319ab257037c" title="Print the names of all the files in the directory." alt="" coords="1956,1167,2059,1194"/>
<area shape="rect" href="main_8cpp.html#a42300b7160fd87b4a003e05cfa902ae4" title=" " alt="" coords="1573,334,1623,360"/>
<area shape="rect" href="classProcess.html#acc8b64d45800f641a937ca447f080d10" title=" " alt="" coords="1535,891,1661,918"/>
</map>
</div>

</div>
</div>
<a id="a110084e07cf276072bf7275f22334087"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a110084e07cf276072bf7275f22334087">&#9670;&nbsp;</a></span>RequestDone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DriverDisk::RequestDone </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called by the disk device interrupt handler, to signal that the current disk operation is complete. </p>
<p><a class="el" href="classDisk.html" title="Defines a physical disk I/O device.">Disk</a> interrupt handler. Wake up any thread waiting for the disk request to finish. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classDriverDisk_a110084e07cf276072bf7275f22334087_cgraph.png" border="0" usemap="#classDriverDisk_a110084e07cf276072bf7275f22334087_cgraph" alt=""/></div>
<map name="classDriverDisk_a110084e07cf276072bf7275f22334087_cgraph" id="classDriverDisk_a110084e07cf276072bf7275f22334087_cgraph">
<area shape="rect" title="Called by the disk device interrupt handler, to signal that the current disk operation is complete." alt="" coords="5,31,172,57"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="239,5,307,32"/>
<area shape="rect" href="classSemaphore.html#a3e42125b95660ef696d0d0069b804343" title=" " alt="" coords="220,56,325,83"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="373,5,489,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classDriverDisk_a110084e07cf276072bf7275f22334087_icgraph.png" border="0" usemap="#classDriverDisk_a110084e07cf276072bf7275f22334087_icgraph" alt=""/></div>
<map name="classDriverDisk_a110084e07cf276072bf7275f22334087_icgraph" id="classDriverDisk_a110084e07cf276072bf7275f22334087_icgraph">
<area shape="rect" title="Called by the disk device interrupt handler, to signal that the current disk operation is complete." alt="" coords="388,31,555,57"/>
<area shape="rect" href="drvDisk_8hpp.html#a4914abaf9a1c5b03d7d58de239c0060a" title=" " alt="" coords="197,5,324,32"/>
<area shape="rect" href="drvDisk_8hpp.html#a15036b35816c3b721525d4b117a5f40e" title=" " alt="" coords="181,56,340,83"/>
<area shape="rect" href="classMachine.html#ad5958275a54dbc299b71ecdba7da0604" title=" " alt="" coords="5,31,133,57"/>
</map>
</div>

</div>
</div>
<a id="a74426214379e50aa0d8a7b19084887ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74426214379e50aa0d8a7b19084887ee">&#9670;&nbsp;</a></span>WriteSector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DriverDisk::WriteSector </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sectorNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>write a disk sector, returning only once the data is actually written. </p>
<p>Write the contents of a buffer into a disk sector. Return only after the data has been written.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sectorNumber</td><td>the disk sector to be written </td></tr>
    <tr><td class="paramname">data</td><td>the new contents of the disk sector </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classDriverDisk_a74426214379e50aa0d8a7b19084887ee_cgraph.png" border="0" usemap="#classDriverDisk_a74426214379e50aa0d8a7b19084887ee_cgraph" alt=""/></div>
<map name="classDriverDisk_a74426214379e50aa0d8a7b19084887ee_cgraph" id="classDriverDisk_a74426214379e50aa0d8a7b19084887ee_cgraph">
<area shape="rect" title="write a disk sector, returning only once the data is actually written." alt="" coords="5,309,163,336"/>
<area shape="rect" href="classLock.html#ad4c4699fd1ab73f3927b10edc01c54db" title="Acquire a lock (atomic operation)" alt="" coords="227,5,329,32"/>
<area shape="rect" href="utility_8cpp.html#af1c6878736cbd9e1b531898d8951d613" title=" " alt="" coords="647,208,715,235"/>
<area shape="rect" href="classSemaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title=" " alt="" coords="225,360,331,387"/>
<area shape="rect" href="classLock.html#a5ca005b84272e56c2bf447056ee9217c" title="Release a lock (atomic operation)" alt="" coords="225,411,331,437"/>
<area shape="rect" href="classDisk.html#aec33797c6480a8c919fc7d340c316abe" title=" " alt="" coords="211,309,345,336"/>
<area shape="rect" href="utility_8cpp.html#a79c7d1acabdb48f6f6a80ec0abf7cf89" title=" " alt="" coords="817,157,933,184"/>
<area shape="rect" href="classDisk.html#a2337b1c68eb5f6a15502d8327d15248b" title=" " alt="" coords="404,360,559,387"/>
<area shape="rect" href="disk_8cpp.html#a03b355bcf0d41c1fdeb1c69fb067fc1a" title="dummy procedure because we can&#39;t take a pointer of a member function" alt="" coords="442,512,521,539"/>
<area shape="rect" href="classThread.html#ade294fd013100034bebd745d8ffb1f94" title="Returns the process owner." alt="" coords="394,563,569,589"/>
<area shape="rect" href="classProcessStat.html#ad8f0597460874ad1dcf515fa3b58b9c8" title=" " alt="" coords="393,614,569,655"/>
<area shape="rect" href="sysdep_8cpp.html#a5e24d90699a8caf5d5ecf0ea461050b4" title="Change the location within an open file. Abort on error." alt="" coords="453,157,510,184"/>
<area shape="rect" href="disk_8cpp.html#a3f97a10c00c77d969f5ec6423403b6cc" title="Dump the data in a disk read/write request, for debugging only." alt="" coords="438,259,525,285"/>
<area shape="rect" href="classInterrupt.html#ac403a14a9e41fa2b6dbd5c6056b87389" title="Print interrupt state." alt="" coords="416,411,547,437"/>
<area shape="rect" href="classDisk.html#aa87426eeedc8cf390fa4b293ecd34b42" title=" " alt="" coords="420,461,543,488"/>
<area shape="rect" href="sysdep_8cpp.html#a423758a22b76ab4ab8dce5afd92b83cd" title="Write characters to an open file. Abort if write fails." alt="" coords="444,309,519,336"/>
<area shape="rect" href="classStatistics.html#a77aec82b7adb8d795c850db96c82f5d8" title=" " alt="" coords="793,385,956,412"/>
<area shape="rect" href="classDisk.html#abf14ace693df2b08e1187045305e81a5" title="time to get to the new track" alt="" coords="623,309,739,336"/>
<area shape="rect" href="classDisk.html#abecdf19e160925b1bc9b4542c90de2ac" title=" " alt="" coords="617,360,745,387"/>
<area shape="rect" href="classList.html#a7c94145ed3ab4115dd2a87e25eeadc91" title=" " alt="" coords="621,461,742,488"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classDriverDisk_a74426214379e50aa0d8a7b19084887ee_icgraph.png" border="0" usemap="#classDriverDisk_a74426214379e50aa0d8a7b19084887ee_icgraph" alt=""/></div>
<map name="classDriverDisk_a74426214379e50aa0d8a7b19084887ee_icgraph" id="classDriverDisk_a74426214379e50aa0d8a7b19084887ee_icgraph">
<area shape="rect" title="write a disk sector, returning only once the data is actually written." alt="" coords="2544,208,2701,235"/>
<area shape="rect" href="classSwapManager.html#a35b5428181fe6bbb69f2cdfe9df13546" title=" " alt="" coords="2301,157,2496,184"/>
<area shape="rect" href="classOpenFile.html#ad4b5d26a169a7c22e6f27c1693adb1aa" title=" " alt="" coords="2127,259,2253,285"/>
<area shape="rect" href="classFileHeader.html#ab896cc7dd7274e3f8072da2c7d9beee8" title="Write modifications to file header back to disk." alt="" coords="2322,208,2475,235"/>
<area shape="rect" href="classOpenFile.html#a2de8d2d805fef3510bfd2fdf46f683fa" title=" " alt="" coords="1750,56,1863,83"/>
<area shape="rect" href="classBitMap.html#a19052d41ba5a654c7e478582dffba20d" title="fetch contents from disk" alt="" coords="1941,309,2073,336"/>
<area shape="rect" href="classDirectory.html#abf5550df42587bbc604c71441a4d12fc" title="Write modifications to directory contents back to disk." alt="" coords="1936,259,2079,285"/>
<area shape="rect" href="main_8cpp.html#a8e00c17571a60a78f108e1b56b300e1f" title=" " alt="" coords="1572,107,1624,133"/>
<area shape="rect" href="machine_8hpp.html#af31c84fcf9811fc72614abc2be3b5a44" title="Entry point into Nachos to handle user system calls and exceptions." alt="" coords="1347,208,1471,235"/>
<area shape="rect" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="1383,309,1434,336"/>
<area shape="rect" href="classMachine.html#a0d6f63790c0568437b100171f61fd77f" title="Do a pending delayed load (modifying a reg)" alt="" coords="1128,107,1299,133"/>
<area shape="rect" href="classMachine.html#ad70a015685c6e4bf705e4939551774aa" title=" " alt="" coords="585,56,748,83"/>
<area shape="rect" href="classMMU.html#a28a50bd03688bc05aa15f93e4abf61a7" title=" " alt="" coords="797,183,917,209"/>
<area shape="rect" href="classMMU.html#aa2ddea5dcd1648aba21ac1a75c79dc25" title=" " alt="" coords="965,107,1080,133"/>
<area shape="rect" href="classMMU.html#a60227cf48e6778a4c66d8a13fd2f1539" title=" " alt="" coords="796,5,917,32"/>
<area shape="rect" href="classMachine.html#a83444e06eb7a7c163a1b9c87a7062d43" title="Destructor. De&#45;allocate the data structures." alt="" coords="435,56,537,83"/>
<area shape="rect" href="thread_8cpp.html#a014c1a99794f74ed079b0dde1f7efe8d" title=" " alt="" coords="240,56,387,83"/>
<area shape="rect" href="classThread.html#ad6d5edb1a6d2a9effbb442883fc5b866" title="Sets&#45;up the thread simulator context : fills it with the appropriate." alt="" coords="5,56,192,83"/>
<area shape="rect" href="exception_8cpp.html#a2f3d05f12e27c15623b3d6a0e3813677" title=" " alt="" coords="607,221,727,248"/>
<area shape="rect" href="exception_8cpp.html#a467d8e83c5db03566d20ee929c7d7c1f" title=" " alt="" coords="609,272,724,299"/>
<area shape="rect" href="classFileSystem.html#ac789d58815881d7f193d86085b0f54aa" title="Create a file (UNIX creat)" alt="" coords="1739,157,1874,184"/>
<area shape="rect" href="classFileSystem.html#a12d63294322b37e934edd03ff614b95a" title=" " alt="" coords="1725,107,1888,133"/>
<area shape="rect" href="classFileSystem.html#a9b4f11a12aed939e691edd6d591a8fcf" title="Create a new directory." alt="" coords="1743,411,1871,437"/>
<area shape="rect" href="classFileSystem.html#a52e69a068c68c6c84f02c80fd4c5389e" title="Delete a file (UNIX unlink)" alt="" coords="1735,309,1878,336"/>
<area shape="rect" href="classFileSystem.html#ae5cbf7822080d1c9bb606b5d74dd4ee5" title="Delete a directory." alt="" coords="1533,259,1663,285"/>
<area shape="rect" href="classOpenFileTableEntry.html#a3db43ff60517c9949bb89a499c7304a8" title=" " alt="" coords="1731,462,1883,503"/>
<area shape="rect" href="classOpenFileTable.html#a004541913ef8deb24d571c20d2020175" title="remove the file from the file system" alt="" coords="1519,208,1677,235"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a0e6453448bb8b509ec4a17737e70fe46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e6453448bb8b509ec4a17737e70fe46">&#9670;&nbsp;</a></span>disk</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDisk.html">Disk</a>* DriverDisk::disk</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The disk. </p>

</div>
</div>
<a id="abe1043f09602296df03e98c32a13f8b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe1043f09602296df03e98c32a13f8b1">&#9670;&nbsp;</a></span>lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLock.html">Lock</a>* DriverDisk::lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutual exclusion on the disk device. </p>

</div>
</div>
<a id="acbbf38dbce563287b1c0f672f26d53b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbbf38dbce563287b1c0f672f26d53b2">&#9670;&nbsp;</a></span>semaphore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSemaphore.html">Semaphore</a>* DriverDisk::semaphore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>To synchronize requesting thread with the interrupt handler. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>drivers/<a class="el" href="drvDisk_8hpp_source.html">drvDisk.hpp</a></li>
<li>drivers/<a class="el" href="drvDisk_8cpp.html">drvDisk.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classDriverDisk.html">DriverDisk</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
